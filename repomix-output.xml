This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
apps/
  backend/
    prisma/
      schema.prisma
    src/
      prisma/
        prisma.module.ts
        prisma.service.ts
      app.module.ts
      main.ts
    nest-cli.json
    package.json
    tsconfig.json
  frontend/
    app/
      globals.css
      layout.tsx
      page.tsx
    plans/
      reports/
        code-reviewer-260103-1912-phase01.md
    next-env.d.ts
    next.config.js
    package.json
    postcss.config.js
    tailwind.config.js
    tsconfig.json
    tsconfig.tsbuildinfo
docs/
  wireframes/
    dashboard.html
    dashboard.png
    docs-editor.html
    docs-editor.png
    project-settings.html
    project-settings.png
  design-guidelines.md
plans/
  260103-1818-ai-toolkit-sync-platform/
    phase-01-infrastructure-database.md
    phase-02-backend-core-services.md
    phase-03-frontend-foundation.md
    phase-04-frontend-features.md
    phase-05-backend-realtime-hooks.md
    phase-06-integration-testing.md
    plan.md
  reports/
    brainstorm-260103-1704-ai-toolkit-sync-platform.md
    researcher-260103-1819-nestjs-prisma-best-practices.md
    researcher-260103-1819-nextjs14-monaco-platform.md
.env.example
.gitignore
docker-compose.yml
package.json
pnpm-workspace.yaml
README.md
tsconfig.base.json
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="apps/backend/prisma/schema.prisma">
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Project {
  id        String   @id @default(cuid())
  name      String
  repoUrl   String
  token     String   // Encrypted GitHub PAT
  branch    String   @default("main")
  docsPath  String   @default("docs")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  docs    Doc[]
  locks   Lock[]
  apiKeys ApiKey[]
}

model Doc {
  id        String   @id @default(cuid())
  projectId String
  project   Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
  fileName  String
  content   String   @db.Text
  hash      String
  version   Int      @default(1)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([projectId, fileName])
  @@index([projectId])
}

model Lock {
  id        String    @id @default(cuid())
  projectId String    @unique
  project   Project   @relation(fields: [projectId], references: [id], onDelete: Cascade)
  lockedBy  String
  lockedAt  DateTime  @default(now())
  expiresAt DateTime?
  reason    String?

  @@index([projectId])
  @@index([expiresAt])
}

model ApiKey {
  id        String   @id @default(cuid())
  projectId String
  project   Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
  key       String   @unique
  name      String
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())

  @@index([projectId])
  @@index([key])
}
</file>

<file path="apps/backend/src/prisma/prisma.module.ts">
import { Global, Module } from '@nestjs/common';
import { PrismaService } from './prisma.service';

@Global()
@Module({
  providers: [PrismaService],
  exports: [PrismaService],
})
export class PrismaModule {}
</file>

<file path="apps/backend/src/prisma/prisma.service.ts">
import { Injectable, OnModuleInit, OnModuleDestroy, Logger } from '@nestjs/common';
import { PrismaClient } from '@prisma/client';

@Injectable()
export class PrismaService extends PrismaClient implements OnModuleInit, OnModuleDestroy {
  private readonly logger = new Logger(PrismaService.name);

  constructor() {
    super({
      log: process.env.NODE_ENV === 'development'
        ? ['error', 'warn']
        : ['error'],
    });
  }

  async onModuleInit() {
    try {
      await this.$connect();
      this.logger.log('Database connection established');
    } catch (error) {
      this.logger.error('Failed to connect to database', error);
      throw error;
    }
  }

  async onModuleDestroy() {
    await this.$disconnect();
  }
}
</file>

<file path="apps/backend/src/app.module.ts">
import { Module } from '@nestjs/common';
import { ConfigModule } from '@nestjs/config';
import { PrismaModule } from './prisma/prisma.module';

@Module({
  imports: [
    ConfigModule.forRoot({ isGlobal: true }),
    PrismaModule,
  ],
})
export class AppModule {}
</file>

<file path="apps/backend/src/main.ts">
import { NestFactory } from '@nestjs/core';
import { ValidationPipe, Logger } from '@nestjs/common';
import { AppModule } from './app.module';

async function bootstrap() {
  const app = await NestFactory.create(AppModule);
  const logger = new Logger('Bootstrap');

  app.useGlobalPipes(
    new ValidationPipe({
      transform: true,
      whitelist: true,
      forbidNonWhitelisted: true,
    }),
  );

  app.enableCors({
    origin: process.env.FRONTEND_URL || 'http://localhost:3000',
    credentials: true,
  });

  app.setGlobalPrefix('api');

  const port = process.env.PORT || 3001;
  await app.listen(port);
  logger.log(`Application running on port ${port}`);
}

bootstrap();
</file>

<file path="apps/backend/nest-cli.json">
{
  "$schema": "https://json.schemastore.org/nest-cli",
  "collection": "@nestjs/schematics",
  "sourceRoot": "src",
  "compilerOptions": {
    "deleteOutDir": true
  }
}
</file>

<file path="apps/backend/package.json">
{
  "name": "backend",
  "version": "0.0.1",
  "private": true,
  "scripts": {
    "build": "nest build",
    "dev": "nest start --watch",
    "start": "node dist/main",
    "start:prod": "node dist/main",
    "lint": "eslint \"{src,test}/**/*.ts\" --fix",
    "test": "jest",
    "test:watch": "jest --watch",
    "test:e2e": "jest --config ./test/jest-e2e.json"
  },
  "dependencies": {
    "@nestjs/common": "^10.3.0",
    "@nestjs/config": "^4.0.2",
    "@nestjs/core": "^10.3.0",
    "@nestjs/mapped-types": "^2.1.0",
    "@nestjs/platform-express": "^10.3.0",
    "@nestjs/platform-socket.io": "^10.3.0",
    "@nestjs/websockets": "^10.3.0",
    "@octokit/rest": "^20.0.0",
    "@prisma/client": "^5.10.0",
    "@types/express": "^5.0.6",
    "class-transformer": "^0.5.1",
    "class-validator": "^0.14.1",
    "reflect-metadata": "^0.2.0",
    "rxjs": "^7.8.1"
  },
  "devDependencies": {
    "@nestjs/cli": "^10.3.0",
    "@nestjs/testing": "^10.3.0",
    "@types/jest": "^29.5.0",
    "@types/node": "^20.11.0",
    "jest": "^29.7.0",
    "prisma": "^5.10.0",
    "ts-jest": "^29.1.0",
    "typescript": "^5.4.0"
  },
  "jest": {
    "moduleFileExtensions": [
      "js",
      "json",
      "ts"
    ],
    "rootDir": "src",
    "testRegex": ".*\\.spec\\.ts$",
    "transform": {
      "^.+\\.(t|j)s$": "ts-jest"
    },
    "collectCoverageFrom": [
      "**/*.(t|j)s"
    ],
    "coverageDirectory": "../coverage",
    "testEnvironment": "node"
  }
}
</file>

<file path="apps/backend/tsconfig.json">
{
  "extends": "../../tsconfig.base.json",
  "compilerOptions": {
    "module": "CommonJS",
    "moduleResolution": "Node",
    "outDir": "./dist",
    "rootDir": "./src",
    "experimentalDecorators": true,
    "emitDecoratorMetadata": true
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist"]
}
</file>

<file path="apps/frontend/app/globals.css">
@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --foreground-rgb: 0, 0, 0;
  --background-rgb: 255, 255, 255;
}

@media (prefers-color-scheme: dark) {
  :root {
    --foreground-rgb: 255, 255, 255;
    --background-rgb: 0, 0, 0;
  }
}

body {
  color: rgb(var(--foreground-rgb));
  background: rgb(var(--background-rgb));
}
</file>

<file path="apps/frontend/app/layout.tsx">
import type { Metadata } from 'next';
import './globals.css';

export const metadata: Metadata = {
  title: 'AI Toolkit Sync Platform',
  description: 'Centralized docs management for AI-assisted development teams',
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  );
}
</file>

<file path="apps/frontend/app/page.tsx">
export default function Home() {
  return (
    <main className="min-h-screen p-8">
      <h1 className="text-3xl font-bold">AI Toolkit Sync Platform</h1>
      <p className="mt-4 text-gray-600">Centralized docs management for AI-assisted development teams.</p>
    </main>
  );
}
</file>

<file path="apps/frontend/plans/reports/code-reviewer-260103-1912-phase01.md">
# Code Review: Phase 01 - AI Toolkit Sync Platform

## Scope
- Files reviewed: 18 (infrastructure, backend setup, frontend setup)
- Lines of code analyzed: ~600
- Review focus: Phase 01 initial setup - monorepo structure, Docker, database schema, NestJS backend, Next.js frontend
- Updated plans: N/A (no plan file provided)

## Overall Assessment
Phase 01 establishes solid foundation with modern stack. Builds successfully, type-safe, follows monorepo patterns. However, **5 CRITICAL security vulnerabilities** identified requiring immediate remediation before production deployment.

---

## CRITICAL ISSUES

### 1. **PLAINTEXT GITHUB TOKEN STORAGE** ⚠️ SEVERITY: CRITICAL
**File:** `/apps/backend/prisma/schema.prisma` (line 14)

**Issue:** GitHub Personal Access Tokens stored as plaintext in database.
```prisma
token String // Encrypted GitHub PAT <- COMMENT LIES, NOT ENCRYPTED
```

**Impact:**
- Database breach exposes all GitHub credentials
- Violates OWASP A02:2021 (Cryptographic Failures)
- Regulatory compliance risk (GDPR, SOC2)

**Required Action:**
- Implement encryption at rest using AES-256-GCM
- Use separate encryption key from DATABASE_URL
- Store encryption key in secure vault (HashiCorp Vault/AWS Secrets Manager)
- Add key rotation mechanism
- Never log decrypted tokens

---

### 2. **HARDCODED DATABASE CREDENTIALS** ⚠️ SEVERITY: CRITICAL
**File:** `/docker-compose.yml` (lines 5-8)

**Issue:** Database credentials hardcoded in Docker Compose file.
```yaml
POSTGRES_USER: aitoolkit
POSTGRES_PASSWORD: aitoolkit_dev  # EXPOSED IN VCS
```

**Impact:**
- Credentials visible in git history forever
- Easy attack vector if repo becomes public
- Violates OWASP A07:2021 (Identification/Authentication Failures)

**Required Action:**
- Use environment variable substitution: `${POSTGRES_PASSWORD}`
- Document in README: "Copy .env.example to .env before running"
- Add `.env` to `.gitignore` (already present - good)
- Validate `.env` exists before docker-compose starts

---

### 3. **MISSING ENCRYPTION KEY VALIDATION** ⚠️ SEVERITY: CRITICAL
**File:** `/.env.example` (line 15)

**Issue:** ENCRYPTION_KEY commented out with no validation logic.
```bash
# ENCRYPTION_KEY=your-32-byte-hex-key  # Optional but required for production
```

**Impact:**
- App starts without encryption, stores tokens in plaintext
- Silent failure - no error until data breach

**Required Action:**
- Add startup validation in `main.ts`:
  ```typescript
  if (process.env.NODE_ENV === 'production' && !process.env.ENCRYPTION_KEY) {
    throw new Error('ENCRYPTION_KEY required in production');
  }
  ```
- Validate key format (64 hex chars for 32 bytes)
- Fail fast on invalid configuration

---

### 4. **DANGEROUS DATABASE CLEANUP FUNCTION** ⚠️ SEVERITY: HIGH
**File:** `/apps/backend/src/prisma/prisma.service.ts` (lines 22-30)

**Issue:** `cleanDatabase()` only checks `NODE_ENV !== 'production'`, not actual environment context.
```typescript
if (process.env.NODE_ENV !== 'production') {
  await this.project.deleteMany(); // WIPES ALL DATA
}
```

**Impact:**
- Environment variable typo (`NODE_ENV=prod` instead of `production`) wipes production database
- No confirmation prompt
- No audit log

**Required Action:**
- Remove this function entirely (YAGNI for Phase 01)
- If needed for testing, isolate to test files only
- Never expose in production build
- Add multi-factor confirmation if absolutely required

---

### 5. **OVERLY PERMISSIVE CORS CONFIGURATION** ⚠️ SEVERITY: HIGH
**File:** `/apps/backend/src/main.ts` (lines 17-20)

**Issue:** CORS fallback to localhost without validation.
```typescript
app.enableCors({
  origin: process.env.FRONTEND_URL || 'http://localhost:3000',
  credentials: true,
});
```

**Impact:**
- If `FRONTEND_URL` unset in production, accepts localhost connections
- Credentials enabled without strict origin validation
- CSRF vulnerability window
- Violates OWASP A05:2021 (Security Misconfiguration)

**Required Action:**
- Fail fast if `FRONTEND_URL` missing in production
- Support multiple origins: `origin: process.env.FRONTEND_URL.split(',')`
- Add regex validation for allowed domains
- Log CORS rejections for security monitoring

---

## HIGH PRIORITY FINDINGS

### 6. **Missing Security Headers**
**File:** `/apps/backend/src/main.ts`

**Issue:** No helmet middleware or security headers configured.

**Impact:** Vulnerable to XSS, clickjacking, MIME sniffing attacks.

**Action:** Install `helmet`, add:
```typescript
app.use(helmet({
  contentSecurityPolicy: true,
  hsts: { maxAge: 31536000 }
}));
```

---

### 7. **No Rate Limiting**
**File:** `/apps/backend/src/main.ts`

**Issue:** No throttling protection.

**Impact:** DDoS vulnerable, API abuse, credential stuffing attacks.

**Action:** Install `@nestjs/throttler`, configure per-endpoint limits.

---

### 8. **Missing Request Validation on API Keys**
**File:** `/apps/backend/prisma/schema.prisma` (model ApiKey)

**Issue:** No length constraints, no prefix pattern (e.g., `sk_live_`, `sk_test_`).

**Impact:** Weak key generation, key collision risk, no visual identification.

**Action:**
- Add `@db.VarChar(64)` constraint
- Implement prefix: `sk_${env}_${randomBytes(32).toString('hex')}`
- Add checksum validation

---

### 9. **Database Connection Not Validated**
**File:** `/apps/backend/src/prisma/prisma.service.ts`

**Issue:** `$connect()` swallows errors, app starts without DB.

**Action:** Add retry logic with exponential backoff, fail after 3 attempts:
```typescript
async onModuleInit() {
  await this.$connect().catch(err => {
    logger.error('DB connection failed', err);
    process.exit(1);
  });
}
```

---

### 10. **Lock Expiration Not Enforced**
**File:** `/apps/backend/prisma/schema.prisma` (model Lock)

**Issue:** `expiresAt` is nullable and indexed but no cleanup logic.

**Impact:** Stale locks block project access indefinitely.

**Action:**
- Make `expiresAt` required: `DateTime @default(dbgenerated("now() + interval '15 minutes'"))`
- Add cron job to delete expired locks
- Add TTL index if using MongoDB-compatible features

---

## MEDIUM PRIORITY IMPROVEMENTS

### 11. **Missing Health Check Endpoint**
**File:** `/apps/backend/src/app.module.ts`

**Issue:** No `/health` or `/readiness` endpoint for orchestration.

**Action:** Add `@nestjs/terminus`, expose `/api/health` checking DB + GitHub API connectivity.

---

### 12. **No API Versioning Strategy**
**File:** `/apps/backend/src/main.ts` (line 22)

**Issue:** Global prefix `/api` without version (`/api/v1`).

**Impact:** Breaking changes force all clients to update simultaneously.

**Action:** Use `/api/v1` now, easier to deprecate v1 and introduce v2 later.

---

### 13. **Frontend Environment Variable Not Validated**
**File:** `/apps/frontend/app/page.tsx`, `/.env.example` (line 9)

**Issue:** `NEXT_PUBLIC_API_URL` has no runtime validation.

**Impact:** App builds with wrong API URL, fails silently at runtime.

**Action:** Add env validation using Zod or similar at build time.

---

### 14. **Database Logging Exposes Queries in Development**
**File:** `/apps/backend/src/prisma/prisma.service.ts` (lines 8-10)

**Issue:** Logs all queries including tokens during dev.
```typescript
log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error']
```

**Action:** Filter sensitive fields from query logs using Prisma middleware.

---

### 15. **Missing Database Migration Strategy**
**File:** `/apps/backend/prisma/schema.prisma`

**Issue:** No `@@map` directives for table names, will generate `Project` instead of `projects`.

**Impact:** Non-standard table naming, harder to query directly.

**Action:** Add `@@map("projects")` to all models for conventional plural table names.

---

### 16. **No Input Sanitization Beyond Validation**
**File:** `/apps/backend/src/main.ts` (lines 9-15)

**Issue:** `ValidationPipe` configured but no XSS sanitization.

**Impact:** Stored XSS if `content` field contains `<script>` tags.

**Action:** Install `class-sanitizer` or use DOMPurify on frontend.

---

### 17. **Missing Cascade Delete Confirmation**
**File:** `/apps/backend/prisma/schema.prisma` (onDelete: Cascade)

**Issue:** Deleting Project deletes all Docs/Locks/ApiKeys silently.

**Impact:** Accidental data loss, no soft delete.

**Action:** Implement soft delete with `deletedAt` timestamp, archive instead of delete.

---

### 18. **No Connection Pooling Configuration**
**File:** `/.env.example` (line 2)

**Issue:** Database URL has no pool settings.

**Impact:** Connection exhaustion under load.

**Action:** Add to DATABASE_URL: `?connection_limit=20&pool_timeout=30`

---

## LOW PRIORITY SUGGESTIONS

### 19. **pnpm Workspace Config Typo**
**File:** `/pnpm-workspace.yaml` (line 9)

**Issue:** `unrs-resolver` seems like typo (should be `unsafeHttpWhitelist`?).

**Action:** Verify this is intentional, document why needed.

---

### 20. **TypeScript Target Mismatch**
**Files:** `/tsconfig.base.json` (ES2022) vs `/apps/backend/tsconfig.json` (CommonJS)

**Issue:** Base config targets modern ESM but backend uses CommonJS.

**Impact:** Confusion about module system, potential tree-shaking loss.

**Action:** Document intentionality or unify to ES2022 modules if Node.js >=18.

---

### 21. **Next.js Not Pinned to Exact Version**
**File:** `/apps/frontend/package.json` (line 12)

**Issue:** `"next": "14.2.0"` without `^` is good, but React uses `^18.2.0`.

**Action:** Pin React/React-DOM to exact versions for reproducibility.

---

### 22. **Missing Docker Resource Limits**
**File:** `/docker-compose.yml`

**Issue:** No memory/CPU limits on postgres service.

**Action:** Add `mem_limit: 512m`, `cpus: 0.5` for dev environment predictability.

---

### 23. **No Error Boundaries in React**
**File:** `/apps/frontend/app/layout.tsx`

**Issue:** No error boundary wrapping children.

**Impact:** Crashes show white screen instead of fallback UI.

**Action:** Wrap children in ErrorBoundary component.

---

### 24. **Missing ESLint Configurations**
**Files:** Root and app directories

**Issue:** Linting configured in scripts but no visible `.eslintrc` files.

**Action:** Verify `eslint-config-next` is properly extending rules, add custom rules for security patterns.

---

## YAGNI/KISS/DRY VIOLATIONS

### V1. **Premature Abstraction: Global Prisma Module**
**File:** `/apps/backend/src/prisma/prisma.module.ts` (line 4)

**Issue:** `@Global()` decorator applied before multiple modules need PrismaService.

**YAGNI:** Phase 01 has no feature modules yet. Import PrismaModule explicitly until 3+ modules need it.

---

### V2. **Unused Dependencies**
**File:** `/apps/backend/package.json`

**Issue:**
- `@nestjs/mapped-types` (line 19): No DTOs yet
- `@nestjs/platform-socket.io`, `@nestjs/websockets` (lines 21-22): No WebSocket implementation
- `@octokit/rest` (line 23): No GitHub integration code visible

**YAGNI:** Remove unused deps, add when features implemented.

---

### V3. **Duplicate TypeScript Config**
**Files:** Root `tsconfig.base.json` + per-app configs

**DRY:** Backend overrides `module` and `moduleResolution` unnecessarily.

**Action:** Move CommonJS requirement to workspace-specific needs documentation.

---

### V4. **Overcomplicated Validation Pipe**
**File:** `/apps/backend/src/main.ts` (lines 9-14)

**KISS:** `forbidNonWhitelisted: true` unnecessarily strict for Phase 01 with no DTOs.

**Action:** Start with `whitelist: true`, add `forbidNonWhitelisted` when DTO contracts stabilize.

---

### V5. **Premature Database Indexes**
**File:** `/apps/backend/prisma/schema.prisma`

**Issue:** Multiple `@@index` directives before any query patterns known.

**YAGNI:** Start without indexes, add based on EXPLAIN ANALYZE results under realistic load.

---

## POSITIVE OBSERVATIONS

✅ **Strong Type Safety:** Strict mode enabled, builds clean
✅ **Modern Stack:** Next.js 14 App Router, NestJS 10, Prisma, pnpm workspaces
✅ **Proper gitignore:** Environment files, secrets, build artifacts excluded
✅ **Validation Configured:** class-validator + class-transformer ready
✅ **Health Checks:** Docker Compose includes postgres healthcheck
✅ **Consistent Naming:** File structure follows framework conventions
✅ **Separation of Concerns:** Frontend/backend properly isolated
✅ **Documentation:** Comments indicate encryption intent (needs implementation)

---

## RECOMMENDED ACTIONS (Priority Order)

1. **[BLOCKER]** Implement GitHub token encryption (issues #1, #3)
2. **[BLOCKER]** Move Docker credentials to .env (issue #2)
3. **[BLOCKER]** Add ENCRYPTION_KEY validation (issue #3)
4. **[BLOCKER]** Fix CORS configuration (issue #5)
5. **[HIGH]** Remove cleanDatabase() method (issue #4)
6. **[HIGH]** Add helmet + rate limiting (issues #6, #7)
7. **[HIGH]** Implement API key prefix/validation (issue #8)
8. **[HIGH]** Add database connection retry logic (issue #9)
9. **[HIGH]** Implement lock expiration enforcement (issue #10)
10. **[MEDIUM]** Add /health endpoint (issue #11)
11. **[MEDIUM]** Version API endpoints (issue #12)
12. **[MEDIUM]** Add frontend env validation (issue #13)
13. **[CLEANUP]** Remove unused dependencies (violation V2)
14. **[CLEANUP]** Remove premature @Global decorator (violation V1)
15. **[DOCS]** Document TypeScript module strategy (violation V3)

---

## METRICS

- **Type Coverage:** 100% (strict mode enabled, builds pass)
- **Test Coverage:** 0% (no tests written yet - expected for Phase 01)
- **Linting Issues:** 0 (builds pass without errors)
- **Security Score:** 4/10 (critical issues present)
- **YAGNI Violations:** 5 (premature abstractions, unused deps)

---

## UNRESOLVED QUESTIONS

1. Is `unrs-resolver` in pnpm-workspace.yaml intentional? What does it resolve?
2. What's the planned encryption algorithm for GitHub tokens? (AES-256-GCM recommended)
3. Will API keys use JWT or opaque tokens?
4. What's the expected request rate for rate limiting configuration?
5. Does project require GDPR/SOC2 compliance? (Affects encryption requirements)
6. What's the deployment target? (Docker Swarm, K8s, serverless?) - affects health check implementation
7. Should Lock model support re-entrant locks (same user can lock multiple times)?
8. What's the expected Doc content size? (Text field may need optimization for large docs)

---

**Critical Issues: 5**
</file>

<file path="apps/frontend/next-env.d.ts">
/// <reference types="next" />
/// <reference types="next/image-types/global" />

// NOTE: This file should not be edited
// see https://nextjs.org/docs/basic-features/typescript for more information.
</file>

<file path="apps/frontend/next.config.js">
/** @type {import('next').NextConfig} */
const nextConfig = {
  reactStrictMode: true,
  transpilePackages: [],
};

module.exports = nextConfig;
</file>

<file path="apps/frontend/package.json">
{
  "name": "frontend",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev --port 3000",
    "build": "next build",
    "start": "next start",
    "lint": "next lint"
  },
  "dependencies": {
    "next": "14.2.0",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "@tanstack/react-query": "^5.28.0",
    "zustand": "^4.5.0",
    "@monaco-editor/react": "^4.6.0"
  },
  "devDependencies": {
    "@types/node": "^20.11.0",
    "@types/react": "^18.2.0",
    "@types/react-dom": "^18.2.0",
    "autoprefixer": "^10.4.18",
    "postcss": "^8.4.35",
    "tailwindcss": "^3.4.1",
    "typescript": "^5.4.0",
    "eslint": "^8.0.0",
    "eslint-config-next": "14.2.0"
  }
}
</file>

<file path="apps/frontend/postcss.config.js">
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
};
</file>

<file path="apps/frontend/tailwind.config.js">
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    './app/**/*.{js,ts,jsx,tsx,mdx}',
    './components/**/*.{js,ts,jsx,tsx,mdx}',
  ],
  theme: {
    extend: {},
  },
  plugins: [],
};
</file>

<file path="apps/frontend/tsconfig.json">
{
  "extends": "../../tsconfig.base.json",
  "compilerOptions": {
    "lib": [
      "dom",
      "dom.iterable",
      "esnext"
    ],
    "module": "esnext",
    "moduleResolution": "bundler",
    "jsx": "preserve",
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": [
        "./*"
      ]
    },
    "incremental": true,
    "allowJs": true,
    "noEmit": true,
    "resolveJsonModule": true,
    "isolatedModules": true
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts"
  ],
  "exclude": [
    "node_modules"
  ]
}
</file>

<file path="apps/frontend/tsconfig.tsbuildinfo">
{"fileNames":["../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es5.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2015.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2016.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2017.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2018.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2019.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2020.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2021.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2022.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2023.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2024.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.esnext.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.dom.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.dom.iterable.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2015.core.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2015.collection.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2015.generator.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2015.iterable.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2015.promise.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2015.proxy.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2015.reflect.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2015.symbol.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2015.symbol.wellknown.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2016.array.include.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2016.intl.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2017.arraybuffer.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2017.date.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2017.object.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2017.sharedmemory.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2017.string.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2017.intl.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2017.typedarrays.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2018.asyncgenerator.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2018.asynciterable.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2018.intl.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2018.promise.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2018.regexp.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2019.array.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2019.object.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2019.string.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2019.symbol.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2019.intl.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2020.bigint.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2020.date.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2020.promise.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2020.sharedmemory.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2020.string.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2020.symbol.wellknown.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2020.intl.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2020.number.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2021.promise.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2021.string.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2021.weakref.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2021.intl.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2022.array.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2022.error.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2022.intl.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2022.object.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2022.string.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2022.regexp.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2023.array.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2023.collection.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2023.intl.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2024.arraybuffer.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2024.collection.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2024.object.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2024.promise.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2024.regexp.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2024.sharedmemory.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.es2024.string.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.esnext.array.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.esnext.collection.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.esnext.intl.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.esnext.disposable.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.esnext.promise.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.esnext.decorators.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.esnext.iterator.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.esnext.float16.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.esnext.error.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.esnext.sharedmemory.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.decorators.d.ts","../../node_modules/.pnpm/typescript@5.9.3/node_modules/typescript/lib/lib.decorators.legacy.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/styled-jsx/types/css.d.ts","../../node_modules/.pnpm/@types+react@18.3.27/node_modules/@types/react/global.d.ts","../../node_modules/.pnpm/csstype@3.2.3/node_modules/csstype/index.d.ts","../../node_modules/.pnpm/@types+prop-types@15.7.15/node_modules/@types/prop-types/index.d.ts","../../node_modules/.pnpm/@types+react@18.3.27/node_modules/@types/react/index.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/styled-jsx/types/index.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/styled-jsx/types/macro.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/styled-jsx/types/style.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/styled-jsx/types/global.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/amp.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/amp.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/compatibility/disposable.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/compatibility/indexable.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/compatibility/iterators.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/compatibility/index.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/globals.typedarray.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/buffer.buffer.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/globals.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/web-globals/abortcontroller.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/web-globals/domexception.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/web-globals/events.d.ts","../../node_modules/.pnpm/buffer@5.7.1/node_modules/buffer/index.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/header.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/readable.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/file.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/fetch.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/formdata.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/connector.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/client.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/errors.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/dispatcher.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/global-dispatcher.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/global-origin.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/pool-stats.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/pool.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/handlers.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/balanced-pool.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/agent.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/mock-interceptor.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/mock-agent.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/mock-client.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/mock-pool.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/mock-errors.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/proxy-agent.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/env-http-proxy-agent.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/retry-handler.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/retry-agent.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/api.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/interceptors.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/util.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/cookies.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/patch.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/websocket.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/eventsource.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/filereader.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/diagnostics-channel.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/content-type.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/cache.d.ts","../../node_modules/.pnpm/undici-types@6.21.0/node_modules/undici-types/index.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/web-globals/fetch.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/assert.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/assert/strict.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/async_hooks.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/buffer.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/child_process.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/cluster.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/console.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/constants.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/crypto.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/dgram.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/diagnostics_channel.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/dns.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/dns/promises.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/domain.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/events.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/fs.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/fs/promises.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/http.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/http2.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/https.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/inspector.generated.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/module.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/net.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/os.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/path.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/perf_hooks.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/process.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/punycode.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/querystring.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/readline.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/readline/promises.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/repl.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/sea.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/stream.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/stream/promises.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/stream/consumers.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/stream/web.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/string_decoder.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/test.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/timers.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/timers/promises.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/tls.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/trace_events.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/tty.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/url.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/util.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/v8.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/vm.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/wasi.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/worker_threads.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/zlib.d.ts","../../node_modules/.pnpm/@types+node@20.19.27/node_modules/@types/node/index.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/get-page-files.d.ts","../../node_modules/.pnpm/@types+react@18.3.27/node_modules/@types/react/canary.d.ts","../../node_modules/.pnpm/@types+react@18.3.27/node_modules/@types/react/experimental.d.ts","../../node_modules/.pnpm/@types+react-dom@18.3.7_@types+react@18.3.27/node_modules/@types/react-dom/index.d.ts","../../node_modules/.pnpm/@types+react-dom@18.3.7_@types+react@18.3.27/node_modules/@types/react-dom/canary.d.ts","../../node_modules/.pnpm/@types+react-dom@18.3.7_@types+react@18.3.27/node_modules/@types/react-dom/experimental.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/webpack/webpack.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/config.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/lib/load-custom-routes.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/image-config.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/plugins/subresource-integrity-plugin.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/body-streams.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-kind.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-definitions/route-definition.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-matches/route-match.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/components/app-router-headers.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/request-meta.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/lib/revalidate.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/config-shared.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/base-http/index.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/api-utils/index.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/node-environment.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/require-hook.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/node-polyfill-crypto.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/lib/page-types.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/analysis/get-page-static-info.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/get-module-build-info.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/plugins/middleware-plugin.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/render-result.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/helpers/i18n-provider.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/web/next-url.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/@edge-runtime/cookies/index.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/web/spec-extension/cookies.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/web/spec-extension/request.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/web/spec-extension/fetch-event.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/web/spec-extension/response.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/web/types.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/lib/setup-exception-listeners.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/lib/constants.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/index.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/plugins/pages-manifest-plugin.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/router/utils/route-regex.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/router/utils/route-matcher.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/router/utils/parse-url.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/base-http/node.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/font-utils.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/plugins/flight-manifest-plugin.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/route-module.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/load-components.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/router/utils/middleware-route-matcher.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/plugins/next-font-manifest-plugin.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-definitions/locale-route-definition.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-definitions/pages-route-definition.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/mitt.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/with-router.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/router.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/route-loader.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/page-loader.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/bloom-filter.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/router/router.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/router-context.shared-runtime.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/loadable-context.shared-runtime.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/loadable.shared-runtime.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/image-config-context.shared-runtime.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/hooks-client-context.shared-runtime.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/head-manager-context.shared-runtime.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-definitions/app-page-route-definition.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/modern-browserslist-target.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/constants.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/metadata/types.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/page-extensions-type.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/lib/app-dir-module.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/response-cache/types.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/response-cache/index.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/lib/incremental-cache/index.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/components/hooks-server-context.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/app-render/dynamic-rendering.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/components/static-generation-async-storage.external.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/web/spec-extension/adapters/request-cookies.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/async-storage/draft-mode-provider.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/web/spec-extension/adapters/headers.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/components/request-async-storage.external.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/app-render/create-error-handler.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/app-render/app-render.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/server-inserted-html.shared-runtime.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/amp-context.shared-runtime.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/app-page/vendored/contexts/entrypoints.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/app-page/module.compiled.d.ts","../../node_modules/.pnpm/@types+react@18.3.27/node_modules/@types/react/jsx-runtime.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/components/error-boundary.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/components/router-reducer/create-initial-router-state.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/components/app-router.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/components/layout-router.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/components/render-from-template-context.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/components/action-async-storage.external.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/components/client-page.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/components/search-params.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/components/not-found-boundary.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/app-render/rsc/preloads.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/app-render/rsc/postpone.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/app-render/rsc/taint.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/app-render/entry-base.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/templates/app-page.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/app-page/module.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/app-render/types.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/components/router-reducer/fetch-server-response.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/components/router-reducer/router-reducer-types.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/app-router-context.shared-runtime.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/pages/vendored/contexts/entrypoints.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/pages/module.compiled.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/templates/pages.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/pages/module.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/render.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-definitions/pages-api-route-definition.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-matches/pages-api-route-match.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-matchers/route-matcher.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-matcher-providers/route-matcher-provider.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-matcher-managers/route-matcher-manager.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/normalizers/normalizer.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/normalizers/locale-route-normalizer.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/normalizers/request/pathname-normalizer.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/normalizers/request/suffix.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/normalizers/request/rsc.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/normalizers/request/prefix.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/normalizers/request/postponed.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/normalizers/request/prefetch-rsc.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/normalizers/request/next-data.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/base-server.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/image-optimizer.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/next-server.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/lib/coalesced-function.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/lib/router-utils/types.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/trace/types.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/trace/trace.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/trace/shared.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/trace/index.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/load-jsconfig.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack-config.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/plugins/define-env-plugin.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/swc/index.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/dev/parse-version-info.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/dev/hot-reloader-types.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/telemetry/storage.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/lib/types.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/lib/render-server.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/lib/router-server.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/router/utils/path-match.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/lib/router-utils/filesystem.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/lib/router-utils/setup-dev-bundler.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/lib/dev-bundler-service.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/dev/static-paths-worker.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/dev/next-dev-server.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/next.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/lib/metadata/types/alternative-urls-types.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/lib/metadata/types/extra-types.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/lib/metadata/types/metadata-types.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/lib/metadata/types/manifest-types.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/lib/metadata/types/opengraph-types.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/lib/metadata/types/twitter-types.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/lib/metadata/types/metadata-interface.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/types/index.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/html-context.shared-runtime.d.ts","../../node_modules/.pnpm/@next+env@14.2.0/node_modules/@next/env/dist/index.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/utils.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/pages/_app.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/app.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/web/spec-extension/unstable-cache.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/web/spec-extension/revalidate.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/web/spec-extension/unstable-no-store.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/cache.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/runtime-config.external.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/config.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/pages/_document.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/document.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/dynamic.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dynamic.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/pages/_error.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/error.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/head.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/head.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/components/draft-mode.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/components/headers.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/headers.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/get-img-props.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/image-component.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/shared/lib/image-external.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/image.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/link.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/link.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/components/redirect-status-code.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/components/redirect.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/components/not-found.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/components/navigation.react-server.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/components/navigation.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/navigation.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/router.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/script.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/script.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/web/spec-extension/user-agent.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/@edge-runtime/primitives/url.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/web/spec-extension/image-response.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/@vercel/og/satori/index.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/@vercel/og/emoji/index.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/compiled/@vercel/og/types.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/server.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/types/global.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/types/compiled.d.ts","../../node_modules/.pnpm/next@14.2.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/index.d.ts","./app/layout.tsx","./app/page.tsx"],"fileIdsList":[[99,146,403],[99,146],[99,143,146],[99,145,146],[146],[99,146,151,179],[99,146,147,152,157,165,176,187],[99,146,147,148,157,165],[94,95,96,99,146],[99,146,149,188],[99,146,150,151,158,166],[99,146,151,176,184],[99,146,152,154,157,165],[99,145,146,153],[99,146,154,155],[99,146,156,157],[99,145,146,157],[99,146,157,158,159,176,187],[99,146,157,158,159,172,176,179],[99,146,154,157,160,165,176,187],[99,146,157,158,160,161,165,176,184,187],[99,146,160,162,176,184,187],[97,98,99,100,101,102,103,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193],[99,146,157,163],[99,146,164,187,192],[99,146,154,157,165,176],[99,146,166],[99,146,167],[99,145,146,168],[99,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193],[99,146,170],[99,146,171],[99,146,157,172,173],[99,146,172,174,188,190],[99,146,157,176,177,179],[99,146,178,179],[99,146,176,177],[99,146,179],[99,146,180],[99,143,146,176,181],[99,146,157,182,183],[99,146,182,183],[99,146,151,165,176,184],[99,146,185],[99,146,165,186],[99,146,160,171,187],[99,146,151,188],[99,146,176,189],[99,146,164,190],[99,146,191],[99,141,146],[99,141,146,157,159,168,176,179,187,190,192],[99,146,176,193],[87,99,146,198,199,200],[87,99,146,198,199],[87,99,146],[87,91,99,146,197,356,399],[87,91,99,146,196,356,399],[84,85,86,99,146],[92,99,146],[99,146,360],[99,146,362,363,364],[99,146,366],[99,146,203,213,219,221,356],[99,146,203,210,212,215,233],[99,146,213],[99,146,213,334],[99,146,267,283,297,402],[99,146,305],[99,146,203,213,220,253,263,331,332,402],[99,146,220,402],[99,146,213,263,264,265,402],[99,146,213,220,253,402],[99,146,402],[99,146,203,220,221,402],[99,145,146,194],[87,99,146,284,285,286,302,303],[87,99,146,284],[99,146,275],[99,146,274,276,376],[87,99,146,284,285,300],[99,146,280,303,388],[99,146,386,387],[99,146,227,385],[99,145,146,194,227,274,275,276],[87,99,146,300,302,303],[99,146,300,302],[99,146,300,301,303],[99,146,171,194],[99,145,146,194,212,214,270,271,272],[87,99,146,204,379],[87,99,146,187,194],[87,99,146,220,251],[87,99,146,220],[99,146,249,254],[87,99,146,250,359],[87,91,99,146,160,194,196,197,356,397,398],[99,146,356],[99,146,202],[99,146,349,350,351,352,353,354],[99,146,351],[87,99,146,250,284,359],[87,99,146,284,357,359],[87,99,146,284,359],[99,146,160,194,214,359],[99,146,160,194,211,212,223,241,273,277,278,299,300],[99,146,273],[99,146,271,273,277,285,287,288,289,290,291,292,293,294,295,296,402],[99,146,272],[87,99,146,171,194,212,213,241,243,245,270,299,303,356,402],[99,146,160,194,214,215,227,228,274],[99,146,160,194,213,215],[99,146,160,176,194,211,214,215],[99,146,160,171,187,194,211,212,213,214,215,220,223,224,234,235,237,240,241,243,244,245,269,270,300,308,310,313,315,318,320,321,322],[99,146,160,176,194],[99,146,203,204,205,211,212,356,359,402],[99,146,160,176,187,194,208,333,335,336,402],[99,146,171,187,194,208,211,214,231,235,237,238,239,243,270,313,323,325,331,345,346],[99,146,213,217,270],[99,146,211,213],[99,146,224,314],[99,146,316],[99,146,314],[99,146,316,319],[99,146,316,317],[99,146,207,208],[99,146,207,246],[99,146,207],[99,146,209,224,312],[99,146,311],[99,146,208,209],[99,146,209,309],[99,146,208],[99,146,299],[99,146,160,194,211,223,242,261,267,279,282,298,300],[99,146,255,256,257,258,259,260,280,281,303,357],[99,146,307],[99,146,160,194,211,223,242,247,304,306,308,356,359],[99,146,160,187,194,204,211,213,269],[99,146,266],[99,146,160,194,339,344],[99,146,234,269,359],[99,146,327,331,345,348],[99,146,160,217,331,339,340,348],[99,146,203,213,234,244,342],[99,146,160,194,213,220,244,326,327,337,338,341,343],[99,146,195,241,242,356,359],[99,146,160,171,187,194,209,211,212,214,217,222,223,231,234,235,237,238,239,240,243,245,269,270,310,323,324,359],[99,146,160,194,211,213,217,325,347],[99,146,160,194,212,214],[87,99,146,160,171,194,202,204,211,212,215,223,240,241,243,245,307,356,359],[99,146,160,171,187,194,206,209,210,214],[99,146,207,268],[99,146,160,194,207,212,223],[99,146,160,194,213,224],[99,146,160,194],[99,146,227],[99,146,226],[99,146,228],[99,146,213,225,227,231],[99,146,213,225,227],[99,146,160,194,206,213,214,220,228,229,230],[87,99,146,300,301,302],[99,146,262],[87,99,146,204],[87,99,146,237],[87,99,146,195,240,245,356,359],[99,146,204,379,380],[87,99,146,254],[87,99,146,171,187,194,202,248,250,252,253,359],[99,146,214,220,237],[99,146,236],[87,99,146,158,160,171,194,202,254,263,356,357,358],[83,87,88,89,90,99,146,196,197,356,399],[99,146,151],[99,146,328,329,330],[99,146,328],[99,146,368],[99,146,370],[99,146,372],[99,146,374],[99,146,377],[99,146,381],[91,93,99,146,356,361,365,367,369,371,373,375,378,382,384,390,391,393,400,401,402],[99,146,383],[99,146,389],[99,146,250],[99,146,392],[99,145,146,228,229,230,231,394,395,396,399],[99,146,194],[87,91,99,146,160,162,171,194,196,197,198,200,202,215,348,355,359,399],[99,113,117,146,187],[99,113,146,176,187],[99,108,146],[99,110,113,146,184,187],[99,146,165,184],[99,108,146,194],[99,110,113,146,165,187],[99,105,106,109,112,146,157,176,187],[99,113,120,146],[99,105,111,146],[99,113,134,135,146],[99,109,113,146,179,187,194],[99,134,146,194],[99,107,108,146,194],[99,113,146],[99,107,108,109,110,111,112,113,114,115,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,135,136,137,138,139,140,146],[99,113,128,146],[99,113,120,121,146],[99,111,113,121,122,146],[99,112,146],[99,105,108,113,146],[99,113,117,121,122,146],[99,117,146],[99,111,113,116,146,187],[99,105,110,113,120,146],[99,146,176],[99,108,113,134,146,192,194]],"fileInfos":[{"version":"c430d44666289dae81f30fa7b2edebf186ecc91a2d4c71266ea6ae76388792e1","affectsGlobalScope":true,"impliedFormat":1},{"version":"45b7ab580deca34ae9729e97c13cfd999df04416a79116c3bfb483804f85ded4","impliedFormat":1},{"version":"3facaf05f0c5fc569c5649dd359892c98a85557e3e0c847964caeb67076f4d75","impliedFormat":1},{"version":"e44bb8bbac7f10ecc786703fe0a6a4b952189f908707980ba8f3c8975a760962","impliedFormat":1},{"version":"5e1c4c362065a6b95ff952c0eab010f04dcd2c3494e813b493ecfd4fcb9fc0d8","impliedFormat":1},{"version":"68d73b4a11549f9c0b7d352d10e91e5dca8faa3322bfb77b661839c42b1ddec7","impliedFormat":1},{"version":"5efce4fc3c29ea84e8928f97adec086e3dc876365e0982cc8479a07954a3efd4","impliedFormat":1},{"version":"feecb1be483ed332fad555aff858affd90a48ab19ba7272ee084704eb7167569","impliedFormat":1},{"version":"ee7bad0c15b58988daa84371e0b89d313b762ab83cb5b31b8a2d1162e8eb41c2","impliedFormat":1},{"version":"27bdc30a0e32783366a5abeda841bc22757c1797de8681bbe81fbc735eeb1c10","impliedFormat":1},{"version":"8fd575e12870e9944c7e1d62e1f5a73fcf23dd8d3a321f2a2c74c20d022283fe","impliedFormat":1},{"version":"2ab096661c711e4a81cc464fa1e6feb929a54f5340b46b0a07ac6bbf857471f0","impliedFormat":1},{"version":"080941d9f9ff9307f7e27a83bcd888b7c8270716c39af943532438932ec1d0b9","affectsGlobalScope":true,"impliedFormat":1},{"version":"2e80ee7a49e8ac312cc11b77f1475804bee36b3b2bc896bead8b6e1266befb43","affectsGlobalScope":true,"impliedFormat":1},{"version":"c57796738e7f83dbc4b8e65132f11a377649c00dd3eee333f672b8f0a6bea671","affectsGlobalScope":true,"impliedFormat":1},{"version":"dc2df20b1bcdc8c2d34af4926e2c3ab15ffe1160a63e58b7e09833f616efff44","affectsGlobalScope":true,"impliedFormat":1},{"version":"515d0b7b9bea2e31ea4ec968e9edd2c39d3eebf4a2d5cbd04e88639819ae3b71","affectsGlobalScope":true,"impliedFormat":1},{"version":"0559b1f683ac7505ae451f9a96ce4c3c92bdc71411651ca6ddb0e88baaaad6a3","affectsGlobalScope":true,"impliedFormat":1},{"version":"0dc1e7ceda9b8b9b455c3a2d67b0412feab00bd2f66656cd8850e8831b08b537","affectsGlobalScope":true,"impliedFormat":1},{"version":"ce691fb9e5c64efb9547083e4a34091bcbe5bdb41027e310ebba8f7d96a98671","affectsGlobalScope":true,"impliedFormat":1},{"version":"8d697a2a929a5fcb38b7a65594020fcef05ec1630804a33748829c5ff53640d0","affectsGlobalScope":true,"impliedFormat":1},{"version":"4ff2a353abf8a80ee399af572debb8faab2d33ad38c4b4474cff7f26e7653b8d","affectsGlobalScope":true,"impliedFormat":1},{"version":"fb0f136d372979348d59b3f5020b4cdb81b5504192b1cacff5d1fbba29378aa1","affectsGlobalScope":true,"impliedFormat":1},{"version":"d15bea3d62cbbdb9797079416b8ac375ae99162a7fba5de2c6c505446486ac0a","affectsGlobalScope":true,"impliedFormat":1},{"version":"68d18b664c9d32a7336a70235958b8997ebc1c3b8505f4f1ae2b7e7753b87618","affectsGlobalScope":true,"impliedFormat":1},{"version":"eb3d66c8327153d8fa7dd03f9c58d351107fe824c79e9b56b462935176cdf12a","affectsGlobalScope":true,"impliedFormat":1},{"version":"38f0219c9e23c915ef9790ab1d680440d95419ad264816fa15009a8851e79119","affectsGlobalScope":true,"impliedFormat":1},{"version":"69ab18c3b76cd9b1be3d188eaf8bba06112ebbe2f47f6c322b5105a6fbc45a2e","affectsGlobalScope":true,"impliedFormat":1},{"version":"a680117f487a4d2f30ea46f1b4b7f58bef1480456e18ba53ee85c2746eeca012","affectsGlobalScope":true,"impliedFormat":1},{"version":"2f11ff796926e0832f9ae148008138ad583bd181899ab7dd768a2666700b1893","affectsGlobalScope":true,"impliedFormat":1},{"version":"4de680d5bb41c17f7f68e0419412ca23c98d5749dcaaea1896172f06435891fc","affectsGlobalScope":true,"impliedFormat":1},{"version":"954296b30da6d508a104a3a0b5d96b76495c709785c1d11610908e63481ee667","affectsGlobalScope":true,"impliedFormat":1},{"version":"ac9538681b19688c8eae65811b329d3744af679e0bdfa5d842d0e32524c73e1c","affectsGlobalScope":true,"impliedFormat":1},{"version":"0a969edff4bd52585473d24995c5ef223f6652d6ef46193309b3921d65dd4376","affectsGlobalScope":true,"impliedFormat":1},{"version":"9e9fbd7030c440b33d021da145d3232984c8bb7916f277e8ffd3dc2e3eae2bdb","affectsGlobalScope":true,"impliedFormat":1},{"version":"811ec78f7fefcabbda4bfa93b3eb67d9ae166ef95f9bff989d964061cbf81a0c","affectsGlobalScope":true,"impliedFormat":1},{"version":"717937616a17072082152a2ef351cb51f98802fb4b2fdabd32399843875974ca","affectsGlobalScope":true,"impliedFormat":1},{"version":"d7e7d9b7b50e5f22c915b525acc5a49a7a6584cf8f62d0569e557c5cfc4b2ac2","affectsGlobalScope":true,"impliedFormat":1},{"version":"71c37f4c9543f31dfced6c7840e068c5a5aacb7b89111a4364b1d5276b852557","affectsGlobalScope":true,"impliedFormat":1},{"version":"576711e016cf4f1804676043e6a0a5414252560eb57de9faceee34d79798c850","affectsGlobalScope":true,"impliedFormat":1},{"version":"89c1b1281ba7b8a96efc676b11b264de7a8374c5ea1e6617f11880a13fc56dc6","affectsGlobalScope":true,"impliedFormat":1},{"version":"74f7fa2d027d5b33eb0471c8e82a6c87216223181ec31247c357a3e8e2fddc5b","affectsGlobalScope":true,"impliedFormat":1},{"version":"d6d7ae4d1f1f3772e2a3cde568ed08991a8ae34a080ff1151af28b7f798e22ca","affectsGlobalScope":true,"impliedFormat":1},{"version":"063600664504610fe3e99b717a1223f8b1900087fab0b4cad1496a114744f8df","affectsGlobalScope":true,"impliedFormat":1},{"version":"934019d7e3c81950f9a8426d093458b65d5aff2c7c1511233c0fd5b941e608ab","affectsGlobalScope":true,"impliedFormat":1},{"version":"52ada8e0b6e0482b728070b7639ee42e83a9b1c22d205992756fe020fd9f4a47","affectsGlobalScope":true,"impliedFormat":1},{"version":"3bdefe1bfd4d6dee0e26f928f93ccc128f1b64d5d501ff4a8cf3c6371200e5e6","affectsGlobalScope":true,"impliedFormat":1},{"version":"59fb2c069260b4ba00b5643b907ef5d5341b167e7d1dbf58dfd895658bda2867","affectsGlobalScope":true,"impliedFormat":1},{"version":"639e512c0dfc3fad96a84caad71b8834d66329a1f28dc95e3946c9b58176c73a","affectsGlobalScope":true,"impliedFormat":1},{"version":"368af93f74c9c932edd84c58883e736c9e3d53cec1fe24c0b0ff451f529ceab1","affectsGlobalScope":true,"impliedFormat":1},{"version":"af3dd424cf267428f30ccfc376f47a2c0114546b55c44d8c0f1d57d841e28d74","affectsGlobalScope":true,"impliedFormat":1},{"version":"995c005ab91a498455ea8dfb63aa9f83fa2ea793c3d8aa344be4a1678d06d399","affectsGlobalScope":true,"impliedFormat":1},{"version":"959d36cddf5e7d572a65045b876f2956c973a586da58e5d26cde519184fd9b8a","affectsGlobalScope":true,"impliedFormat":1},{"version":"965f36eae237dd74e6cca203a43e9ca801ce38824ead814728a2807b1910117d","affectsGlobalScope":true,"impliedFormat":1},{"version":"3925a6c820dcb1a06506c90b1577db1fdbf7705d65b62b99dce4be75c637e26b","affectsGlobalScope":true,"impliedFormat":1},{"version":"0a3d63ef2b853447ec4f749d3f368ce642264246e02911fcb1590d8c161b8005","affectsGlobalScope":true,"impliedFormat":1},{"version":"8cdf8847677ac7d20486e54dd3fcf09eda95812ac8ace44b4418da1bbbab6eb8","affectsGlobalScope":true,"impliedFormat":1},{"version":"8444af78980e3b20b49324f4a16ba35024fef3ee069a0eb67616ea6ca821c47a","affectsGlobalScope":true,"impliedFormat":1},{"version":"3287d9d085fbd618c3971944b65b4be57859f5415f495b33a6adc994edd2f004","affectsGlobalScope":true,"impliedFormat":1},{"version":"b4b67b1a91182421f5df999988c690f14d813b9850b40acd06ed44691f6727ad","affectsGlobalScope":true,"impliedFormat":1},{"version":"df83c2a6c73228b625b0beb6669c7ee2a09c914637e2d35170723ad49c0f5cd4","affectsGlobalScope":true,"impliedFormat":1},{"version":"436aaf437562f276ec2ddbee2f2cdedac7664c1e4c1d2c36839ddd582eeb3d0a","affectsGlobalScope":true,"impliedFormat":1},{"version":"8e3c06ea092138bf9fa5e874a1fdbc9d54805d074bee1de31b99a11e2fec239d","affectsGlobalScope":true,"impliedFormat":1},{"version":"87dc0f382502f5bbce5129bdc0aea21e19a3abbc19259e0b43ae038a9fc4e326","affectsGlobalScope":true,"impliedFormat":1},{"version":"b1cb28af0c891c8c96b2d6b7be76bd394fddcfdb4709a20ba05a7c1605eea0f9","affectsGlobalScope":true,"impliedFormat":1},{"version":"2fef54945a13095fdb9b84f705f2b5994597640c46afeb2ce78352fab4cb3279","affectsGlobalScope":true,"impliedFormat":1},{"version":"ac77cb3e8c6d3565793eb90a8373ee8033146315a3dbead3bde8db5eaf5e5ec6","affectsGlobalScope":true,"impliedFormat":1},{"version":"56e4ed5aab5f5920980066a9409bfaf53e6d21d3f8d020c17e4de584d29600ad","affectsGlobalScope":true,"impliedFormat":1},{"version":"4ece9f17b3866cc077099c73f4983bddbcb1dc7ddb943227f1ec070f529dedd1","affectsGlobalScope":true,"impliedFormat":1},{"version":"0a6282c8827e4b9a95f4bf4f5c205673ada31b982f50572d27103df8ceb8013c","affectsGlobalScope":true,"impliedFormat":1},{"version":"1c9319a09485199c1f7b0498f2988d6d2249793ef67edda49d1e584746be9032","affectsGlobalScope":true,"impliedFormat":1},{"version":"e3a2a0cee0f03ffdde24d89660eba2685bfbdeae955a6c67e8c4c9fd28928eeb","affectsGlobalScope":true,"impliedFormat":1},{"version":"811c71eee4aa0ac5f7adf713323a5c41b0cf6c4e17367a34fbce379e12bbf0a4","affectsGlobalScope":true,"impliedFormat":1},{"version":"51ad4c928303041605b4d7ae32e0c1ee387d43a24cd6f1ebf4a2699e1076d4fa","affectsGlobalScope":true,"impliedFormat":1},{"version":"60037901da1a425516449b9a20073aa03386cce92f7a1fd902d7602be3a7c2e9","affectsGlobalScope":true,"impliedFormat":1},{"version":"d4b1d2c51d058fc21ec2629fff7a76249dec2e36e12960ea056e3ef89174080f","affectsGlobalScope":true,"impliedFormat":1},{"version":"22adec94ef7047a6c9d1af3cb96be87a335908bf9ef386ae9fd50eeb37f44c47","affectsGlobalScope":true,"impliedFormat":1},{"version":"196cb558a13d4533a5163286f30b0509ce0210e4b316c56c38d4c0fd2fb38405","affectsGlobalScope":true,"impliedFormat":1},{"version":"73f78680d4c08509933daf80947902f6ff41b6230f94dd002ae372620adb0f60","affectsGlobalScope":true,"impliedFormat":1},{"version":"c5239f5c01bcfa9cd32f37c496cf19c61d69d37e48be9de612b541aac915805b","affectsGlobalScope":true,"impliedFormat":1},{"version":"8e7f8264d0fb4c5339605a15daadb037bf238c10b654bb3eee14208f860a32ea","affectsGlobalScope":true,"impliedFormat":1},{"version":"782dec38049b92d4e85c1585fbea5474a219c6984a35b004963b00beb1aab538","affectsGlobalScope":true,"impliedFormat":1},{"version":"0990a7576222f248f0a3b888adcb7389f957928ce2afb1cd5128169086ff4d29","impliedFormat":1},{"version":"eb5b19b86227ace1d29ea4cf81387279d04bb34051e944bc53df69f58914b788","affectsGlobalScope":true,"impliedFormat":1},{"version":"ac51dd7d31333793807a6abaa5ae168512b6131bd41d9c5b98477fc3b7800f9f","impliedFormat":1},{"version":"87d9d29dbc745f182683f63187bf3d53fd8673e5fca38ad5eaab69798ed29fbc","impliedFormat":1},{"version":"7a3aa194cfd5919c4da251ef04ea051077e22702638d4edcb9579e9101653519","affectsGlobalScope":true,"impliedFormat":1},{"version":"cc69795d9954ee4ad57545b10c7bf1a7260d990231b1685c147ea71a6faa265c","impliedFormat":1},{"version":"8bc6c94ff4f2af1f4023b7bb2379b08d3d7dd80c698c9f0b07431ea16101f05f","impliedFormat":1},{"version":"1b61d259de5350f8b1e5db06290d31eaebebc6baafd5f79d314b5af9256d7153","impliedFormat":1},{"version":"57194e1f007f3f2cbef26fa299d4c6b21f4623a2eddc63dfeef79e38e187a36e","impliedFormat":1},{"version":"0f6666b58e9276ac3a38fdc80993d19208442d6027ab885580d93aec76b4ef00","impliedFormat":1},{"version":"05fd364b8ef02fb1e174fbac8b825bdb1e5a36a016997c8e421f5fab0a6da0a0","impliedFormat":1},{"version":"70521b6ab0dcba37539e5303104f29b721bfb2940b2776da4cc818c07e1fefc1","affectsGlobalScope":true,"impliedFormat":1},{"version":"ab41ef1f2cdafb8df48be20cd969d875602483859dc194e9c97c8a576892c052","affectsGlobalScope":true,"impliedFormat":1},{"version":"d153a11543fd884b596587ccd97aebbeed950b26933ee000f94009f1ab142848","affectsGlobalScope":true,"impliedFormat":1},{"version":"21d819c173c0cf7cc3ce57c3276e77fd9a8a01d35a06ad87158781515c9a438a","impliedFormat":1},{"version":"98cffbf06d6bab333473c70a893770dbe990783904002c4f1a960447b4b53dca","affectsGlobalScope":true,"impliedFormat":1},{"version":"ba481bca06f37d3f2c137ce343c7d5937029b2468f8e26111f3c9d9963d6568d","affectsGlobalScope":true,"impliedFormat":1},{"version":"6d9ef24f9a22a88e3e9b3b3d8c40ab1ddb0853f1bfbd5c843c37800138437b61","affectsGlobalScope":true,"impliedFormat":1},{"version":"1db0b7dca579049ca4193d034d835f6bfe73096c73663e5ef9a0b5779939f3d0","affectsGlobalScope":true,"impliedFormat":1},{"version":"9798340ffb0d067d69b1ae5b32faa17ab31b82466a3fc00d8f2f2df0c8554aaa","affectsGlobalScope":true,"impliedFormat":1},{"version":"f26b11d8d8e4b8028f1c7d618b22274c892e4b0ef5b3678a8ccbad85419aef43","affectsGlobalScope":true,"impliedFormat":1},{"version":"8e9c23ba78aabc2e0a27033f18737a6df754067731e69dc5f52823957d60a4b6","impliedFormat":1},{"version":"5929864ce17fba74232584d90cb721a89b7ad277220627cc97054ba15a98ea8f","impliedFormat":1},{"version":"763fe0f42b3d79b440a9b6e51e9ba3f3f91352469c1e4b3b67bfa4ff6352f3f4","impliedFormat":1},{"version":"25c8056edf4314820382a5fdb4bb7816999acdcb929c8f75e3f39473b87e85bc","impliedFormat":1},{"version":"c464d66b20788266e5353b48dc4aa6bc0dc4a707276df1e7152ab0c9ae21fad8","impliedFormat":1},{"version":"78d0d27c130d35c60b5e5566c9f1e5be77caf39804636bc1a40133919a949f21","impliedFormat":1},{"version":"c6fd2c5a395f2432786c9cb8deb870b9b0e8ff7e22c029954fabdd692bff6195","impliedFormat":1},{"version":"1d6e127068ea8e104a912e42fc0a110e2aa5a66a356a917a163e8cf9a65e4a75","impliedFormat":1},{"version":"5ded6427296cdf3b9542de4471d2aa8d3983671d4cac0f4bf9c637208d1ced43","impliedFormat":1},{"version":"7f182617db458e98fc18dfb272d40aa2fff3a353c44a89b2c0ccb3937709bfb5","impliedFormat":1},{"version":"cadc8aced301244057c4e7e73fbcae534b0f5b12a37b150d80e5a45aa4bebcbd","impliedFormat":1},{"version":"385aab901643aa54e1c36f5ef3107913b10d1b5bb8cbcd933d4263b80a0d7f20","impliedFormat":1},{"version":"9670d44354bab9d9982eca21945686b5c24a3f893db73c0dae0fd74217a4c219","impliedFormat":1},{"version":"0b8a9268adaf4da35e7fa830c8981cfa22adbbe5b3f6f5ab91f6658899e657a7","impliedFormat":1},{"version":"11396ed8a44c02ab9798b7dca436009f866e8dae3c9c25e8c1fbc396880bf1bb","impliedFormat":1},{"version":"ba7bc87d01492633cb5a0e5da8a4a42a1c86270e7b3d2dea5d156828a84e4882","impliedFormat":1},{"version":"4893a895ea92c85345017a04ed427cbd6a1710453338df26881a6019432febdd","impliedFormat":1},{"version":"c21dc52e277bcfc75fac0436ccb75c204f9e1b3fa5e12729670910639f27343e","impliedFormat":1},{"version":"13f6f39e12b1518c6650bbb220c8985999020fe0f21d818e28f512b7771d00f9","impliedFormat":1},{"version":"9b5369969f6e7175740bf51223112ff209f94ba43ecd3bb09eefff9fd675624a","impliedFormat":1},{"version":"4fe9e626e7164748e8769bbf74b538e09607f07ed17c2f20af8d680ee49fc1da","impliedFormat":1},{"version":"24515859bc0b836719105bb6cc3d68255042a9f02a6022b3187948b204946bd2","impliedFormat":1},{"version":"ea0148f897b45a76544ae179784c95af1bd6721b8610af9ffa467a518a086a43","impliedFormat":1},{"version":"24c6a117721e606c9984335f71711877293a9651e44f59f3d21c1ea0856f9cc9","impliedFormat":1},{"version":"dd3273ead9fbde62a72949c97dbec2247ea08e0c6952e701a483d74ef92d6a17","impliedFormat":1},{"version":"405822be75ad3e4d162e07439bac80c6bcc6dbae1929e179cf467ec0b9ee4e2e","impliedFormat":1},{"version":"0db18c6e78ea846316c012478888f33c11ffadab9efd1cc8bcc12daded7a60b6","impliedFormat":1},{"version":"e61be3f894b41b7baa1fbd6a66893f2579bfad01d208b4ff61daef21493ef0a8","impliedFormat":1},{"version":"bd0532fd6556073727d28da0edfd1736417a3f9f394877b6d5ef6ad88fba1d1a","impliedFormat":1},{"version":"89167d696a849fce5ca508032aabfe901c0868f833a8625d5a9c6e861ef935d2","impliedFormat":1},{"version":"615ba88d0128ed16bf83ef8ccbb6aff05c3ee2db1cc0f89ab50a4939bfc1943f","impliedFormat":1},{"version":"a4d551dbf8746780194d550c88f26cf937caf8d56f102969a110cfaed4b06656","impliedFormat":1},{"version":"8bd86b8e8f6a6aa6c49b71e14c4ffe1211a0e97c80f08d2c8cc98838006e4b88","impliedFormat":1},{"version":"317e63deeb21ac07f3992f5b50cdca8338f10acd4fbb7257ebf56735bf52ab00","impliedFormat":1},{"version":"4732aec92b20fb28c5fe9ad99521fb59974289ed1e45aecb282616202184064f","impliedFormat":1},{"version":"2e85db9e6fd73cfa3d7f28e0ab6b55417ea18931423bd47b409a96e4a169e8e6","impliedFormat":1},{"version":"c46e079fe54c76f95c67fb89081b3e399da2c7d109e7dca8e4b58d83e332e605","impliedFormat":1},{"version":"bf67d53d168abc1298888693338cb82854bdb2e69ef83f8a0092093c2d562107","impliedFormat":1},{"version":"2cbe0621042e2a68c7cbce5dfed3906a1862a16a7d496010636cdbdb91341c0f","affectsGlobalScope":true,"impliedFormat":1},{"version":"e2677634fe27e87348825bb041651e22d50a613e2fdf6a4a3ade971d71bac37e","impliedFormat":1},{"version":"7394959e5a741b185456e1ef5d64599c36c60a323207450991e7a42e08911419","impliedFormat":1},{"version":"8c0bcd6c6b67b4b503c11e91a1fb91522ed585900eab2ab1f61bba7d7caa9d6f","impliedFormat":1},{"version":"8cd19276b6590b3ebbeeb030ac271871b9ed0afc3074ac88a94ed2449174b776","affectsGlobalScope":true,"impliedFormat":1},{"version":"696eb8d28f5949b87d894b26dc97318ef944c794a9a4e4f62360cd1d1958014b","impliedFormat":1},{"version":"3f8fa3061bd7402970b399300880d55257953ee6d3cd408722cb9ac20126460c","impliedFormat":1},{"version":"35ec8b6760fd7138bbf5809b84551e31028fb2ba7b6dc91d95d098bf212ca8b4","affectsGlobalScope":true,"impliedFormat":1},{"version":"5524481e56c48ff486f42926778c0a3cce1cc85dc46683b92b1271865bcf015a","impliedFormat":1},{"version":"68bd56c92c2bd7d2339457eb84d63e7de3bd56a69b25f3576e1568d21a162398","affectsGlobalScope":true,"impliedFormat":1},{"version":"3e93b123f7c2944969d291b35fed2af79a6e9e27fdd5faa99748a51c07c02d28","impliedFormat":1},{"version":"9d19808c8c291a9010a6c788e8532a2da70f811adb431c97520803e0ec649991","impliedFormat":1},{"version":"87aad3dd9752067dc875cfaa466fc44246451c0c560b820796bdd528e29bef40","impliedFormat":1},{"version":"4aacb0dd020eeaef65426153686cc639a78ec2885dc72ad220be1d25f1a439df","impliedFormat":1},{"version":"f0bd7e6d931657b59605c44112eaf8b980ba7f957a5051ed21cb93d978cf2f45","impliedFormat":1},{"version":"8db0ae9cb14d9955b14c214f34dae1b9ef2baee2fe4ce794a4cd3ac2531e3255","affectsGlobalScope":true,"impliedFormat":1},{"version":"15fc6f7512c86810273af28f224251a5a879e4261b4d4c7e532abfbfc3983134","impliedFormat":1},{"version":"58adba1a8ab2d10b54dc1dced4e41f4e7c9772cbbac40939c0dc8ce2cdb1d442","impliedFormat":1},{"version":"2fd4c143eff88dabb57701e6a40e02a4dbc36d5eb1362e7964d32028056a782b","impliedFormat":1},{"version":"714435130b9015fae551788df2a88038471a5a11eb471f27c4ede86552842bc9","impliedFormat":1},{"version":"855cd5f7eb396f5f1ab1bc0f8580339bff77b68a770f84c6b254e319bbfd1ac7","impliedFormat":1},{"version":"5650cf3dace09e7c25d384e3e6b818b938f68f4e8de96f52d9c5a1b3db068e86","impliedFormat":1},{"version":"1354ca5c38bd3fd3836a68e0f7c9f91f172582ba30ab15bb8c075891b91502b7","affectsGlobalScope":true,"impliedFormat":1},{"version":"27fdb0da0daf3b337c5530c5f266efe046a6ceb606e395b346974e4360c36419","impliedFormat":1},{"version":"2d2fcaab481b31a5882065c7951255703ddbe1c0e507af56ea42d79ac3911201","impliedFormat":1},{"version":"a192fe8ec33f75edbc8d8f3ed79f768dfae11ff5735e7fe52bfa69956e46d78d","impliedFormat":1},{"version":"ca867399f7db82df981d6915bcbb2d81131d7d1ef683bc782b59f71dda59bc85","affectsGlobalScope":true,"impliedFormat":1},{"version":"d9e971bba9cf977c7774abbd4d2e3413a231af8a06a2e8b16af2a606bc91ddd0","affectsGlobalScope":true,"impliedFormat":1},{"version":"9e043a1bc8fbf2a255bccf9bf27e0f1caf916c3b0518ea34aa72357c0afd42ec","impliedFormat":1},{"version":"b4f70ec656a11d570e1a9edce07d118cd58d9760239e2ece99306ee9dfe61d02","impliedFormat":1},{"version":"3bc2f1e2c95c04048212c569ed38e338873f6a8593930cf5a7ef24ffb38fc3b6","impliedFormat":1},{"version":"6e70e9570e98aae2b825b533aa6292b6abd542e8d9f6e9475e88e1d7ba17c866","impliedFormat":1},{"version":"f9d9d753d430ed050dc1bf2667a1bab711ccbb1c1507183d794cc195a5b085cc","impliedFormat":1},{"version":"9eece5e586312581ccd106d4853e861aaaa1a39f8e3ea672b8c3847eedd12f6e","impliedFormat":1},{"version":"47ab634529c5955b6ad793474ae188fce3e6163e3a3fb5edd7e0e48f14435333","impliedFormat":1},{"version":"37ba7b45141a45ce6e80e66f2a96c8a5ab1bcef0fc2d0f56bb58df96ec67e972","impliedFormat":1},{"version":"45650f47bfb376c8a8ed39d4bcda5902ab899a3150029684ee4c10676d9fbaee","impliedFormat":1},{"version":"0225ecb9ed86bdb7a2c7fd01f1556906902929377b44483dc4b83e03b3ef227d","affectsGlobalScope":true,"impliedFormat":1},{"version":"74cf591a0f63db318651e0e04cb55f8791385f86e987a67fd4d2eaab8191f730","impliedFormat":1},{"version":"5eab9b3dc9b34f185417342436ec3f106898da5f4801992d8ff38ab3aff346b5","impliedFormat":1},{"version":"12ed4559eba17cd977aa0db658d25c4047067444b51acfdcbf38470630642b23","affectsGlobalScope":true,"impliedFormat":1},{"version":"f3ffabc95802521e1e4bcba4c88d8615176dc6e09111d920c7a213bdda6e1d65","impliedFormat":1},{"version":"f9ab232778f2842ffd6955f88b1049982fa2ecb764d129ee4893cbc290f41977","impliedFormat":1},{"version":"ae56f65caf3be91108707bd8dfbccc2a57a91feb5daabf7165a06a945545ed26","impliedFormat":1},{"version":"a136d5de521da20f31631a0a96bf712370779d1c05b7015d7019a9b2a0446ca9","impliedFormat":1},{"version":"c3b41e74b9a84b88b1dca61ec39eee25c0dbc8e7d519ba11bb070918cfacf656","affectsGlobalScope":true,"impliedFormat":1},{"version":"4737a9dc24d0e68b734e6cfbcea0c15a2cfafeb493485e27905f7856988c6b29","affectsGlobalScope":true,"impliedFormat":1},{"version":"36d8d3e7506b631c9582c251a2c0b8a28855af3f76719b12b534c6edf952748d","impliedFormat":1},{"version":"1ca69210cc42729e7ca97d3a9ad48f2e9cb0042bada4075b588ae5387debd318","impliedFormat":1},{"version":"f5ebe66baaf7c552cfa59d75f2bfba679f329204847db3cec385acda245e574e","impliedFormat":1},{"version":"ed59add13139f84da271cafd32e2171876b0a0af2f798d0c663e8eeb867732cf","affectsGlobalScope":true,"impliedFormat":1},{"version":"05db535df8bdc30d9116fe754a3473d1b6479afbc14ae8eb18b605c62677d518","impliedFormat":1},{"version":"b1810689b76fd473bd12cc9ee219f8e62f54a7d08019a235d07424afbf074d25","impliedFormat":1},{"version":"8caa5c86be1b793cd5f599e27ecb34252c41e011980f7d61ae4989a149ff6ccc","impliedFormat":1},{"version":"91b0f6d01993021ecbe01eb076db6a3cf1b66359c1d99104f43436010e81afb5","impliedFormat":1},{"version":"d1bd4e51810d159899aad1660ccb859da54e27e08b8c9862b40cd36c1d9ff00f","impliedFormat":1},{"version":"17ed71200119e86ccef2d96b73b02ce8854b76ad6bd21b5021d4269bec527b5f","impliedFormat":1},{"version":"1cfa8647d7d71cb03847d616bd79320abfc01ddea082a49569fda71ac5ece66b","impliedFormat":1},{"version":"bb7a61dd55dc4b9422d13da3a6bb9cc5e89be888ef23bbcf6558aa9726b89a1c","impliedFormat":1},{"version":"db6d2d9daad8a6d83f281af12ce4355a20b9a3e71b82b9f57cddcca0a8964a96","impliedFormat":1},{"version":"cfe4ef4710c3786b6e23dae7c086c70b4f4835a2e4d77b75d39f9046106e83d3","impliedFormat":1},{"version":"cbea99888785d49bb630dcbb1613c73727f2b5a2cf02e1abcaab7bcf8d6bf3c5","impliedFormat":1},{"version":"98817124fd6c4f60e0b935978c207309459fb71ab112cf514f26f333bf30830e","impliedFormat":1},{"version":"a86f82d646a739041d6702101afa82dcb935c416dd93cbca7fd754fd0282ce1f","impliedFormat":1},{"version":"2dad084c67e649f0f354739ec7df7c7df0779a28a4f55c97c6b6883ae850d1ce","impliedFormat":1},{"version":"fa5bbc7ab4130dd8cdc55ea294ec39f76f2bc507a0f75f4f873e38631a836ca7","impliedFormat":1},{"version":"df45ca1176e6ac211eae7ddf51336dc075c5314bc5c253651bae639defd5eec5","impliedFormat":1},{"version":"cf86de1054b843e484a3c9300d62fbc8c97e77f168bbffb131d560ca0474d4a8","impliedFormat":1},{"version":"196c960b12253fde69b204aa4fbf69470b26daf7a430855d7f94107a16495ab0","impliedFormat":1},{"version":"528637e771ee2e808390d46a591eaef375fa4b9c99b03749e22b1d2e868b1b7c","impliedFormat":1},{"version":"bf24f6d35f7318e246010ffe9924395893c4e96d34324cde77151a73f078b9ad","impliedFormat":1},{"version":"596ccf4070268c4f5a8c459d762d8a934fa9b9317c7bf7a953e921bc9d78ce3c","impliedFormat":1},{"version":"10595c7ff5094dd5b6a959ccb1c00e6a06441b4e10a87bc09c15f23755d34439","impliedFormat":1},{"version":"9620c1ff645afb4a9ab4044c85c26676f0a93e8c0e4b593aea03a89ccb47b6d0","impliedFormat":1},{"version":"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855","impliedFormat":1},{"version":"a9af0e608929aaf9ce96bd7a7b99c9360636c31d73670e4af09a09950df97841","impliedFormat":1},{"version":"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855","impliedFormat":1},{"version":"c86fe861cf1b4c46a0fb7d74dffe596cf679a2e5e8b1456881313170f092e3fa","impliedFormat":1},{"version":"08ed0b3f0166787f84a6606f80aa3b1388c7518d78912571b203817406e471da","impliedFormat":1},{"version":"47e5af2a841356a961f815e7c55d72554db0c11b4cba4d0caab91f8717846a94","impliedFormat":1},{"version":"9a1a0dc84fecc111e83281743f003e1ae9048e0f83c2ae2028d17bc58fd93cc7","impliedFormat":1},{"version":"f5f541902bf7ae0512a177295de9b6bcd6809ea38307a2c0a18bfca72212f368","impliedFormat":1},{"version":"e8da637cbd6ed1cf6c36e9424f6bcee4515ca2c677534d4006cbd9a05f930f0c","impliedFormat":1},{"version":"ca1b882a105a1972f82cc58e3be491e7d750a1eb074ffd13b198269f57ed9e1b","impliedFormat":1},{"version":"fc3e1c87b39e5ba1142f27ec089d1966da168c04a859a4f6aab64dceae162c2b","impliedFormat":1},{"version":"3867ca0e9757cc41e04248574f4f07b8f9e3c0c2a796a5eb091c65bfd2fc8bdb","impliedFormat":1},{"version":"61888522cec948102eba94d831c873200aa97d00d8989fdfd2a3e0ee75ec65a2","impliedFormat":1},{"version":"4e10622f89fea7b05dd9b52fb65e1e2b5cbd96d4cca3d9e1a60bb7f8a9cb86a1","impliedFormat":1},{"version":"74b2a5e5197bd0f2e0077a1ea7c07455bbea67b87b0869d9786d55104006784f","impliedFormat":1},{"version":"59bf32919de37809e101acffc120596a9e45fdbab1a99de5087f31fdc36e2f11","impliedFormat":1},{"version":"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855","impliedFormat":1},{"version":"5322a4f762d356093e8c2903a190ddbaa548420c891affa71093b85c5c2fbe94","impliedFormat":1},{"version":"c40c848daad198266370c1c72a7a8c3d18d2f50727c7859fcfefd3ff69a7f288","impliedFormat":1},{"version":"ac60bbee0d4235643cc52b57768b22de8c257c12bd8c2039860540cab1fa1d82","impliedFormat":1},{"version":"973b59a17aaa817eb205baf6c132b83475a5c0a44e8294a472af7793b1817e89","impliedFormat":1},{"version":"ada39cbb2748ab2873b7835c90c8d4620723aedf323550e8489f08220e477c7f","impliedFormat":1},{"version":"6e5f5cee603d67ee1ba6120815497909b73399842254fc1e77a0d5cdc51d8c9c","impliedFormat":1},{"version":"8dba67056cbb27628e9b9a1cba8e57036d359dceded0725c72a3abe4b6c79cd4","impliedFormat":1},{"version":"70f3814c457f54a7efe2d9ce9d2686de9250bb42eb7f4c539bd2280a42e52d33","impliedFormat":1},{"version":"5cbd32af037805215112472e35773bad9d4e03f0e72b1129a0d0c12d9cd63cc7","impliedFormat":1},{"version":"ef61792acbfa8c27c9bd113f02731e66229f7d3a169e3c1993b508134f1a58e0","impliedFormat":1},{"version":"afcb759e8e3ad6549d5798820697002bc07bdd039899fad0bf522e7e8a9f5866","impliedFormat":1},{"version":"f6404e7837b96da3ea4d38c4f1a3812c96c9dcdf264e93d5bdb199f983a3ef4b","impliedFormat":1},{"version":"c5426dbfc1cf90532f66965a7aa8c1136a78d4d0f96d8180ecbfc11d7722f1a5","impliedFormat":1},{"version":"65a15fc47900787c0bd18b603afb98d33ede930bed1798fc984d5ebb78b26cf9","impliedFormat":1},{"version":"9d202701f6e0744adb6314d03d2eb8fc994798fc83d91b691b75b07626a69801","impliedFormat":1},{"version":"de9d2df7663e64e3a91bf495f315a7577e23ba088f2949d5ce9ec96f44fba37d","impliedFormat":1},{"version":"c7af78a2ea7cb1cd009cfb5bdb48cd0b03dad3b54f6da7aab615c2e9e9d570c5","impliedFormat":1},{"version":"1ee45496b5f8bdee6f7abc233355898e5bf9bd51255db65f5ff7ede617ca0027","impliedFormat":1},{"version":"566e5fb812082f8cf929c6727d40924843246cf19ee4e8b9437a6315c4792b03","affectsGlobalScope":true,"impliedFormat":1},{"version":"db01d18853469bcb5601b9fc9826931cc84cc1a1944b33cad76fd6f1e3d8c544","affectsGlobalScope":true,"impliedFormat":1},{"version":"dba114fb6a32b355a9cfc26ca2276834d72fe0e94cd2c3494005547025015369","impliedFormat":1},{"version":"903e299a28282fa7b714586e28409ed73c3b63f5365519776bf78e8cf173db36","affectsGlobalScope":true,"impliedFormat":1},{"version":"fa6c12a7c0f6b84d512f200690bfc74819e99efae69e4c95c4cd30f6884c526e","impliedFormat":1},{"version":"f1c32f9ce9c497da4dc215c3bc84b722ea02497d35f9134db3bb40a8d918b92b","impliedFormat":1},{"version":"b73c319af2cc3ef8f6421308a250f328836531ea3761823b4cabbd133047aefa","affectsGlobalScope":true,"impliedFormat":1},{"version":"e433b0337b8106909e7953015e8fa3f2d30797cea27141d1c5b135365bb975a6","impliedFormat":1},{"version":"dd3900b24a6a8745efeb7ad27629c0f8a626470ac229c1d73f1fe29d67e44dca","impliedFormat":1},{"version":"ddff7fc6edbdc5163a09e22bf8df7bef75f75369ebd7ecea95ba55c4386e2441","impliedFormat":1},{"version":"106c6025f1d99fd468fd8bf6e5bda724e11e5905a4076c5d29790b6c3745e50c","impliedFormat":1},{"version":"ec29be0737d39268696edcec4f5e97ce26f449fa9b7afc2f0f99a86def34a418","impliedFormat":1},{"version":"68a06fb972b2c7e671bf090dc5a5328d22ba07d771376c3d9acd9e7ed786a9db","impliedFormat":1},{"version":"ec6cba1c02c675e4dd173251b156792e8d3b0c816af6d6ad93f1a55d674591aa","impliedFormat":1},{"version":"b620391fe8060cf9bedc176a4d01366e6574d7a71e0ac0ab344a4e76576fcbb8","impliedFormat":1},{"version":"d729408dfde75b451530bcae944cf89ee8277e2a9df04d1f62f2abfd8b03c1e1","impliedFormat":1},{"version":"e15d3c84d5077bb4a3adee4c791022967b764dc41cb8fa3cfa44d4379b2c95f5","impliedFormat":1},{"version":"78244a2a8ab1080e0dd8fc3633c204c9a4be61611d19912f4b157f7ef7367049","impliedFormat":1},{"version":"e1fc1a1045db5aa09366be2b330e4ce391550041fc3e925f60998ca0b647aa97","impliedFormat":1},{"version":"d3f5861c48322adc023d3277e592635402ac008c5beae2e447b335fbf0da56c2","impliedFormat":1},{"version":"43ba4f2fa8c698f5c304d21a3ef596741e8e85a810b7c1f9b692653791d8d97a","impliedFormat":1},{"version":"31fb49ef3aa3d76f0beb644984e01eab0ea222372ea9b49bb6533be5722d756c","impliedFormat":1},{"version":"44c431d059195791915a2aee58f5cef4b333b9996bd256ae55f82ffcf3aa6de4","impliedFormat":1},{"version":"3556cfbab7b43da96d15a442ddbb970e1f2fc97876d055b6555d86d7ac57dae5","impliedFormat":1},{"version":"437751e0352c6e924ddf30e90849f1d9eb00ca78c94d58d6a37202ec84eb8393","impliedFormat":1},{"version":"48e8af7fdb2677a44522fd185d8c87deff4d36ee701ea003c6c780b1407a1397","impliedFormat":1},{"version":"24e1319bd695b0971f0eec3d4e011b7aa996f77b9d854d2703657cf355cac2a7","impliedFormat":1},{"version":"f9812cfc220ecf7557183379531fa409acd249b9e5b9a145d0d52b76c20862de","affectsGlobalScope":true,"impliedFormat":1},{"version":"7b068371563d0396a065ed64b049cffeb4eed89ad433ae7730fc31fb1e00ebf3","impliedFormat":1},{"version":"2e4f37ffe8862b14d8e24ae8763daaa8340c0df0b859d9a9733def0eee7562d9","impliedFormat":1},{"version":"13283350547389802aa35d9f2188effaeac805499169a06ef5cd77ce2a0bd63f","impliedFormat":1},{"version":"680793958f6a70a44c8d9ae7d46b7a385361c69ac29dcab3ed761edce1c14ab8","impliedFormat":1},{"version":"6ac6715916fa75a1f7ebdfeacac09513b4d904b667d827b7535e84ff59679aff","impliedFormat":1},{"version":"42c169fb8c2d42f4f668c624a9a11e719d5d07dacbebb63cbcf7ef365b0a75b3","impliedFormat":1},{"version":"913ddbba170240070bd5921b8f33ea780021bdf42fbdfcd4fcb2691b1884ddde","impliedFormat":1},{"version":"74c105214ddd747037d2a75da6588ec8aa1882f914e1f8a312c528f86feca2b9","impliedFormat":1},{"version":"5fe23bd829e6be57d41929ac374ee9551ccc3c44cee893167b7b5b77be708014","impliedFormat":1},{"version":"4d85f80132e24d9a5b5c5e0734e4ecd6878d8c657cc990ecc70845ef384ca96f","impliedFormat":1},{"version":"438c7513b1df91dcef49b13cd7a1c4720f91a36e88c1df731661608b7c055f10","impliedFormat":1},{"version":"ad444a874f011d3a797f1a41579dbfcc6b246623f49c20009f60e211dbd5315e","impliedFormat":1},{"version":"efaa078e392f9abda3ee8ade3f3762ab77f9c50b184e6883063a911742a4c96a","impliedFormat":1},{"version":"54a8bb487e1dc04591a280e7a673cdfb272c83f61e28d8a64cf1ac2e63c35c51","impliedFormat":1},{"version":"021a9498000497497fd693dd315325484c58a71b5929e2bbb91f419b04b24cea","impliedFormat":1},{"version":"9385cdc09850950bc9b59cca445a3ceb6fcca32b54e7b626e746912e489e535e","impliedFormat":1},{"version":"2894c56cad581928bb37607810af011764a2f511f575d28c9f4af0f2ef02d1ab","impliedFormat":1},{"version":"0a72186f94215d020cb386f7dca81d7495ab6c17066eb07d0f44a5bf33c1b21a","impliedFormat":1},{"version":"84124384abae2f6f66b7fbfc03862d0c2c0b71b826f7dbf42c8085d31f1d3f95","impliedFormat":1},{"version":"63a8e96f65a22604eae82737e409d1536e69a467bb738bec505f4f97cce9d878","impliedFormat":1},{"version":"3fd78152a7031315478f159c6a5872c712ece6f01212c78ea82aef21cb0726e2","impliedFormat":1},{"version":"3a6ed8e1d630cfa1f7edf0dc46a6e20ca6c714dbe754409699008571dfe473a6","impliedFormat":1},{"version":"512fc15cca3a35b8dbbf6e23fe9d07e6f87ad03c895acffd3087ce09f352aad0","impliedFormat":1},{"version":"9a0946d15a005832e432ea0cd4da71b57797efb25b755cc07f32274296d62355","impliedFormat":1},{"version":"a52ff6c0a149e9f370372fc3c715d7f2beee1f3bab7980e271a7ab7d313ec677","impliedFormat":1},{"version":"fd933f824347f9edd919618a76cdb6a0c0085c538115d9a287fa0c7f59957ab3","impliedFormat":1},{"version":"6ac6715916fa75a1f7ebdfeacac09513b4d904b667d827b7535e84ff59679aff","impliedFormat":1},{"version":"6a1aa3e55bdc50503956c5cd09ae4cd72e3072692d742816f65c66ca14f4dfdd","impliedFormat":1},{"version":"ab75cfd9c4f93ffd601f7ca1753d6a9d953bbedfbd7a5b3f0436ac8a1de60dfa","impliedFormat":1},{"version":"59c68235df3905989afa0399381c1198313aaaf1ed387f57937eb616625dff15","impliedFormat":1},{"version":"b73cbf0a72c8800cf8f96a9acfe94f3ad32ca71342a8908b8ae484d61113f647","impliedFormat":1},{"version":"bae6dd176832f6423966647382c0d7ba9e63f8c167522f09a982f086cd4e8b23","impliedFormat":1},{"version":"1364f64d2fb03bbb514edc42224abd576c064f89be6a990136774ecdd881a1da","impliedFormat":1},{"version":"c9958eb32126a3843deedda8c22fb97024aa5d6dd588b90af2d7f2bfac540f23","impliedFormat":1},{"version":"950fb67a59be4c2dbe69a5786292e60a5cb0e8612e0e223537784c731af55db1","impliedFormat":1},{"version":"e927c2c13c4eaf0a7f17e6022eee8519eb29ef42c4c13a31e81a611ab8c95577","impliedFormat":1},{"version":"07ca44e8d8288e69afdec7a31fa408ce6ab90d4f3d620006701d5544646da6aa","impliedFormat":1},{"version":"70246ad95ad8a22bdfe806cb5d383a26c0c6e58e7207ab9c431f1cb175aca657","impliedFormat":1},{"version":"f00f3aa5d64ff46e600648b55a79dcd1333458f7a10da2ed594d9f0a44b76d0b","impliedFormat":1},{"version":"772d8d5eb158b6c92412c03228bd9902ccb1457d7a705b8129814a5d1a6308fc","impliedFormat":1},{"version":"4e4475fba4ed93a72f167b061cd94a2e171b82695c56de9899275e880e06ba41","impliedFormat":1},{"version":"97c5f5d580ab2e4decd0a3135204050f9b97cd7908c5a8fbc041eadede79b2fa","impliedFormat":1},{"version":"49b2375c586882c3ac7f57eba86680ff9742a8d8cb2fe25fe54d1b9673690d41","impliedFormat":1},{"version":"802e797bcab5663b2c9f63f51bdf67eff7c41bc64c0fd65e6da3e7941359e2f7","impliedFormat":1},{"version":"0ccace0fe001af57d74279b66fa35cff2bb6aefc57c5c080be7281474161447b","impliedFormat":1},{"version":"3ecfccf916fea7c6c34394413b55eb70e817a73e39b4417d6573e523784e3f8e","impliedFormat":1},{"version":"c05bc82af01e673afc99bdffd4ebafde22ab027d63e45be9e1f1db3bc39e2fc0","impliedFormat":1},{"version":"6459054aabb306821a043e02b89d54da508e3a6966601a41e71c166e4ea1474f","impliedFormat":1},{"version":"f416c9c3eee9d47ff49132c34f96b9180e50485d435d5748f0e8b72521d28d2e","impliedFormat":1},{"version":"05c97cddbaf99978f83d96de2d8af86aded9332592f08ce4a284d72d0952c391","impliedFormat":1},{"version":"14e5cdec6f8ae82dfd0694e64903a0a54abdfe37e1d966de3d4128362acbf35f","impliedFormat":1},{"version":"bbc183d2d69f4b59fd4dd8799ffdf4eb91173d1c4ad71cce91a3811c021bf80c","impliedFormat":1},{"version":"7b6ff760c8a240b40dab6e4419b989f06a5b782f4710d2967e67c695ef3e93c4","impliedFormat":1},{"version":"8dbc4134a4b3623fc476be5f36de35c40f2768e2e3d9ed437e0d5f1c4cd850f6","impliedFormat":1},{"version":"4e06330a84dec7287f7ebdd64978f41a9f70a668d3b5edc69d5d4a50b9b376bb","impliedFormat":1},{"version":"65bfa72967fbe9fc33353e1ac03f0480aa2e2ea346d61ff3ea997dfd850f641a","impliedFormat":1},{"version":"8f88c6be9803fe5aaa80b00b27f230c824d4b8a33856b865bea5793cb52bb797","impliedFormat":1},{"version":"f974e4a06953682a2c15d5bd5114c0284d5abf8bc0fe4da25cb9159427b70072","impliedFormat":1},{"version":"872caaa31423f4345983d643e4649fb30f548e9883a334d6d1c5fff68ede22d4","impliedFormat":1},{"version":"94404c4a878fe291e7578a2a80264c6f18e9f1933fbb57e48f0eb368672e389c","impliedFormat":1},{"version":"5c1b7f03aa88be854bc15810bfd5bd5a1943c5a7620e1c53eddd2a013996343e","impliedFormat":1},{"version":"09dfc64fcd6a2785867f2368419859a6cc5a8d4e73cbe2538f205b1642eb0f51","impliedFormat":1},{"version":"bcf6f0a323653e72199105a9316d91463ad4744c546d1271310818b8cef7c608","impliedFormat":1},{"version":"01aa917531e116485beca44a14970834687b857757159769c16b228eb1e49c5f","impliedFormat":1},{"version":"351475f9c874c62f9b45b1f0dc7e2704e80dfd5f1af83a3a9f841f9dfe5b2912","impliedFormat":1},{"version":"ac457ad39e531b7649e7b40ee5847606eac64e236efd76c5d12db95bf4eacd17","impliedFormat":1},{"version":"187a6fdbdecb972510b7555f3caacb44b58415da8d5825d03a583c4b73fde4cf","impliedFormat":1},{"version":"d4c3250105a612202289b3a266bb7e323db144f6b9414f9dea85c531c098b811","impliedFormat":1},{"version":"95b444b8c311f2084f0fb51c616163f950fb2e35f4eaa07878f313a2d36c98a4","impliedFormat":1},{"version":"741067675daa6d4334a2dc80a4452ca3850e89d5852e330db7cb2b5f867173b1","impliedFormat":1},{"version":"f8acecec1114f11690956e007d920044799aefeb3cece9e7f4b1f8a1d542b2c9","impliedFormat":1},{"version":"131b1475d2045f20fb9f43b7aa6b7cb51f25250b5e4c6a1d4aa3cf4dd1a68793","impliedFormat":1},{"version":"3a17f09634c50cce884721f54fd9e7b98e03ac505889c560876291fcf8a09e90","impliedFormat":1},{"version":"32531dfbb0cdc4525296648f53b2b5c39b64282791e2a8c765712e49e6461046","impliedFormat":1},{"version":"0ce1b2237c1c3df49748d61568160d780d7b26693bd9feb3acb0744a152cd86d","impliedFormat":1},{"version":"e489985388e2c71d3542612685b4a7db326922b57ac880f299da7026a4e8a117","impliedFormat":1},{"version":"e1437c5f191edb7a494f7bbbc033b97d72d42e054d521402ee194ac5b6b7bf49","impliedFormat":1},{"version":"04d3aad777b6af5bd000bfc409907a159fe77e190b9d368da4ba649cdc28d39e","affectsGlobalScope":true,"impliedFormat":1},{"version":"fd1b9d883b9446f1e1da1e1033a6a98995c25fbf3c10818a78960e2f2917d10c","impliedFormat":1},{"version":"19252079538942a69be1645e153f7dbbc1ef56b4f983c633bf31fe26aeac32cd","impliedFormat":1},{"version":"bc11f3ac00ac060462597add171220aed628c393f2782ac75dd29ff1e0db871c","impliedFormat":1},{"version":"616775f16134fa9d01fc677ad3f76e68c051a056c22ab552c64cc281a9686790","impliedFormat":1},{"version":"65c24a8baa2cca1de069a0ba9fba82a173690f52d7e2d0f1f7542d59d5eb4db0","impliedFormat":1},{"version":"313c85c332bb6892d5f7c624dc39107ca7a6b2f1b3212db86dbbefbe7f8ddd5a","impliedFormat":1},{"version":"3b0b1d352b8d2e47f1c4df4fb0678702aee071155b12ef0185fce9eb4fa4af1e","impliedFormat":1},{"version":"77e71242e71ebf8528c5802993697878f0533db8f2299b4d36aa015bae08a79c","impliedFormat":1},{"version":"a344403e7a7384e0e7093942533d309194ad0a53eca2a3100c0b0ab4d3932773","impliedFormat":1},{"version":"b7fff2d004c5879cae335db8f954eb1d61242d9f2d28515e67902032723caeab","impliedFormat":1},{"version":"5f3dc10ae646f375776b4e028d2bed039a93eebbba105694d8b910feebbe8b9c","impliedFormat":1},{"version":"bb18bf4a61a17b4a6199eb3938ecfa4a59eb7c40843ad4a82b975ab6f7e3d925","impliedFormat":1},{"version":"4545c1a1ceca170d5d83452dd7c4994644c35cf676a671412601689d9a62da35","impliedFormat":1},{"version":"e9b6fc05f536dfddcdc65dbcf04e09391b1c968ab967382e48924f5cb90d88e1","impliedFormat":1},{"version":"a2d648d333cf67b9aeac5d81a1a379d563a8ffa91ddd61c6179f68de724260ff","impliedFormat":1},{"version":"2b664c3cc544d0e35276e1fb2d4989f7d4b4027ffc64da34ec83a6ccf2e5c528","impliedFormat":1},{"version":"a3f41ed1b4f2fc3049394b945a68ae4fdefd49fa1739c32f149d32c0545d67f5","impliedFormat":1},{"version":"3cd8f0464e0939b47bfccbb9bb474a6d87d57210e304029cd8eb59c63a81935d","impliedFormat":1},{"version":"47699512e6d8bebf7be488182427189f999affe3addc1c87c882d36b7f2d0b0e","impliedFormat":1},{"version":"3026abd48e5e312f2328629ede6e0f770d21c3cd32cee705c450e589d015ee09","impliedFormat":1},{"version":"8b140b398a6afbd17cc97c38aea5274b2f7f39b1ae5b62952cfe65bf493e3e75","impliedFormat":1},{"version":"7663d2c19ce5ef8288c790edba3d45af54e58c84f1b37b1249f6d49d962f3d91","impliedFormat":1},{"version":"30112425b2cf042fca1c79c19e35f88f44bfb2e97454527528cd639dd1a460ca","impliedFormat":1},{"version":"00bd6ebe607246b45296aa2b805bd6a58c859acecda154bfa91f5334d7c175c6","impliedFormat":1},{"version":"ad036a85efcd9e5b4f7dd5c1a7362c8478f9a3b6c3554654ca24a29aa850a9c5","impliedFormat":1},{"version":"fedebeae32c5cdd1a85b4e0504a01996e4a8adf3dfa72876920d3dd6e42978e7","impliedFormat":1},{"version":"504f37ba38bfea8394ec4f397c9a2ade7c78055e41ef5a600073b515c4fd0fc9","impliedFormat":1},{"version":"cdf21eee8007e339b1b9945abf4a7b44930b1d695cc528459e68a3adc39a622e","impliedFormat":1},{"version":"db036c56f79186da50af66511d37d9fe77fa6793381927292d17f81f787bb195","impliedFormat":1},{"version":"87ac2fb61e629e777f4d161dff534c2023ee15afd9cb3b1589b9b1f014e75c58","impliedFormat":1},{"version":"13c8b4348db91e2f7d694adc17e7438e6776bc506d5c8f5de9ad9989707fa3fe","impliedFormat":1},{"version":"3c1051617aa50b38e9efaabce25e10a5dd9b1f42e372ef0e8a674076a68742ed","impliedFormat":1},{"version":"07a3e20cdcb0f1182f452c0410606711fbea922ca76929a41aacb01104bc0d27","impliedFormat":1},{"version":"1de80059b8078ea5749941c9f863aa970b4735bdbb003be4925c853a8b6b4450","impliedFormat":1},{"version":"1d079c37fa53e3c21ed3fa214a27507bda9991f2a41458705b19ed8c2b61173d","impliedFormat":1},{"version":"4cd4b6b1279e9d744a3825cbd7757bbefe7f0708f3f1069179ad535f19e8ed2c","impliedFormat":1},{"version":"5835a6e0d7cd2738e56b671af0e561e7c1b4fb77751383672f4b009f4e161d70","impliedFormat":1},{"version":"c0eeaaa67c85c3bb6c52b629ebbfd3b2292dc67e8c0ffda2fc6cd2f78dc471e6","impliedFormat":1},{"version":"4b7f74b772140395e7af67c4841be1ab867c11b3b82a51b1aeb692822b76c872","impliedFormat":1},{"version":"27be6622e2922a1b412eb057faa854831b95db9db5035c3f6d4b677b902ab3b7","impliedFormat":1},{"version":"b95a6f019095dd1d48fd04965b50dfd63e5743a6e75478343c46d2582a5132bf","impliedFormat":99},{"version":"c2008605e78208cfa9cd70bd29856b72dda7ad89df5dc895920f8e10bcb9cd0a","impliedFormat":99},{"version":"b97cb5616d2ab82a98ec9ada7b9e9cabb1f5da880ec50ea2b8dc5baa4cbf3c16","impliedFormat":99},{"version":"d23df9ff06ae8bf1dcb7cc933e97ae7da418ac77749fecee758bb43a8d69f840","affectsGlobalScope":true,"impliedFormat":1},{"version":"040c71dde2c406f869ad2f41e8d4ce579cc60c8dbe5aa0dd8962ac943b846572","affectsGlobalScope":true,"impliedFormat":1},{"version":"3586f5ea3cc27083a17bd5c9059ede9421d587286d5a47f4341a4c2d00e4fa91","impliedFormat":1},{"version":"a6df929821e62f4719551f7955b9f42c0cd53c1370aec2dd322e24196a7dfe33","impliedFormat":1},"1e836b29436b57d07d11d143c0a31c133d32e1cf822acb8c97fe5fed662d6840","9061c1119b73a871f3e305ae757f08b3d319b959451e97d83ad9a1a3b231d555"],"root":[404,405],"options":{"declaration":true,"declarationMap":true,"esModuleInterop":true,"jsx":1,"module":99,"skipLibCheck":true,"strict":true,"target":9},"referencedMap":[[404,1],[405,2],[358,2],[143,3],[144,3],[145,4],[99,5],[146,6],[147,7],[148,8],[94,2],[97,9],[95,2],[96,2],[149,10],[150,11],[151,12],[152,13],[153,14],[154,15],[155,15],[156,16],[157,17],[158,18],[159,19],[100,2],[98,2],[160,20],[161,21],[162,22],[194,23],[163,24],[164,25],[165,26],[166,27],[167,28],[168,29],[169,30],[170,31],[171,32],[172,33],[173,33],[174,34],[175,2],[176,35],[178,36],[177,37],[179,38],[180,39],[181,40],[182,41],[183,42],[184,43],[185,44],[186,45],[187,46],[188,47],[189,48],[190,49],[191,50],[101,2],[102,2],[103,2],[142,51],[192,52],[193,53],[86,2],[199,54],[200,55],[198,56],[196,57],[197,58],[84,2],[87,59],[284,56],[104,2],[85,2],[93,60],[361,61],[365,62],[367,63],[220,64],[234,65],[332,66],[265,2],[335,67],[298,68],[306,69],[333,70],[221,71],[264,2],[266,72],[334,73],[241,74],[222,75],[245,74],[235,74],[205,74],[290,76],[210,2],[287,77],[291,78],[376,79],[285,78],[377,80],[271,2],[288,81],[389,82],[388,83],[293,78],[387,2],[385,2],[386,84],[289,56],[277,85],[286,86],[301,87],[302,88],[292,89],[273,90],[380,91],[383,92],[252,93],[251,94],[250,95],[392,56],[249,96],[226,2],[395,2],[398,2],[397,56],[399,97],[201,2],[326,2],[233,98],[203,99],[349,2],[350,2],[352,2],[355,100],[351,2],[353,101],[354,101],[219,2],[232,2],[360,102],[368,103],[372,104],[215,105],[279,106],[278,2],[272,107],[297,108],[295,109],[294,2],[296,2],[300,110],[275,111],[214,112],[239,113],[323,114],[206,115],[213,116],[202,66],[337,117],[347,118],[336,2],[346,119],[240,2],[224,120],[315,121],[314,2],[322,122],[316,123],[320,124],[321,125],[319,123],[318,125],[317,123],[261,126],[246,126],[309,127],[247,127],[208,128],[207,2],[313,129],[312,130],[311,131],[310,132],[209,133],[283,134],[299,135],[282,136],[305,137],[307,138],[304,136],[242,133],[195,2],[324,139],[267,140],[345,141],[270,142],[340,143],[212,2],[341,144],[343,145],[344,146],[327,2],[339,115],[243,147],[325,148],[348,149],[216,2],[218,2],[223,150],[308,151],[211,152],[217,2],[269,153],[268,154],[225,155],[276,156],[274,157],[227,158],[229,159],[396,2],[228,160],[230,161],[363,2],[362,2],[364,2],[394,2],[231,162],[281,56],[92,2],[303,163],[253,2],[263,164],[370,56],[379,165],[260,56],[374,78],[259,166],[357,167],[258,165],[204,2],[381,168],[256,56],[257,56],[248,2],[262,2],[255,169],[254,170],[244,171],[238,89],[342,2],[237,172],[236,2],[366,2],[280,56],[359,173],[83,2],[91,174],[88,56],[89,2],[90,2],[338,175],[331,176],[330,2],[329,177],[328,2],[369,178],[371,179],[373,180],[375,181],[378,182],[382,183],[403,184],[384,185],[390,186],[391,187],[393,188],[400,189],[402,2],[401,190],[356,191],[81,2],[82,2],[13,2],[14,2],[16,2],[15,2],[2,2],[17,2],[18,2],[19,2],[20,2],[21,2],[22,2],[23,2],[24,2],[3,2],[25,2],[26,2],[4,2],[27,2],[31,2],[28,2],[29,2],[30,2],[32,2],[33,2],[34,2],[5,2],[35,2],[36,2],[37,2],[38,2],[6,2],[42,2],[39,2],[40,2],[41,2],[43,2],[7,2],[44,2],[49,2],[50,2],[45,2],[46,2],[47,2],[48,2],[8,2],[54,2],[51,2],[52,2],[53,2],[55,2],[9,2],[56,2],[57,2],[58,2],[60,2],[59,2],[61,2],[62,2],[10,2],[63,2],[64,2],[65,2],[11,2],[66,2],[67,2],[68,2],[69,2],[70,2],[1,2],[71,2],[72,2],[12,2],[76,2],[74,2],[79,2],[78,2],[73,2],[77,2],[75,2],[80,2],[120,192],[130,193],[119,192],[140,194],[111,195],[110,196],[139,190],[133,197],[138,198],[113,199],[127,200],[112,201],[136,202],[108,203],[107,190],[137,204],[109,205],[114,206],[115,2],[118,206],[105,2],[141,207],[131,208],[122,209],[123,210],[125,211],[121,212],[124,213],[134,190],[116,214],[117,215],[126,216],[106,217],[129,208],[128,206],[132,2],[135,218]],"affectedFilesPendingEmit":[[404,49],[405,49]],"version":"5.9.3"}
</file>

<file path="docs/wireframes/dashboard.html">
<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - AI Toolkit Sync Platform</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
            mono: ['JetBrains Mono', 'monospace'],
          },
          colors: {
            slate: {
              850: '#1E293B',
              950: '#0F172A',
            }
          }
        }
      }
    }
  </script>
  <style>
    @keyframes pulse-dot {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.7; transform: scale(1.1); }
    }
    .pulse-dot { animation: pulse-dot 2s ease-in-out infinite; }
  </style>
</head>
<body class="bg-slate-950 text-slate-100 font-sans min-h-screen">

  <!-- Sidebar -->
  <aside class="fixed left-0 top-0 h-full w-60 bg-slate-850 border-r border-slate-700 flex flex-col">
    <!-- Logo -->
    <div class="h-16 flex items-center px-4 border-b border-slate-700">
      <div class="flex items-center gap-3">
        <div class="w-8 h-8 rounded-lg bg-blue-500 flex items-center justify-center">
          <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"/>
          </svg>
        </div>
        <span class="font-semibold text-lg">AI Toolkit Sync</span>
      </div>
    </div>

    <!-- Navigation -->
    <nav class="flex-1 p-4 space-y-1">
      <a href="dashboard.html" class="flex items-center gap-3 px-3 py-2.5 rounded-lg bg-slate-700/50 text-white">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
        </svg>
        Dashboard
      </a>
      <a href="#" class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-slate-400 hover:text-white hover:bg-slate-700/30 transition">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
        </svg>
        Documentation
      </a>
      <a href="#" class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-slate-400 hover:text-white hover:bg-slate-700/30 transition">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"/>
        </svg>
        Settings
      </a>
    </nav>

    <!-- User -->
    <div class="p-4 border-t border-slate-700">
      <div class="flex items-center gap-3">
        <div class="w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-sm font-medium">
          TL
        </div>
        <div class="flex-1 min-w-0">
          <div class="text-sm font-medium truncate">Team Lead</div>
          <div class="text-xs text-slate-500 truncate">team@example.com</div>
        </div>
      </div>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="ml-60 min-h-screen">
    <!-- Header -->
    <header class="h-16 border-b border-slate-700 flex items-center justify-between px-6 bg-slate-950/80 backdrop-blur sticky top-0 z-10">
      <div>
        <h1 class="text-xl font-semibold">Projects</h1>
        <p class="text-sm text-slate-400">Manage your documentation sync projects</p>
      </div>
      <button class="flex items-center gap-2 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
        </svg>
        New Project
      </button>
    </header>

    <!-- Lock Status Banner (when project is locked by someone) -->
    <div class="mx-6 mt-4 bg-gradient-to-r from-red-950 to-red-900 border-l-4 border-red-500 rounded-r-lg p-4 flex items-center gap-3">
      <div class="w-8 h-8 rounded-full bg-red-500/20 flex items-center justify-center">
        <svg class="w-5 h-5 text-red-400 pulse-dot" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
        </svg>
      </div>
      <div class="flex-1">
        <div class="text-red-200 font-medium">Project "Frontend Docs" is locked</div>
        <div class="text-red-300/70 text-sm">Locked by John D. 5 minutes ago - Editing CLAUDE.md</div>
      </div>
      <button class="px-3 py-1.5 text-sm text-red-200 border border-red-500/50 rounded-lg hover:bg-red-500/20 transition">
        View Details
      </button>
    </div>

    <!-- Projects Grid -->
    <div class="p-6">
      <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">

        <!-- Project Card 1 - Locked -->
        <div class="bg-slate-850 border border-slate-700 rounded-xl p-5 hover:border-slate-600 transition group">
          <div class="flex items-start justify-between mb-4">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center">
                <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                </svg>
              </div>
              <div>
                <h3 class="font-semibold">Frontend Docs</h3>
                <p class="text-sm text-slate-400">cloudteam/frontend-docs</p>
              </div>
            </div>
            <!-- Status: Locked -->
            <div class="flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-red-500/10 text-red-400 text-xs font-medium">
              <span class="w-2 h-2 rounded-full bg-red-500 pulse-dot"></span>
              Locked
            </div>
          </div>

          <p class="text-sm text-slate-400 mb-4 line-clamp-2">React component documentation with TypeScript examples and Storybook integration.</p>

          <div class="flex items-center gap-2 text-xs text-slate-500 mb-4">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
            </svg>
            <span>Locked by John D.</span>
            <span class="text-slate-600">|</span>
            <span>5 min ago</span>
          </div>

          <div class="flex items-center gap-2 pt-4 border-t border-slate-700">
            <a href="docs-editor.html" class="flex-1 text-center py-2 text-sm text-slate-400 bg-slate-700/30 rounded-lg cursor-not-allowed opacity-50">
              View Only
            </a>
            <a href="project-settings.html" class="p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
              </svg>
            </a>
          </div>
        </div>

        <!-- Project Card 2 - Unlocked -->
        <div class="bg-slate-850 border border-slate-700 rounded-xl p-5 hover:border-slate-600 transition group">
          <div class="flex items-start justify-between mb-4">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center">
                <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2"/>
                </svg>
              </div>
              <div>
                <h3 class="font-semibold">API Reference</h3>
                <p class="text-sm text-slate-400">cloudteam/api-docs</p>
              </div>
            </div>
            <!-- Status: Unlocked -->
            <div class="flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-green-500/10 text-green-400 text-xs font-medium">
              <span class="w-2 h-2 rounded-full bg-green-500"></span>
              Unlocked
            </div>
          </div>

          <p class="text-sm text-slate-400 mb-4 line-clamp-2">REST API documentation with OpenAPI specs and code examples for multiple languages.</p>

          <div class="flex items-center gap-2 text-xs text-slate-500 mb-4">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            <span>Last synced 2 hours ago</span>
          </div>

          <div class="flex items-center gap-2 pt-4 border-t border-slate-700">
            <a href="docs-editor.html" class="flex-1 text-center py-2 text-sm text-white bg-blue-500 hover:bg-blue-600 rounded-lg transition font-medium">
              Open Editor
            </a>
            <a href="project-settings.html" class="p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
              </svg>
            </a>
          </div>
        </div>

        <!-- Project Card 3 - Unlocked -->
        <div class="bg-slate-850 border border-slate-700 rounded-xl p-5 hover:border-slate-600 transition group">
          <div class="flex items-start justify-between mb-4">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-pink-600 flex items-center justify-center">
                <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                </svg>
              </div>
              <div>
                <h3 class="font-semibold">Design System</h3>
                <p class="text-sm text-slate-400">cloudteam/design-docs</p>
              </div>
            </div>
            <!-- Status: Unlocked -->
            <div class="flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-green-500/10 text-green-400 text-xs font-medium">
              <span class="w-2 h-2 rounded-full bg-green-500"></span>
              Unlocked
            </div>
          </div>

          <p class="text-sm text-slate-400 mb-4 line-clamp-2">Component library documentation with usage guidelines, tokens, and accessibility notes.</p>

          <div class="flex items-center gap-2 text-xs text-slate-500 mb-4">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            <span>Last synced 30 min ago</span>
          </div>

          <div class="flex items-center gap-2 pt-4 border-t border-slate-700">
            <a href="docs-editor.html" class="flex-1 text-center py-2 text-sm text-white bg-blue-500 hover:bg-blue-600 rounded-lg transition font-medium">
              Open Editor
            </a>
            <a href="project-settings.html" class="p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
              </svg>
            </a>
          </div>
        </div>

        <!-- Add New Project Card -->
        <div class="bg-slate-850/50 border-2 border-dashed border-slate-700 rounded-xl p-5 flex flex-col items-center justify-center text-center min-h-[220px] hover:border-blue-500/50 hover:bg-slate-850 transition cursor-pointer group">
          <div class="w-12 h-12 rounded-full bg-slate-700 group-hover:bg-blue-500/20 flex items-center justify-center mb-3 transition">
            <svg class="w-6 h-6 text-slate-400 group-hover:text-blue-400 transition" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
            </svg>
          </div>
          <h3 class="font-medium text-slate-300 group-hover:text-white transition">Add New Project</h3>
          <p class="text-sm text-slate-500 mt-1">Connect a new Git repository</p>
        </div>

      </div>
    </div>
  </main>

</body>
</html>
</file>

<file path="docs/wireframes/docs-editor.html">
<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Docs Editor - AI Toolkit Sync Platform</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
            mono: ['JetBrains Mono', 'monospace'],
          },
          colors: {
            slate: {
              850: '#1E293B',
              950: '#0F172A',
            }
          }
        }
      }
    }
  </script>
  <style>
    @keyframes pulse-dot {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.7; transform: scale(1.1); }
    }
    .pulse-dot { animation: pulse-dot 2s ease-in-out infinite; }

    .line-number { user-select: none; }

    /* Monaco-like syntax highlighting */
    .syntax-keyword { color: #C586C0; }
    .syntax-string { color: #CE9178; }
    .syntax-comment { color: #6A9955; }
    .syntax-heading { color: #569CD6; font-weight: 600; }
    .syntax-link { color: #4FC1FF; }
    .syntax-code { color: #DCDCAA; background: rgba(255,255,255,0.05); padding: 1px 4px; border-radius: 3px; }
    .syntax-list { color: #D4D4D4; }
    .syntax-bold { color: #D7BA7D; font-weight: 600; }
  </style>
</head>
<body class="bg-slate-950 text-slate-100 font-sans h-screen flex flex-col overflow-hidden">

  <!-- Top Header with Lock Status -->
  <header class="h-14 border-b border-slate-700 flex items-center justify-between px-4 bg-slate-900 shrink-0">
    <div class="flex items-center gap-4">
      <a href="dashboard.html" class="p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
      </a>
      <div class="flex items-center gap-3">
        <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center">
          <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2"/>
          </svg>
        </div>
        <div>
          <h1 class="text-sm font-semibold">API Reference</h1>
          <p class="text-xs text-slate-400">cloudteam/api-docs</p>
        </div>
      </div>
    </div>

    <!-- Center: File Path -->
    <div class="flex items-center gap-2 bg-slate-800 px-3 py-1.5 rounded-lg">
      <svg class="w-4 h-4 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
      </svg>
      <span class="text-sm text-slate-300 font-mono">docs/CLAUDE.md</span>
      <span class="w-1.5 h-1.5 bg-amber-500 rounded-full" title="Modified"></span>
    </div>

    <!-- Right: Status & Actions -->
    <div class="flex items-center gap-3">
      <!-- Lock Status Indicator -->
      <div class="flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-green-500/10 text-green-400 text-xs font-medium">
        <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"/>
        </svg>
        Editing
      </div>

      <!-- Save Button -->
      <button class="flex items-center gap-2 px-3 py-1.5 text-slate-300 border border-slate-600 rounded-lg hover:bg-slate-700 hover:text-white transition text-sm">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"/>
        </svg>
        Save
      </button>

      <!-- Push Button -->
      <button class="flex items-center gap-2 px-4 py-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition text-sm">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
        </svg>
        Push
      </button>

      <!-- Settings -->
      <a href="project-settings.html" class="p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
        </svg>
      </a>
    </div>
  </header>

  <!-- Main Editor Area -->
  <div class="flex-1 flex overflow-hidden">

    <!-- File Tree Sidebar -->
    <aside class="w-56 border-r border-slate-700 bg-slate-900 flex flex-col shrink-0">
      <div class="p-3 border-b border-slate-700 flex items-center justify-between">
        <span class="text-xs font-medium text-slate-400 uppercase tracking-wide">Explorer</span>
        <button class="p-1 text-slate-400 hover:text-white hover:bg-slate-700 rounded transition">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
          </svg>
        </button>
      </div>
      <div class="flex-1 overflow-y-auto p-2">
        <!-- File Tree -->
        <div class="space-y-0.5 text-sm">
          <!-- Folder: docs -->
          <div class="flex items-center gap-2 px-2 py-1.5 text-slate-300 hover:bg-slate-800 rounded cursor-pointer">
            <svg class="w-4 h-4 text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"/>
            </svg>
            <span>docs</span>
          </div>
          <!-- Files in docs folder -->
          <div class="pl-4 space-y-0.5">
            <div class="flex items-center gap-2 px-2 py-1.5 bg-blue-500/20 text-blue-300 rounded cursor-pointer">
              <svg class="w-4 h-4 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
              </svg>
              <span>CLAUDE.md</span>
              <span class="w-1.5 h-1.5 bg-amber-500 rounded-full ml-auto" title="Modified"></span>
            </div>
            <div class="flex items-center gap-2 px-2 py-1.5 text-slate-400 hover:bg-slate-800 hover:text-slate-300 rounded cursor-pointer">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
              </svg>
              <span>README.md</span>
            </div>
            <div class="flex items-center gap-2 px-2 py-1.5 text-slate-400 hover:bg-slate-800 hover:text-slate-300 rounded cursor-pointer">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
              </svg>
              <span>API.md</span>
            </div>
            <div class="flex items-center gap-2 px-2 py-1.5 text-slate-400 hover:bg-slate-800 hover:text-slate-300 rounded cursor-pointer">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
              </svg>
              <span>SETUP.md</span>
            </div>
          </div>
          <!-- Root files -->
          <div class="flex items-center gap-2 px-2 py-1.5 text-slate-400 hover:bg-slate-800 hover:text-slate-300 rounded cursor-pointer mt-2">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
            </svg>
            <span>.claudeignore</span>
          </div>
        </div>
      </div>
    </aside>

    <!-- Editor + Preview Split -->
    <div class="flex-1 flex">

      <!-- Monaco Editor Mockup -->
      <div class="flex-1 flex flex-col border-r border-slate-700">
        <!-- Editor Tabs -->
        <div class="h-9 bg-slate-900 border-b border-slate-700 flex items-center px-2">
          <div class="flex items-center gap-2 px-3 py-1.5 bg-slate-800 rounded-t text-sm text-slate-200 border-t-2 border-blue-500">
            <svg class="w-4 h-4 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
            </svg>
            CLAUDE.md
            <span class="w-1.5 h-1.5 bg-amber-500 rounded-full"></span>
            <button class="p-0.5 text-slate-400 hover:text-white hover:bg-slate-700 rounded ml-1">
              <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
              </svg>
            </button>
          </div>
        </div>

        <!-- Editor Content -->
        <div class="flex-1 overflow-auto bg-slate-950 font-mono text-sm leading-6">
          <div class="flex">
            <!-- Line Numbers -->
            <div class="line-number w-12 py-4 text-right pr-4 text-slate-600 select-none border-r border-slate-800 bg-slate-900/50">
              <div>1</div>
              <div>2</div>
              <div>3</div>
              <div>4</div>
              <div>5</div>
              <div>6</div>
              <div>7</div>
              <div>8</div>
              <div>9</div>
              <div>10</div>
              <div>11</div>
              <div>12</div>
              <div>13</div>
              <div>14</div>
              <div>15</div>
              <div>16</div>
              <div>17</div>
              <div>18</div>
              <div>19</div>
              <div>20</div>
              <div>21</div>
              <div>22</div>
              <div>23</div>
              <div>24</div>
            </div>
            <!-- Code Content -->
            <div class="flex-1 py-4 px-4 text-slate-300">
              <div class="syntax-heading"># CLAUDE.md</div>
              <div class="text-slate-500"></div>
              <div class="text-slate-400">This file provides guidance to Claude Code when working</div>
              <div class="text-slate-400">with code in this repository.</div>
              <div class="text-slate-500"></div>
              <div class="syntax-heading">## Project Overview</div>
              <div class="text-slate-500"></div>
              <div class="text-slate-400">AI Toolkit Sync Platform - A web application for managing</div>
              <div class="text-slate-400">documentation synchronization across AI-assisted development</div>
              <div class="text-slate-400">teams.</div>
              <div class="text-slate-500"></div>
              <div class="syntax-heading">## Tech Stack</div>
              <div class="text-slate-500"></div>
              <div class="syntax-list">- <span class="syntax-bold">Frontend:</span> React, TypeScript, Tailwind CSS</div>
              <div class="syntax-list">- <span class="syntax-bold">Backend:</span> Node.js, Express, PostgreSQL</div>
              <div class="syntax-list">- <span class="syntax-bold">Auth:</span> GitHub OAuth</div>
              <div class="text-slate-500"></div>
              <div class="syntax-heading">## Commands</div>
              <div class="text-slate-500"></div>
              <div class="syntax-list">- <span class="syntax-code">npm run dev</span> - Start development server</div>
              <div class="syntax-list">- <span class="syntax-code">npm run build</span> - Build for production</div>
              <div class="syntax-list">- <span class="syntax-code">npm run test</span> - Run test suite</div>
              <div class="text-slate-500"></div>
            </div>
          </div>
        </div>

        <!-- Editor Footer -->
        <div class="h-6 bg-slate-900 border-t border-slate-700 flex items-center justify-between px-3 text-xs text-slate-500">
          <div class="flex items-center gap-4">
            <span>Markdown</span>
            <span>UTF-8</span>
            <span>LF</span>
          </div>
          <div class="flex items-center gap-4">
            <span>Ln 14, Col 28</span>
            <span>Spaces: 2</span>
          </div>
        </div>
      </div>

      <!-- Markdown Preview -->
      <div class="w-[45%] flex flex-col bg-slate-900">
        <!-- Preview Header -->
        <div class="h-9 bg-slate-850 border-b border-slate-700 flex items-center justify-between px-4">
          <span class="text-xs font-medium text-slate-400 uppercase tracking-wide">Preview</span>
          <button class="p-1 text-slate-400 hover:text-white hover:bg-slate-700 rounded transition" title="Open in new window">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
            </svg>
          </button>
        </div>

        <!-- Preview Content -->
        <div class="flex-1 overflow-auto p-6">
          <article class="prose prose-invert prose-slate max-w-none">
            <h1 class="text-2xl font-bold text-slate-100 mb-4 pb-2 border-b border-slate-700">CLAUDE.md</h1>
            <p class="text-slate-300 mb-6">This file provides guidance to Claude Code when working with code in this repository.</p>

            <h2 class="text-xl font-semibold text-slate-100 mt-8 mb-3">Project Overview</h2>
            <p class="text-slate-300 mb-6">AI Toolkit Sync Platform - A web application for managing documentation synchronization across AI-assisted development teams.</p>

            <h2 class="text-xl font-semibold text-slate-100 mt-8 mb-3">Tech Stack</h2>
            <ul class="list-disc list-inside text-slate-300 space-y-2 mb-6">
              <li><strong class="text-slate-200">Frontend:</strong> React, TypeScript, Tailwind CSS</li>
              <li><strong class="text-slate-200">Backend:</strong> Node.js, Express, PostgreSQL</li>
              <li><strong class="text-slate-200">Auth:</strong> GitHub OAuth</li>
            </ul>

            <h2 class="text-xl font-semibold text-slate-100 mt-8 mb-3">Commands</h2>
            <ul class="list-disc list-inside text-slate-300 space-y-2">
              <li><code class="bg-slate-800 px-2 py-0.5 rounded text-blue-300 text-sm font-mono">npm run dev</code> - Start development server</li>
              <li><code class="bg-slate-800 px-2 py-0.5 rounded text-blue-300 text-sm font-mono">npm run build</code> - Build for production</li>
              <li><code class="bg-slate-800 px-2 py-0.5 rounded text-blue-300 text-sm font-mono">npm run test</code> - Run test suite</li>
            </ul>
          </article>
        </div>
      </div>

    </div>
  </div>

  <!-- Lock Status Banner (shown when locked by someone else) -->
  <div class="hidden fixed bottom-0 left-0 right-0 bg-gradient-to-r from-red-950 to-red-900 border-t-2 border-red-500 p-4 flex items-center gap-4">
    <div class="w-10 h-10 rounded-full bg-red-500/20 flex items-center justify-center shrink-0">
      <svg class="w-6 h-6 text-red-400 pulse-dot" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
      </svg>
    </div>
    <div class="flex-1">
      <div class="text-red-200 font-medium">This project is now locked by another user</div>
      <div class="text-red-300/70 text-sm">John D. started editing 2 minutes ago. Your changes will be saved locally.</div>
    </div>
    <button class="px-4 py-2 text-white bg-red-600 hover:bg-red-700 rounded-lg font-medium transition">
      Request Access
    </button>
    <button class="p-2 text-red-300 hover:text-white hover:bg-red-800/50 rounded-lg transition">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
      </svg>
    </button>
  </div>

</body>
</html>
</file>

<file path="docs/design-guidelines.md">
# AI Toolkit Sync Platform - Design Guidelines

## Overview
Design system for a developer-focused docs synchronization platform. Emphasizes clarity, efficiency, and professional aesthetics with dark mode as primary theme.

---

## Color Palette

### Dark Theme (Primary)
| Token | Hex | Usage |
|-------|-----|-------|
| `--bg-primary` | `#0F172A` | Main background |
| `--bg-secondary` | `#1E293B` | Cards, panels |
| `--bg-tertiary` | `#334155` | Elevated elements |
| `--border` | `#475569` | Borders, dividers |
| `--text-primary` | `#F1F5F9` | Primary text |
| `--text-secondary` | `#94A3B8` | Secondary text |
| `--text-muted` | `#64748B` | Muted text, placeholders |

### Accent Colors
| Token | Hex | Usage |
|-------|-----|-------|
| `--accent-primary` | `#3B82F6` | Primary actions, links |
| `--accent-hover` | `#2563EB` | Hover states |
| `--success` | `#22C55E` | Unlocked status, success |
| `--error` | `#EF4444` | Locked status, errors |
| `--warning` | `#F59E0B` | Warnings, pending states |

### Light Theme
| Token | Hex | Usage |
|-------|-----|-------|
| `--bg-primary-light` | `#FFFFFF` | Main background |
| `--bg-secondary-light` | `#F8FAFC` | Cards, panels |
| `--text-primary-light` | `#0F172A` | Primary text |
| `--text-secondary-light` | `#475569` | Secondary text |

---

## Typography

### Font Stack
```css
--font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
--font-mono: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;
```

### Type Scale
| Level | Size | Weight | Line Height | Usage |
|-------|------|--------|-------------|-------|
| `h1` | 24px | 700 | 1.2 | Page titles |
| `h2` | 20px | 600 | 1.3 | Section headers |
| `h3` | 16px | 600 | 1.4 | Card titles |
| `body` | 14px | 400 | 1.5 | Body text |
| `small` | 12px | 400 | 1.4 | Captions, labels |
| `code` | 13px | 400 | 1.5 | Code, monospace |

---

## Spacing System

Based on 4px base unit:
| Token | Value | Usage |
|-------|-------|-------|
| `--space-1` | 4px | Tight spacing |
| `--space-2` | 8px | Icon gaps |
| `--space-3` | 12px | Button padding |
| `--space-4` | 16px | Card padding |
| `--space-5` | 20px | Section gaps |
| `--space-6` | 24px | Large gaps |
| `--space-8` | 32px | Section margins |

---

## Components

### Status Indicators

**Locked Status (Red)**
```html
<span class="status-locked">
  <span class="status-dot bg-red-500"></span>
  Locked
</span>
```
- Background: `#EF4444` (solid dot)
- Text: `#FCA5A5` (light red)
- Use pulse animation for active lock

**Unlocked Status (Green)**
```html
<span class="status-unlocked">
  <span class="status-dot bg-green-500"></span>
  Unlocked
</span>
```
- Background: `#22C55E` (solid dot)
- Text: `#86EFAC` (light green)

### Buttons

**Primary Button**
```css
.btn-primary {
  background: #3B82F6;
  color: #FFFFFF;
  padding: 8px 16px;
  border-radius: 6px;
  font-weight: 500;
  transition: background 150ms;
}
.btn-primary:hover {
  background: #2563EB;
}
```

**Secondary Button**
```css
.btn-secondary {
  background: transparent;
  border: 1px solid #475569;
  color: #F1F5F9;
  padding: 8px 16px;
  border-radius: 6px;
}
```

**Danger Button**
```css
.btn-danger {
  background: #DC2626;
  color: #FFFFFF;
}
```

### Cards
```css
.card {
  background: #1E293B;
  border: 1px solid #334155;
  border-radius: 8px;
  padding: 16px;
}
```

### Form Inputs
```css
.input {
  background: #0F172A;
  border: 1px solid #475569;
  border-radius: 6px;
  padding: 8px 12px;
  color: #F1F5F9;
}
.input:focus {
  border-color: #3B82F6;
  outline: none;
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
}
```

### Lock Status Banner
```css
.lock-banner {
  background: linear-gradient(90deg, #7F1D1D 0%, #991B1B 100%);
  border-left: 4px solid #EF4444;
  padding: 12px 16px;
  display: flex;
  align-items: center;
  gap: 12px;
}
```

---

## Layout Patterns

### Sidebar Navigation
- Width: 240px (desktop), collapsible
- Background: `--bg-secondary`
- Logo area: 64px height
- Nav items: 40px height, 8px padding

### Content Area
- Max-width: 1200px (centered)
- Padding: 24px
- Card grid: 1 col mobile, 2-3 cols desktop

### Responsive Breakpoints
| Name | Width | Usage |
|------|-------|-------|
| `sm` | 640px | Mobile landscape |
| `md` | 768px | Tablet |
| `lg` | 1024px | Desktop |
| `xl` | 1280px | Large desktop |

---

## Icons

Use Lucide Icons (consistent with Tailwind ecosystem):
- Size: 16px (small), 20px (default), 24px (large)
- Stroke width: 1.5px
- Color: inherit from parent

Common icons:
- Lock: `<LockIcon />`
- Unlock: `<UnlockIcon />`
- Settings: `<SettingsIcon />`
- Git: `<GitBranchIcon />`
- Save: `<SaveIcon />`
- Push: `<UploadCloudIcon />`
- Edit: `<PencilIcon />`

---

## Animations

### Micro-interactions
```css
/* Hover transitions */
--transition-fast: 150ms ease;
--transition-normal: 250ms ease;

/* Status pulse */
@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}
.pulse { animation: pulse 2s infinite; }
```

### Loading States
- Skeleton: `animate-pulse` with `bg-slate-700`
- Spinner: 20px circle, 2px border, rotating

---

## Accessibility

- Minimum contrast ratio: 4.5:1 (WCAG AA)
- Focus states: visible 2px ring
- Interactive elements: minimum 44x44px touch target
- Reduced motion: respect `prefers-reduced-motion`
- Keyboard navigation: all interactive elements focusable

---

## Dark/Light Mode Toggle

```javascript
// Toggle class on <html> element
document.documentElement.classList.toggle('dark');
```

CSS variable approach:
```css
:root { /* Light theme variables */ }
.dark { /* Dark theme variables */ }
```

---

## File Structure
```
docs/wireframes/
  dashboard.html        # Projects list view
  project-settings.html # Project configuration
  docs-editor.html      # Monaco editor view
```

---

*Last updated: 2026-01-03*
</file>

<file path="plans/260103-1818-ai-toolkit-sync-platform/phase-02-backend-core-services.md">
# Phase 02: Backend Core Services

---
phase: 02
title: Backend Core Services
status: pending
effort: 8h
parallelization: Can run in PARALLEL with Phase 03
depends_on: [phase-01]
blocks: [phase-05, phase-06]
---

## Overview

Implement NestJS controllers, services, and modules for Projects, Docs, Lock, and GitHub integration.

## File Ownership (Exclusive to This Phase)

```
apps/backend/src/
├── main.ts
├── app.module.ts
├── projects/
│   ├── projects.controller.ts
│   ├── projects.service.ts
│   ├── projects.module.ts
│   └── dto/
│       ├── create-project.dto.ts
│       ├── update-project.dto.ts
│       └── project-response.dto.ts
├── docs/
│   ├── docs.controller.ts
│   ├── docs.service.ts
│   ├── docs.module.ts
│   └── dto/
│       ├── update-doc.dto.ts
│       └── sync-docs.dto.ts
├── lock/
│   ├── lock.controller.ts
│   ├── lock.service.ts
│   └── lock.module.ts
├── github/
│   ├── github.service.ts
│   └── github.module.ts
└── common/
    ├── guards/
    │   └── api-key.guard.ts
    ├── filters/
    │   └── global-exception.filter.ts
    └── decorators/
        └── api-key.decorator.ts
```

## Implementation Steps

### Step 1: Application Bootstrap (30m)

**1.1 Create apps/backend/src/main.ts**

```typescript
import { NestFactory } from '@nestjs/core';
import { ValidationPipe, Logger } from '@nestjs/common';
import { AppModule } from './app.module';
import { GlobalExceptionFilter } from './common/filters/global-exception.filter';

async function bootstrap() {
  const app = await NestFactory.create(AppModule);
  const logger = new Logger('Bootstrap');

  // Global validation pipe
  app.useGlobalPipes(
    new ValidationPipe({
      transform: true,
      whitelist: true,
      forbidNonWhitelisted: true,
    }),
  );

  // Global exception filter
  app.useGlobalFilters(new GlobalExceptionFilter());

  // CORS for frontend
  app.enableCors({
    origin: process.env.FRONTEND_URL || 'http://localhost:3000',
    credentials: true,
  });

  // API prefix
  app.setGlobalPrefix('api');

  const port = process.env.PORT || 3001;
  await app.listen(port);
  logger.log(`Application running on port ${port}`);
}

bootstrap();
```

**1.2 Create apps/backend/src/app.module.ts**

```typescript
import { Module } from '@nestjs/common';
import { ConfigModule } from '@nestjs/config';
import { PrismaModule } from './prisma/prisma.module';
import { ProjectsModule } from './projects/projects.module';
import { DocsModule } from './docs/docs.module';
import { LockModule } from './lock/lock.module';
import { GitHubModule } from './github/github.module';

@Module({
  imports: [
    ConfigModule.forRoot({ isGlobal: true }),
    PrismaModule,
    ProjectsModule,
    DocsModule,
    LockModule,
    GitHubModule,
  ],
})
export class AppModule {}
```

### Step 2: Common Utilities (45m)

**2.1 Create apps/backend/src/common/filters/global-exception.filter.ts**

```typescript
import {
  ExceptionFilter,
  Catch,
  ArgumentsHost,
  HttpException,
  HttpStatus,
  Logger,
} from '@nestjs/common';
import { Request, Response } from 'express';

@Catch()
export class GlobalExceptionFilter implements ExceptionFilter {
  private readonly logger = new Logger('ExceptionFilter');

  catch(exception: unknown, host: ArgumentsHost) {
    const ctx = host.switchToHttp();
    const response = ctx.getResponse<Response>();
    const request = ctx.getRequest<Request>();

    const status =
      exception instanceof HttpException
        ? exception.getStatus()
        : HttpStatus.INTERNAL_SERVER_ERROR;

    const message =
      exception instanceof HttpException
        ? exception.message
        : 'Internal server error';

    this.logger.error(
      `${request.method} ${request.url} - ${status} - ${message}`,
      exception instanceof Error ? exception.stack : '',
    );

    response.status(status).json({
      statusCode: status,
      timestamp: new Date().toISOString(),
      path: request.url,
      message,
    });
  }
}
```

**2.2 Create apps/backend/src/common/guards/api-key.guard.ts**

```typescript
import {
  Injectable,
  CanActivate,
  ExecutionContext,
  UnauthorizedException,
} from '@nestjs/common';
import { PrismaService } from '../../prisma/prisma.service';

@Injectable()
export class ApiKeyGuard implements CanActivate {
  constructor(private prisma: PrismaService) {}

  async canActivate(context: ExecutionContext): Promise<boolean> {
    const request = context.switchToHttp().getRequest();
    const apiKey = request.headers['x-api-key'];

    if (!apiKey) {
      throw new UnauthorizedException('API key required');
    }

    const key = await this.prisma.apiKey.findUnique({
      where: { key: apiKey },
      include: { project: true },
    });

    if (!key || !key.isActive) {
      throw new UnauthorizedException('Invalid or inactive API key');
    }

    // Attach project to request for use in controllers
    request.project = key.project;
    return true;
  }
}
```

**2.3 Create apps/backend/src/common/decorators/api-key.decorator.ts**

```typescript
import { createParamDecorator, ExecutionContext } from '@nestjs/common';
import { Project } from '@prisma/client';

export const CurrentProject = createParamDecorator(
  (data: unknown, ctx: ExecutionContext): Project => {
    const request = ctx.switchToHttp().getRequest();
    return request.project;
  },
);
```

### Step 3: Projects Module (1.5h)

**3.1 Create apps/backend/src/projects/dto/create-project.dto.ts**

```typescript
import { IsString, IsNotEmpty, MaxLength, IsUrl, IsOptional } from 'class-validator';
import { Transform } from 'class-transformer';

export class CreateProjectDto {
  @IsString()
  @IsNotEmpty()
  @MaxLength(100)
  @Transform(({ value }) => value.trim())
  name: string;

  @IsUrl()
  @IsNotEmpty()
  repoUrl: string;

  @IsString()
  @IsNotEmpty()
  token: string; // GitHub PAT

  @IsString()
  @IsOptional()
  branch?: string = 'main';

  @IsString()
  @IsOptional()
  docsPath?: string = 'docs';
}
```

**3.2 Create apps/backend/src/projects/dto/update-project.dto.ts**

```typescript
import { PartialType } from '@nestjs/mapped-types';
import { CreateProjectDto } from './create-project.dto';

export class UpdateProjectDto extends PartialType(CreateProjectDto) {}
```

**3.3 Create apps/backend/src/projects/projects.service.ts**

```typescript
import { Injectable, NotFoundException } from '@nestjs/common';
import { PrismaService } from '../prisma/prisma.service';
import { CreateProjectDto } from './dto/create-project.dto';
import { UpdateProjectDto } from './dto/update-project.dto';
import { randomBytes, createHash } from 'crypto';

@Injectable()
export class ProjectsService {
  constructor(private prisma: PrismaService) {}

  async create(dto: CreateProjectDto) {
    return this.prisma.project.create({
      data: {
        name: dto.name,
        repoUrl: dto.repoUrl,
        token: dto.token, // TODO: encrypt in production
        branch: dto.branch || 'main',
        docsPath: dto.docsPath || 'docs',
      },
    });
  }

  async findAll() {
    return this.prisma.project.findMany({
      include: {
        locks: true,
        _count: { select: { docs: true, apiKeys: true } },
      },
      orderBy: { updatedAt: 'desc' },
    });
  }

  async findOne(id: string) {
    const project = await this.prisma.project.findUnique({
      where: { id },
      include: {
        docs: true,
        locks: true,
        apiKeys: { where: { isActive: true } },
      },
    });

    if (!project) {
      throw new NotFoundException(`Project ${id} not found`);
    }

    return project;
  }

  async update(id: string, dto: UpdateProjectDto) {
    await this.findOne(id); // Verify exists
    return this.prisma.project.update({
      where: { id },
      data: dto,
    });
  }

  async remove(id: string) {
    await this.findOne(id); // Verify exists
    return this.prisma.project.delete({ where: { id } });
  }

  async generateApiKey(projectId: string, name: string) {
    await this.findOne(projectId);

    const key = `sk_${randomBytes(32).toString('hex')}`;

    return this.prisma.apiKey.create({
      data: {
        projectId,
        key,
        name,
      },
    });
  }

  async revokeApiKey(keyId: string) {
    return this.prisma.apiKey.update({
      where: { id: keyId },
      data: { isActive: false },
    });
  }
}
```

**3.4 Create apps/backend/src/projects/projects.controller.ts**

```typescript
import {
  Controller,
  Get,
  Post,
  Put,
  Delete,
  Body,
  Param,
} from '@nestjs/common';
import { ProjectsService } from './projects.service';
import { CreateProjectDto } from './dto/create-project.dto';
import { UpdateProjectDto } from './dto/update-project.dto';

@Controller('projects')
export class ProjectsController {
  constructor(private readonly projectsService: ProjectsService) {}

  @Post()
  create(@Body() dto: CreateProjectDto) {
    return this.projectsService.create(dto);
  }

  @Get()
  findAll() {
    return this.projectsService.findAll();
  }

  @Get(':id')
  findOne(@Param('id') id: string) {
    return this.projectsService.findOne(id);
  }

  @Put(':id')
  update(@Param('id') id: string, @Body() dto: UpdateProjectDto) {
    return this.projectsService.update(id, dto);
  }

  @Delete(':id')
  remove(@Param('id') id: string) {
    return this.projectsService.remove(id);
  }

  @Post(':id/api-keys')
  generateApiKey(
    @Param('id') projectId: string,
    @Body('name') name: string,
  ) {
    return this.projectsService.generateApiKey(projectId, name);
  }

  @Delete('api-keys/:keyId')
  revokeApiKey(@Param('keyId') keyId: string) {
    return this.projectsService.revokeApiKey(keyId);
  }
}
```

**3.5 Create apps/backend/src/projects/projects.module.ts**

```typescript
import { Module } from '@nestjs/common';
import { ProjectsController } from './projects.controller';
import { ProjectsService } from './projects.service';

@Module({
  controllers: [ProjectsController],
  providers: [ProjectsService],
  exports: [ProjectsService],
})
export class ProjectsModule {}
```

### Step 4: GitHub Service (1h)

**4.1 Create apps/backend/src/github/github.service.ts**

```typescript
import { Injectable, Logger } from '@nestjs/common';
import { Octokit } from '@octokit/rest';
import { createHash } from 'crypto';

export interface DocFile {
  fileName: string;
  content: string;
  sha?: string | null;
}

@Injectable()
export class GitHubService {
  private readonly logger = new Logger('GitHubService');

  private createClient(token: string): Octokit {
    return new Octokit({ auth: token });
  }

  private parseRepoUrl(repoUrl: string): { owner: string; repo: string } {
    const match = repoUrl.match(/github\.com[/:]([^/]+)\/([^/.]+)/);
    if (!match) {
      throw new Error(`Invalid GitHub URL: ${repoUrl}`);
    }
    return { owner: match[1], repo: match[2] };
  }

  async getDocFile(
    token: string,
    repoUrl: string,
    docsPath: string,
    fileName: string,
    branch = 'main',
  ): Promise<DocFile> {
    const octokit = this.createClient(token);
    const { owner, repo } = this.parseRepoUrl(repoUrl);
    const path = `${docsPath}/${fileName}`;

    try {
      const { data } = await octokit.repos.getContent({
        owner,
        repo,
        path,
        ref: branch,
      });

      if (Array.isArray(data) || data.type !== 'file') {
        throw new Error(`${path} is not a file`);
      }

      const content = Buffer.from(data.content, 'base64').toString('utf-8');
      return {
        fileName,
        content,
        sha: data.sha,
      };
    } catch (error) {
      this.logger.error(`Failed to get ${path}: ${error.message}`);
      throw error;
    }
  }

  async getAllDocs(
    token: string,
    repoUrl: string,
    docsPath: string,
    branch = 'main',
  ): Promise<DocFile[]> {
    const octokit = this.createClient(token);
    const { owner, repo } = this.parseRepoUrl(repoUrl);

    try {
      const { data } = await octokit.repos.getContent({
        owner,
        repo,
        path: docsPath,
        ref: branch,
      });

      if (!Array.isArray(data)) {
        throw new Error(`${docsPath} is not a directory`);
      }

      const mdFiles = data.filter(
        (item) => item.type === 'file' && item.name.endsWith('.md'),
      );

      const docs: DocFile[] = [];
      for (const file of mdFiles) {
        const doc = await this.getDocFile(
          token,
          repoUrl,
          docsPath,
          file.name,
          branch,
        );
        docs.push(doc);
      }

      return docs;
    } catch (error) {
      this.logger.error(`Failed to list ${docsPath}: ${error.message}`);
      throw error;
    }
  }

  async pushDoc(
    token: string,
    repoUrl: string,
    docsPath: string,
    fileName: string,
    content: string,
    message: string,
    branch = 'main',
    sha?: string,
  ): Promise<void> {
    const octokit = this.createClient(token);
    const { owner, repo } = this.parseRepoUrl(repoUrl);
    const path = `${docsPath}/${fileName}`;

    // Get current SHA if not provided
    let currentSha = sha;
    if (!currentSha) {
      try {
        const { data } = await octokit.repos.getContent({
          owner,
          repo,
          path,
          ref: branch,
        });
        if (!Array.isArray(data)) {
          currentSha = data.sha;
        }
      } catch {
        // File doesn't exist, that's fine for new files
      }
    }

    await octokit.repos.createOrUpdateFileContents({
      owner,
      repo,
      path,
      message,
      content: Buffer.from(content).toString('base64'),
      branch,
      sha: currentSha,
    });

    this.logger.log(`Pushed ${path} to ${owner}/${repo}`);
  }

  computeHash(content: string): string {
    return createHash('md5').update(content).digest('hex');
  }
}
```

**4.2 Create apps/backend/src/github/github.module.ts**

```typescript
import { Module } from '@nestjs/common';
import { GitHubService } from './github.service';

@Module({
  providers: [GitHubService],
  exports: [GitHubService],
})
export class GitHubModule {}
```

### Step 5: Docs Module (1.5h)

**5.1 Create apps/backend/src/docs/dto/update-doc.dto.ts**

```typescript
import { IsString, IsNotEmpty } from 'class-validator';

export class UpdateDocDto {
  @IsString()
  @IsNotEmpty()
  content: string;
}
```

**5.2 Create apps/backend/src/docs/docs.service.ts**

```typescript
import { Injectable, NotFoundException } from '@nestjs/common';
import { PrismaService } from '../prisma/prisma.service';
import { GitHubService } from '../github/github.service';
import { UpdateDocDto } from './dto/update-doc.dto';

@Injectable()
export class DocsService {
  constructor(
    private prisma: PrismaService,
    private github: GitHubService,
  ) {}

  async findAllByProject(projectId: string) {
    return this.prisma.doc.findMany({
      where: { projectId },
      orderBy: { fileName: 'asc' },
    });
  }

  async findOne(projectId: string, fileName: string) {
    const doc = await this.prisma.doc.findUnique({
      where: {
        projectId_fileName: { projectId, fileName },
      },
    });

    if (!doc) {
      throw new NotFoundException(`Doc ${fileName} not found`);
    }

    return doc;
  }

  async update(projectId: string, fileName: string, dto: UpdateDocDto) {
    const hash = this.github.computeHash(dto.content);

    return this.prisma.doc.upsert({
      where: {
        projectId_fileName: { projectId, fileName },
      },
      update: {
        content: dto.content,
        hash,
        version: { increment: 1 },
      },
      create: {
        projectId,
        fileName,
        content: dto.content,
        hash,
      },
    });
  }

  async syncFromGitHub(projectId: string) {
    const project = await this.prisma.project.findUnique({
      where: { id: projectId },
    });

    if (!project) {
      throw new NotFoundException(`Project ${projectId} not found`);
    }

    const remoteDocs = await this.github.getAllDocs(
      project.token,
      project.repoUrl,
      project.docsPath,
      project.branch,
    );

    const results = [];
    for (const doc of remoteDocs) {
      const hash = this.github.computeHash(doc.content);
      const result = await this.prisma.doc.upsert({
        where: {
          projectId_fileName: { projectId, fileName: doc.fileName },
        },
        update: {
          content: doc.content,
          hash,
        },
        create: {
          projectId,
          fileName: doc.fileName,
          content: doc.content,
          hash,
        },
      });
      results.push(result);
    }

    return results;
  }

  async pushToGitHub(projectId: string, fileName: string) {
    const project = await this.prisma.project.findUnique({
      where: { id: projectId },
    });

    if (!project) {
      throw new NotFoundException(`Project ${projectId} not found`);
    }

    const doc = await this.findOne(projectId, fileName);

    await this.github.pushDoc(
      project.token,
      project.repoUrl,
      project.docsPath,
      fileName,
      doc.content,
      `Update ${fileName} via AI Toolkit Platform`,
      project.branch,
    );

    return { success: true };
  }

  async getDocsHash(projectId: string): Promise<string> {
    const docs = await this.findAllByProject(projectId);
    const combinedHash = docs.map((d) => d.hash).sort().join('');
    return this.github.computeHash(combinedHash);
  }
}
```

**5.3 Create apps/backend/src/docs/docs.controller.ts**

```typescript
import {
  Controller,
  Get,
  Put,
  Post,
  Body,
  Param,
} from '@nestjs/common';
import { DocsService } from './docs.service';
import { UpdateDocDto } from './dto/update-doc.dto';

@Controller('projects/:projectId/docs')
export class DocsController {
  constructor(private readonly docsService: DocsService) {}

  @Get()
  findAll(@Param('projectId') projectId: string) {
    return this.docsService.findAllByProject(projectId);
  }

  @Get(':fileName')
  findOne(
    @Param('projectId') projectId: string,
    @Param('fileName') fileName: string,
  ) {
    return this.docsService.findOne(projectId, fileName);
  }

  @Put(':fileName')
  update(
    @Param('projectId') projectId: string,
    @Param('fileName') fileName: string,
    @Body() dto: UpdateDocDto,
  ) {
    return this.docsService.update(projectId, fileName, dto);
  }

  @Post('sync')
  syncFromGitHub(@Param('projectId') projectId: string) {
    return this.docsService.syncFromGitHub(projectId);
  }

  @Post(':fileName/push')
  pushToGitHub(
    @Param('projectId') projectId: string,
    @Param('fileName') fileName: string,
  ) {
    return this.docsService.pushToGitHub(projectId, fileName);
  }
}
```

**5.4 Create apps/backend/src/docs/docs.module.ts**

```typescript
import { Module } from '@nestjs/common';
import { DocsController } from './docs.controller';
import { DocsService } from './docs.service';
import { GitHubModule } from '../github/github.module';

@Module({
  imports: [GitHubModule],
  controllers: [DocsController],
  providers: [DocsService],
  exports: [DocsService],
})
export class DocsModule {}
```

### Step 6: Lock Module (1h)

**6.1 Create apps/backend/src/lock/lock.service.ts**

```typescript
import {
  Injectable,
  ConflictException,
  NotFoundException,
} from '@nestjs/common';
import { PrismaService } from '../prisma/prisma.service';

const DEFAULT_LOCK_TTL_MINUTES = 30;

@Injectable()
export class LockService {
  constructor(private prisma: PrismaService) {}

  async getLock(projectId: string) {
    const lock = await this.prisma.lock.findUnique({
      where: { projectId },
    });

    // Check if lock has expired
    if (lock?.expiresAt && lock.expiresAt < new Date()) {
      await this.releaseLock(projectId);
      return null;
    }

    return lock;
  }

  async acquireLock(projectId: string, lockedBy: string, reason?: string) {
    // Check for existing lock
    const existingLock = await this.getLock(projectId);
    if (existingLock) {
      throw new ConflictException({
        message: 'Project is already locked',
        lockedBy: existingLock.lockedBy,
        lockedAt: existingLock.lockedAt,
      });
    }

    // Verify project exists
    const project = await this.prisma.project.findUnique({
      where: { id: projectId },
    });
    if (!project) {
      throw new NotFoundException(`Project ${projectId} not found`);
    }

    // Create lock with TTL
    const expiresAt = new Date();
    expiresAt.setMinutes(expiresAt.getMinutes() + DEFAULT_LOCK_TTL_MINUTES);

    return this.prisma.lock.create({
      data: {
        projectId,
        lockedBy,
        reason,
        expiresAt,
      },
    });
  }

  async releaseLock(projectId: string) {
    const lock = await this.prisma.lock.findUnique({
      where: { projectId },
    });

    if (!lock) {
      return { released: false, message: 'No lock exists' };
    }

    await this.prisma.lock.delete({
      where: { projectId },
    });

    return { released: true };
  }

  async extendLock(projectId: string, minutes = DEFAULT_LOCK_TTL_MINUTES) {
    const lock = await this.getLock(projectId);
    if (!lock) {
      throw new NotFoundException('No active lock found');
    }

    const expiresAt = new Date();
    expiresAt.setMinutes(expiresAt.getMinutes() + minutes);

    return this.prisma.lock.update({
      where: { projectId },
      data: { expiresAt },
    });
  }

  async isLocked(projectId: string): Promise<boolean> {
    const lock = await this.getLock(projectId);
    return lock !== null;
  }
}
```

**6.2 Create apps/backend/src/lock/lock.controller.ts**

```typescript
import {
  Controller,
  Get,
  Post,
  Delete,
  Param,
  Body,
} from '@nestjs/common';
import { LockService } from './lock.service';

@Controller('projects/:projectId/lock')
export class LockController {
  constructor(private readonly lockService: LockService) {}

  @Get()
  getLock(@Param('projectId') projectId: string) {
    return this.lockService.getLock(projectId);
  }

  @Post()
  acquireLock(
    @Param('projectId') projectId: string,
    @Body('lockedBy') lockedBy: string,
    @Body('reason') reason?: string,
  ) {
    return this.lockService.acquireLock(projectId, lockedBy, reason);
  }

  @Delete()
  releaseLock(@Param('projectId') projectId: string) {
    return this.lockService.releaseLock(projectId);
  }

  @Post('extend')
  extendLock(
    @Param('projectId') projectId: string,
    @Body('minutes') minutes?: number,
  ) {
    return this.lockService.extendLock(projectId, minutes);
  }
}
```

**6.3 Create apps/backend/src/lock/lock.module.ts**

```typescript
import { Module } from '@nestjs/common';
import { LockController } from './lock.controller';
import { LockService } from './lock.service';

@Module({
  controllers: [LockController],
  providers: [LockService],
  exports: [LockService],
})
export class LockModule {}
```

---

## Verification Steps

```bash
# Start database
docker-compose up -d

# Start backend in dev mode
cd apps/backend && pnpm dev

# Test endpoints
curl http://localhost:3001/api/projects
curl -X POST http://localhost:3001/api/projects \
  -H "Content-Type: application/json" \
  -d '{"name":"Test","repoUrl":"https://github.com/test/repo","token":"ghp_xxx"}'
```

## Success Criteria

- [ ] `pnpm dev` starts NestJS without errors
- [ ] `GET /api/projects` returns empty array
- [ ] `POST /api/projects` creates project
- [ ] `POST /api/projects/:id/lock` acquires lock
- [ ] `DELETE /api/projects/:id/lock` releases lock
- [ ] `POST /api/projects/:id/api-keys` generates API key
- [ ] GlobalExceptionFilter handles errors properly

## Handoff to Phase 05

**Phase 05 depends on:**
- LockService exported for WebSocket gateway
- DocsService exported for hook API
- ApiKeyGuard ready for hook authentication

---

## Conflict Prevention

This phase owns ALL backend service files. Phase 05 will add:
- `websocket/` module (new directory)
- `hook/` module (new directory)

Phase 02 must NOT touch those directories.
</file>

<file path="plans/260103-1818-ai-toolkit-sync-platform/phase-03-frontend-foundation.md">
# Phase 03: Frontend Foundation

---
phase: 03
title: Frontend Foundation
status: pending
effort: 8h
parallelization: Can run in PARALLEL with Phase 02
depends_on: [phase-01]
blocks: [phase-04, phase-06]
---

## Overview

Set up Next.js 14 App Router, Shadcn/ui components, TanStack Query, Zustand stores, and base layout.

## File Ownership (Exclusive to This Phase)

```
apps/frontend/
├── app/
│   ├── layout.tsx
│   ├── page.tsx
│   └── globals.css
├── lib/
│   ├── providers.tsx
│   ├── query-client.ts
│   ├── api.ts
│   └── utils.ts
├── components/ui/
│   ├── button.tsx
│   ├── card.tsx
│   ├── dialog.tsx
│   ├── input.tsx
│   ├── label.tsx
│   ├── select.tsx
│   ├── badge.tsx
│   └── skeleton.tsx
├── stores/
│   └── ui-store.ts
├── types/
│   └── index.ts
├── tailwind.config.ts
├── postcss.config.js
├── next.config.js
└── components.json
```

## Implementation Steps

### Step 1: Next.js Configuration (30m)

**1.1 Create apps/frontend/next.config.js**

```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  reactStrictMode: true,
  transpilePackages: [],
  async rewrites() {
    return [
      {
        source: '/api/:path*',
        destination: `${process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001'}/api/:path*`,
      },
    ];
  },
};

module.exports = nextConfig;
```

**1.2 Create apps/frontend/tailwind.config.ts**

```typescript
import type { Config } from 'tailwindcss';

const config: Config = {
  darkMode: 'class',
  content: [
    './app/**/*.{js,ts,jsx,tsx,mdx}',
    './components/**/*.{js,ts,jsx,tsx,mdx}',
    './lib/**/*.{js,ts,jsx,tsx,mdx}',
  ],
  theme: {
    extend: {
      fontFamily: {
        sans: ['Inter', 'system-ui', 'sans-serif'],
        mono: ['JetBrains Mono', 'monospace'],
      },
      colors: {
        slate: {
          850: '#1E293B',
          950: '#0F172A',
        },
      },
    },
  },
  plugins: [],
};

export default config;
```

**1.3 Create apps/frontend/postcss.config.js**

```javascript
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
};
```

### Step 2: Global Styles (30m)

**2.1 Create apps/frontend/app/globals.css**

```css
@tailwind base;
@tailwind components;
@tailwind utilities;

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 221.2 83.2% 53.3%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 221.2 83.2% 53.3%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 7%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 7%;
    --popover-foreground: 210 40% 98%;
    --primary: 217.2 91.2% 59.8%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 224.3 76.3% 48%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* Custom scrollbar for dark theme */
.dark ::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.dark ::-webkit-scrollbar-track {
  background: #1e293b;
}

.dark ::-webkit-scrollbar-thumb {
  background: #475569;
  border-radius: 4px;
}

.dark ::-webkit-scrollbar-thumb:hover {
  background: #64748b;
}

/* Pulse animation for lock status */
@keyframes pulse-dot {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.7; transform: scale(1.1); }
}

.pulse-dot {
  animation: pulse-dot 2s ease-in-out infinite;
}
```

### Step 3: Utility Functions (30m)

**3.1 Create apps/frontend/lib/utils.ts**

```typescript
import { type ClassValue, clsx } from 'clsx';
import { twMerge } from 'tailwind-merge';

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}

export function formatRelativeTime(date: Date | string): string {
  const now = new Date();
  const target = new Date(date);
  const diffMs = now.getTime() - target.getTime();
  const diffMins = Math.floor(diffMs / 60000);
  const diffHours = Math.floor(diffMins / 60);
  const diffDays = Math.floor(diffHours / 24);

  if (diffMins < 1) return 'just now';
  if (diffMins < 60) return `${diffMins} min ago`;
  if (diffHours < 24) return `${diffHours} hours ago`;
  return `${diffDays} days ago`;
}

export function debounce<T extends (...args: unknown[]) => unknown>(
  fn: T,
  delay: number,
): (...args: Parameters<T>) => void {
  let timeoutId: ReturnType<typeof setTimeout>;
  return (...args: Parameters<T>) => {
    clearTimeout(timeoutId);
    timeoutId = setTimeout(() => fn(...args), delay);
  };
}
```

**3.2 Create apps/frontend/lib/api.ts**

```typescript
const API_BASE = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001';

export async function fetcher<T>(
  endpoint: string,
  options?: RequestInit,
): Promise<T> {
  const url = `${API_BASE}/api${endpoint}`;

  const res = await fetch(url, {
    headers: {
      'Content-Type': 'application/json',
      ...options?.headers,
    },
    ...options,
  });

  if (!res.ok) {
    const error = await res.json().catch(() => ({ message: 'Request failed' }));
    throw new Error(error.message || `HTTP ${res.status}`);
  }

  return res.json();
}

// Type-safe API methods
export const api = {
  // Projects
  getProjects: () => fetcher<Project[]>('/projects'),
  getProject: (id: string) => fetcher<Project>(`/projects/${id}`),
  createProject: (data: CreateProjectData) =>
    fetcher<Project>('/projects', {
      method: 'POST',
      body: JSON.stringify(data),
    }),
  updateProject: (id: string, data: Partial<CreateProjectData>) =>
    fetcher<Project>(`/projects/${id}`, {
      method: 'PUT',
      body: JSON.stringify(data),
    }),
  deleteProject: (id: string) =>
    fetcher<void>(`/projects/${id}`, { method: 'DELETE' }),

  // Docs
  getDocs: (projectId: string) => fetcher<Doc[]>(`/projects/${projectId}/docs`),
  getDoc: (projectId: string, fileName: string) =>
    fetcher<Doc>(`/projects/${projectId}/docs/${fileName}`),
  updateDoc: (projectId: string, fileName: string, content: string) =>
    fetcher<Doc>(`/projects/${projectId}/docs/${fileName}`, {
      method: 'PUT',
      body: JSON.stringify({ content }),
    }),
  syncDocs: (projectId: string) =>
    fetcher<Doc[]>(`/projects/${projectId}/docs/sync`, { method: 'POST' }),
  pushDoc: (projectId: string, fileName: string) =>
    fetcher<{ success: boolean }>(`/projects/${projectId}/docs/${fileName}/push`, {
      method: 'POST',
    }),

  // Lock
  getLock: (projectId: string) => fetcher<Lock | null>(`/projects/${projectId}/lock`),
  acquireLock: (projectId: string, lockedBy: string, reason?: string) =>
    fetcher<Lock>(`/projects/${projectId}/lock`, {
      method: 'POST',
      body: JSON.stringify({ lockedBy, reason }),
    }),
  releaseLock: (projectId: string) =>
    fetcher<{ released: boolean }>(`/projects/${projectId}/lock`, {
      method: 'DELETE',
    }),

  // API Keys
  generateApiKey: (projectId: string, name: string) =>
    fetcher<ApiKey>(`/projects/${projectId}/api-keys`, {
      method: 'POST',
      body: JSON.stringify({ name }),
    }),
};

// Types (shared with backend)
export interface Project {
  id: string;
  name: string;
  repoUrl: string;
  branch: string;
  docsPath: string;
  createdAt: string;
  updatedAt: string;
  locks?: Lock[];
  docs?: Doc[];
  apiKeys?: ApiKey[];
  _count?: { docs: number; apiKeys: number };
}

export interface Doc {
  id: string;
  projectId: string;
  fileName: string;
  content: string;
  hash: string;
  version: number;
  createdAt: string;
  updatedAt: string;
}

export interface Lock {
  id: string;
  projectId: string;
  lockedBy: string;
  lockedAt: string;
  expiresAt?: string;
  reason?: string;
}

export interface ApiKey {
  id: string;
  projectId: string;
  key: string;
  name: string;
  isActive: boolean;
  createdAt: string;
}

export interface CreateProjectData {
  name: string;
  repoUrl: string;
  token: string;
  branch?: string;
  docsPath?: string;
}
```

### Step 4: Query Client & Providers (45m)

**4.1 Create apps/frontend/lib/query-client.ts**

```typescript
import { QueryClient } from '@tanstack/react-query';

export function makeQueryClient() {
  return new QueryClient({
    defaultOptions: {
      queries: {
        staleTime: 60 * 1000, // 1 minute
        refetchOnWindowFocus: false,
      },
    },
  });
}

let browserQueryClient: QueryClient | undefined;

export function getQueryClient() {
  if (typeof window === 'undefined') {
    // Server: always make a new query client
    return makeQueryClient();
  }
  // Browser: reuse client
  if (!browserQueryClient) {
    browserQueryClient = makeQueryClient();
  }
  return browserQueryClient;
}
```

**4.2 Create apps/frontend/lib/providers.tsx**

```typescript
'use client';

import { QueryClientProvider } from '@tanstack/react-query';
import { ReactQueryDevtools } from '@tanstack/react-query-devtools';
import { getQueryClient } from './query-client';

export function Providers({ children }: { children: React.ReactNode }) {
  const queryClient = getQueryClient();

  return (
    <QueryClientProvider client={queryClient}>
      {children}
      <ReactQueryDevtools initialIsOpen={false} />
    </QueryClientProvider>
  );
}
```

### Step 5: Zustand UI Store (30m)

**5.1 Create apps/frontend/stores/ui-store.ts**

```typescript
import { create } from 'zustand';

interface UIState {
  // Sidebar
  sidebarOpen: boolean;
  toggleSidebar: () => void;
  setSidebarOpen: (open: boolean) => void;

  // Modals
  activeModal: string | null;
  openModal: (modal: string) => void;
  closeModal: () => void;

  // Editor
  editorDirty: boolean;
  setEditorDirty: (dirty: boolean) => void;

  // Theme
  theme: 'light' | 'dark';
  toggleTheme: () => void;
}

export const useUIStore = create<UIState>((set) => ({
  // Sidebar
  sidebarOpen: true,
  toggleSidebar: () => set((state) => ({ sidebarOpen: !state.sidebarOpen })),
  setSidebarOpen: (open) => set({ sidebarOpen: open }),

  // Modals
  activeModal: null,
  openModal: (modal) => set({ activeModal: modal }),
  closeModal: () => set({ activeModal: null }),

  // Editor
  editorDirty: false,
  setEditorDirty: (dirty) => set({ editorDirty: dirty }),

  // Theme
  theme: 'dark',
  toggleTheme: () =>
    set((state) => ({
      theme: state.theme === 'dark' ? 'light' : 'dark',
    })),
}));
```

### Step 6: Type Definitions (15m)

**6.1 Create apps/frontend/types/index.ts**

```typescript
// Re-export API types
export type {
  Project,
  Doc,
  Lock,
  ApiKey,
  CreateProjectData,
} from '@/lib/api';

// UI-specific types
export interface NavItem {
  title: string;
  href: string;
  icon: React.ComponentType<{ className?: string }>;
  active?: boolean;
}

export interface BreadcrumbItem {
  title: string;
  href?: string;
}
```

### Step 7: Shadcn/ui Components (2h)

**7.1 Create apps/frontend/components.json**

```json
{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "default",
  "rsc": true,
  "tsx": true,
  "tailwind": {
    "config": "tailwind.config.ts",
    "css": "app/globals.css",
    "baseColor": "slate",
    "cssVariables": true,
    "prefix": ""
  },
  "aliases": {
    "components": "@/components",
    "utils": "@/lib/utils"
  }
}
```

**7.2 Create apps/frontend/components/ui/button.tsx**

```typescript
import * as React from 'react';
import { Slot } from '@radix-ui/react-slot';
import { cva, type VariantProps } from 'class-variance-authority';
import { cn } from '@/lib/utils';

const buttonVariants = cva(
  'inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50',
  {
    variants: {
      variant: {
        default: 'bg-blue-500 text-white hover:bg-blue-600',
        destructive: 'bg-red-500 text-white hover:bg-red-600',
        outline: 'border border-slate-600 bg-transparent text-slate-300 hover:bg-slate-700 hover:text-white',
        secondary: 'bg-slate-700 text-slate-200 hover:bg-slate-600',
        ghost: 'hover:bg-slate-800 hover:text-white',
        link: 'text-blue-400 underline-offset-4 hover:underline',
      },
      size: {
        default: 'h-10 px-4 py-2',
        sm: 'h-9 px-3',
        lg: 'h-11 px-8',
        icon: 'h-10 w-10',
      },
    },
    defaultVariants: {
      variant: 'default',
      size: 'default',
    },
  },
);

export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {
  asChild?: boolean;
}

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant, size, asChild = false, ...props }, ref) => {
    const Comp = asChild ? Slot : 'button';
    return (
      <Comp
        className={cn(buttonVariants({ variant, size, className }))}
        ref={ref}
        {...props}
      />
    );
  },
);
Button.displayName = 'Button';

export { Button, buttonVariants };
```

**7.3 Create apps/frontend/components/ui/card.tsx**

```typescript
import * as React from 'react';
import { cn } from '@/lib/utils';

const Card = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn(
      'rounded-xl border border-slate-700 bg-slate-850 text-slate-100',
      className,
    )}
    {...props}
  />
));
Card.displayName = 'Card';

const CardHeader = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn('flex flex-col space-y-1.5 p-6', className)}
    {...props}
  />
));
CardHeader.displayName = 'CardHeader';

const CardTitle = React.forwardRef<
  HTMLParagraphElement,
  React.HTMLAttributes<HTMLHeadingElement>
>(({ className, ...props }, ref) => (
  <h3
    ref={ref}
    className={cn('font-semibold leading-none tracking-tight', className)}
    {...props}
  />
));
CardTitle.displayName = 'CardTitle';

const CardDescription = React.forwardRef<
  HTMLParagraphElement,
  React.HTMLAttributes<HTMLParagraphElement>
>(({ className, ...props }, ref) => (
  <p
    ref={ref}
    className={cn('text-sm text-slate-400', className)}
    {...props}
  />
));
CardDescription.displayName = 'CardDescription';

const CardContent = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div ref={ref} className={cn('p-6 pt-0', className)} {...props} />
));
CardContent.displayName = 'CardContent';

const CardFooter = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn('flex items-center p-6 pt-0', className)}
    {...props}
  />
));
CardFooter.displayName = 'CardFooter';

export { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };
```

**7.4 Create apps/frontend/components/ui/input.tsx**

```typescript
import * as React from 'react';
import { cn } from '@/lib/utils';

export interface InputProps
  extends React.InputHTMLAttributes<HTMLInputElement> {}

const Input = React.forwardRef<HTMLInputElement, InputProps>(
  ({ className, type, ...props }, ref) => {
    return (
      <input
        type={type}
        className={cn(
          'flex h-10 w-full rounded-lg border border-slate-600 bg-slate-950 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 disabled:cursor-not-allowed disabled:opacity-50',
          className,
        )}
        ref={ref}
        {...props}
      />
    );
  },
);
Input.displayName = 'Input';

export { Input };
```

**7.5 Create apps/frontend/components/ui/label.tsx**

```typescript
import * as React from 'react';
import { cn } from '@/lib/utils';

export interface LabelProps
  extends React.LabelHTMLAttributes<HTMLLabelElement> {}

const Label = React.forwardRef<HTMLLabelElement, LabelProps>(
  ({ className, ...props }, ref) => (
    <label
      ref={ref}
      className={cn(
        'text-sm font-medium text-slate-300 leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70',
        className,
      )}
      {...props}
    />
  ),
);
Label.displayName = 'Label';

export { Label };
```

**7.6 Create apps/frontend/components/ui/badge.tsx**

```typescript
import * as React from 'react';
import { cva, type VariantProps } from 'class-variance-authority';
import { cn } from '@/lib/utils';

const badgeVariants = cva(
  'inline-flex items-center gap-1.5 rounded-full px-2.5 py-1 text-xs font-medium',
  {
    variants: {
      variant: {
        default: 'bg-slate-700 text-slate-200',
        success: 'bg-green-500/10 text-green-400',
        destructive: 'bg-red-500/10 text-red-400',
        warning: 'bg-amber-500/10 text-amber-400',
        outline: 'border border-slate-600 text-slate-300',
      },
    },
    defaultVariants: {
      variant: 'default',
    },
  },
);

export interface BadgeProps
  extends React.HTMLAttributes<HTMLDivElement>,
    VariantProps<typeof badgeVariants> {}

function Badge({ className, variant, ...props }: BadgeProps) {
  return (
    <div className={cn(badgeVariants({ variant }), className)} {...props} />
  );
}

export { Badge, badgeVariants };
```

**7.7 Create apps/frontend/components/ui/skeleton.tsx**

```typescript
import { cn } from '@/lib/utils';

function Skeleton({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) {
  return (
    <div
      className={cn('animate-pulse rounded-md bg-slate-700', className)}
      {...props}
    />
  );
}

export { Skeleton };
```

### Step 8: Root Layout & Home Page (45m)

**8.1 Create apps/frontend/app/layout.tsx**

```typescript
import type { Metadata } from 'next';
import { Providers } from '@/lib/providers';
import './globals.css';

export const metadata: Metadata = {
  title: 'AI Toolkit Sync Platform',
  description: 'Centralized documentation management for AI-assisted development teams',
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="en" className="dark">
      <body className="min-h-screen bg-slate-950 font-sans antialiased">
        <Providers>{children}</Providers>
      </body>
    </html>
  );
}
```

**8.2 Create apps/frontend/app/page.tsx**

```typescript
import { redirect } from 'next/navigation';

export default function HomePage() {
  // Redirect to dashboard
  redirect('/projects');
}
```

---

## Verification Steps

```bash
# Install dependencies
cd apps/frontend && pnpm install

# Add required dependencies for shadcn/ui
pnpm add clsx tailwind-merge class-variance-authority @radix-ui/react-slot

# Start development server
pnpm dev
```

## Success Criteria

- [ ] `pnpm dev` starts Next.js without errors
- [ ] http://localhost:3000 redirects to /projects
- [ ] Dark theme applied correctly
- [ ] TanStack Query DevTools visible
- [ ] No TypeScript errors
- [ ] Tailwind classes compiled

## Handoff to Phase 04

**Phase 04 depends on:**
- `lib/api.ts` for data fetching
- `lib/providers.tsx` for query context
- `stores/ui-store.ts` for UI state
- `components/ui/*` for base components

---

## Conflict Prevention

This phase owns ALL foundation files. Phase 04 will add:
- `app/(dashboard)/` route group (new directory)
- `components/` feature components (new files, not in ui/)
- `hooks/` custom hooks (new directory)

Phase 03 must NOT touch those directories.
</file>

<file path="plans/260103-1818-ai-toolkit-sync-platform/phase-04-frontend-features.md">
# Phase 04: Frontend Features

---
phase: 04
title: Frontend Features
status: pending
effort: 8h
parallelization: Can run in PARALLEL with Phase 05
depends_on: [phase-03]
blocks: [phase-06]
---

## Overview

Implement dashboard pages, project cards, Monaco editor, lock status components, and custom hooks.

## File Ownership (Exclusive to This Phase)

```
apps/frontend/
├── app/(dashboard)/
│   ├── layout.tsx
│   ├── projects/
│   │   ├── page.tsx
│   │   ├── loading.tsx
│   │   └── [id]/
│   │       ├── page.tsx
│   │       └── settings/
│   │           └── page.tsx
│   └── editor/
│       └── [projectId]/
│           └── [docId]/
│               └── page.tsx
├── components/
│   ├── sidebar.tsx
│   ├── header.tsx
│   ├── project-card.tsx
│   ├── create-project-dialog.tsx
│   ├── lock-status.tsx
│   ├── lock-banner.tsx
│   ├── monaco-editor.tsx
│   ├── markdown-preview.tsx
│   └── file-tree.tsx
└── hooks/
    ├── use-projects.ts
    ├── use-docs.ts
    ├── use-lock.ts
    └── use-websocket.ts
```

## Implementation Steps

### Step 1: Custom Hooks (1h)

**1.1 Create apps/frontend/hooks/use-projects.ts**

```typescript
'use client';

import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';
import { api, type Project, type CreateProjectData } from '@/lib/api';

export function useProjects() {
  return useQuery({
    queryKey: ['projects'],
    queryFn: api.getProjects,
  });
}

export function useProject(id: string) {
  return useQuery({
    queryKey: ['projects', id],
    queryFn: () => api.getProject(id),
    enabled: !!id,
  });
}

export function useCreateProject() {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: (data: CreateProjectData) => api.createProject(data),
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['projects'] });
    },
  });
}

export function useUpdateProject(id: string) {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: (data: Partial<CreateProjectData>) => api.updateProject(id, data),
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['projects'] });
      queryClient.invalidateQueries({ queryKey: ['projects', id] });
    },
  });
}

export function useDeleteProject() {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: (id: string) => api.deleteProject(id),
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['projects'] });
    },
  });
}
```

**1.2 Create apps/frontend/hooks/use-docs.ts**

```typescript
'use client';

import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';
import { api, type Doc } from '@/lib/api';

export function useDocs(projectId: string) {
  return useQuery({
    queryKey: ['docs', projectId],
    queryFn: () => api.getDocs(projectId),
    enabled: !!projectId,
  });
}

export function useDoc(projectId: string, fileName: string) {
  return useQuery({
    queryKey: ['docs', projectId, fileName],
    queryFn: () => api.getDoc(projectId, fileName),
    enabled: !!projectId && !!fileName,
  });
}

export function useUpdateDoc(projectId: string, fileName: string) {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: (content: string) => api.updateDoc(projectId, fileName, content),
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['docs', projectId] });
      queryClient.invalidateQueries({ queryKey: ['docs', projectId, fileName] });
    },
  });
}

export function useSyncDocs(projectId: string) {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: () => api.syncDocs(projectId),
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['docs', projectId] });
    },
  });
}

export function usePushDoc(projectId: string, fileName: string) {
  return useMutation({
    mutationFn: () => api.pushDoc(projectId, fileName),
  });
}
```

**1.3 Create apps/frontend/hooks/use-lock.ts**

```typescript
'use client';

import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';
import { api, type Lock } from '@/lib/api';

export function useLock(projectId: string) {
  return useQuery({
    queryKey: ['lock', projectId],
    queryFn: () => api.getLock(projectId),
    enabled: !!projectId,
    refetchInterval: 10000, // Poll every 10 seconds
  });
}

export function useAcquireLock(projectId: string) {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: ({ lockedBy, reason }: { lockedBy: string; reason?: string }) =>
      api.acquireLock(projectId, lockedBy, reason),
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['lock', projectId] });
      queryClient.invalidateQueries({ queryKey: ['projects'] });
    },
  });
}

export function useReleaseLock(projectId: string) {
  const queryClient = useQueryClient();

  return useMutation({
    mutationFn: () => api.releaseLock(projectId),
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['lock', projectId] });
      queryClient.invalidateQueries({ queryKey: ['projects'] });
    },
  });
}
```

**1.4 Create apps/frontend/hooks/use-websocket.ts**

```typescript
'use client';

import { useEffect, useState, useCallback, useRef } from 'react';
import { useQueryClient } from '@tanstack/react-query';

type WebSocketStatus = 'connecting' | 'connected' | 'disconnected';

interface LockEvent {
  type: 'lock:acquired' | 'lock:released';
  projectId: string;
  lockedBy?: string;
  lockedAt?: string;
}

export function useWebSocket(projectId?: string) {
  const [status, setStatus] = useState<WebSocketStatus>('disconnected');
  const wsRef = useRef<WebSocket | null>(null);
  const queryClient = useQueryClient();

  const connect = useCallback(() => {
    if (wsRef.current?.readyState === WebSocket.OPEN) return;

    const wsUrl = process.env.NEXT_PUBLIC_WS_URL || 'ws://localhost:3001';
    const ws = new WebSocket(wsUrl);
    wsRef.current = ws;
    setStatus('connecting');

    ws.onopen = () => {
      setStatus('connected');
      // Join project room if specified
      if (projectId) {
        ws.send(JSON.stringify({ type: 'join', projectId }));
      }
    };

    ws.onmessage = (event) => {
      try {
        const data: LockEvent = JSON.parse(event.data);

        // Invalidate relevant queries on lock events
        if (data.type === 'lock:acquired' || data.type === 'lock:released') {
          queryClient.invalidateQueries({ queryKey: ['lock', data.projectId] });
          queryClient.invalidateQueries({ queryKey: ['projects'] });
        }
      } catch {
        // Ignore parse errors
      }
    };

    ws.onerror = () => {
      setStatus('disconnected');
    };

    ws.onclose = () => {
      setStatus('disconnected');
      wsRef.current = null;
      // Reconnect after 3 seconds
      setTimeout(connect, 3000);
    };
  }, [projectId, queryClient]);

  useEffect(() => {
    connect();
    return () => {
      wsRef.current?.close();
    };
  }, [connect]);

  const send = useCallback((data: object) => {
    if (wsRef.current?.readyState === WebSocket.OPEN) {
      wsRef.current.send(JSON.stringify(data));
    }
  }, []);

  return { status, send };
}
```

### Step 2: Layout Components (1h)

**2.1 Create apps/frontend/components/sidebar.tsx**

```typescript
'use client';

import Link from 'next/link';
import { usePathname } from 'next/navigation';
import { cn } from '@/lib/utils';
import { Home, FileText, Settings, Database } from 'lucide-react';

const navItems = [
  { title: 'Dashboard', href: '/projects', icon: Home },
  { title: 'Documentation', href: '/docs', icon: FileText },
  { title: 'Settings', href: '/settings', icon: Settings },
];

export function Sidebar() {
  const pathname = usePathname();

  return (
    <aside className="fixed left-0 top-0 h-full w-60 bg-slate-850 border-r border-slate-700 flex flex-col">
      {/* Logo */}
      <div className="h-16 flex items-center px-4 border-b border-slate-700">
        <div className="flex items-center gap-3">
          <div className="w-8 h-8 rounded-lg bg-blue-500 flex items-center justify-center">
            <Database className="w-5 h-5 text-white" />
          </div>
          <span className="font-semibold text-lg">AI Toolkit Sync</span>
        </div>
      </div>

      {/* Navigation */}
      <nav className="flex-1 p-4 space-y-1">
        {navItems.map((item) => {
          const isActive = pathname.startsWith(item.href);
          const Icon = item.icon;

          return (
            <Link
              key={item.href}
              href={item.href}
              className={cn(
                'flex items-center gap-3 px-3 py-2.5 rounded-lg transition',
                isActive
                  ? 'bg-slate-700/50 text-white'
                  : 'text-slate-400 hover:text-white hover:bg-slate-700/30'
              )}
            >
              <Icon className="w-5 h-5" />
              {item.title}
            </Link>
          );
        })}
      </nav>

      {/* User */}
      <div className="p-4 border-t border-slate-700">
        <div className="flex items-center gap-3">
          <div className="w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-sm font-medium">
            TL
          </div>
          <div className="flex-1 min-w-0">
            <div className="text-sm font-medium truncate">Team Lead</div>
            <div className="text-xs text-slate-500 truncate">team@example.com</div>
          </div>
        </div>
      </div>
    </aside>
  );
}
```

**2.2 Create apps/frontend/components/header.tsx**

```typescript
import { Button } from '@/components/ui/button';
import { Plus } from 'lucide-react';

interface HeaderProps {
  title: string;
  description?: string;
  action?: {
    label: string;
    onClick: () => void;
  };
}

export function Header({ title, description, action }: HeaderProps) {
  return (
    <header className="h-16 border-b border-slate-700 flex items-center justify-between px-6 bg-slate-950/80 backdrop-blur sticky top-0 z-10">
      <div>
        <h1 className="text-xl font-semibold">{title}</h1>
        {description && (
          <p className="text-sm text-slate-400">{description}</p>
        )}
      </div>
      {action && (
        <Button onClick={action.onClick}>
          <Plus className="w-4 h-4 mr-2" />
          {action.label}
        </Button>
      )}
    </header>
  );
}
```

### Step 3: Project Components (1.5h)

**3.1 Create apps/frontend/components/project-card.tsx**

```typescript
'use client';

import Link from 'next/link';
import { Settings, FileText } from 'lucide-react';
import { Card } from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { Button } from '@/components/ui/button';
import { LockStatus } from './lock-status';
import { formatRelativeTime } from '@/lib/utils';
import type { Project } from '@/lib/api';

interface ProjectCardProps {
  project: Project;
}

export function ProjectCard({ project }: ProjectCardProps) {
  const lock = project.locks?.[0];
  const isLocked = !!lock;

  // Extract org/repo from URL
  const repoMatch = project.repoUrl.match(/github\.com\/(.+)/);
  const repoName = repoMatch ? repoMatch[1].replace('.git', '') : project.repoUrl;

  return (
    <Card className="p-5 hover:border-slate-600 transition group">
      <div className="flex items-start justify-between mb-4">
        <div className="flex items-center gap-3">
          <div className="w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center">
            <FileText className="w-5 h-5 text-white" />
          </div>
          <div>
            <h3 className="font-semibold">{project.name}</h3>
            <p className="text-sm text-slate-400">{repoName}</p>
          </div>
        </div>
        <LockStatus lock={lock} />
      </div>

      <div className="flex items-center gap-2 text-xs text-slate-500 mb-4">
        {isLocked ? (
          <>
            <span>Locked by {lock.lockedBy}</span>
            <span className="text-slate-600">|</span>
            <span>{formatRelativeTime(lock.lockedAt)}</span>
          </>
        ) : (
          <span>Last synced {formatRelativeTime(project.updatedAt)}</span>
        )}
      </div>

      <div className="flex items-center gap-2 pt-4 border-t border-slate-700">
        <Link
          href={isLocked ? '#' : `/editor/${project.id}`}
          className={`flex-1 text-center py-2 text-sm rounded-lg transition font-medium ${
            isLocked
              ? 'text-slate-400 bg-slate-700/30 cursor-not-allowed opacity-50'
              : 'text-white bg-blue-500 hover:bg-blue-600'
          }`}
        >
          {isLocked ? 'View Only' : 'Open Editor'}
        </Link>
        <Link href={`/projects/${project.id}/settings`}>
          <Button variant="ghost" size="icon">
            <Settings className="w-5 h-5" />
          </Button>
        </Link>
      </div>
    </Card>
  );
}
```

**3.2 Create apps/frontend/components/lock-status.tsx**

```typescript
import { Badge } from '@/components/ui/badge';
import type { Lock } from '@/lib/api';

interface LockStatusProps {
  lock?: Lock | null;
}

export function LockStatus({ lock }: LockStatusProps) {
  const isLocked = !!lock;

  return (
    <Badge variant={isLocked ? 'destructive' : 'success'}>
      <span
        className={`w-2 h-2 rounded-full ${
          isLocked ? 'bg-red-500 pulse-dot' : 'bg-green-500'
        }`}
      />
      {isLocked ? 'Locked' : 'Unlocked'}
    </Badge>
  );
}
```

**3.3 Create apps/frontend/components/lock-banner.tsx**

```typescript
'use client';

import { X, Lock } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { formatRelativeTime } from '@/lib/utils';
import type { Lock as LockType } from '@/lib/api';

interface LockBannerProps {
  lock: LockType;
  onDismiss?: () => void;
}

export function LockBanner({ lock, onDismiss }: LockBannerProps) {
  return (
    <div className="mx-6 mt-4 bg-gradient-to-r from-red-950 to-red-900 border-l-4 border-red-500 rounded-r-lg p-4 flex items-center gap-3">
      <div className="w-8 h-8 rounded-full bg-red-500/20 flex items-center justify-center">
        <Lock className="w-5 h-5 text-red-400 pulse-dot" />
      </div>
      <div className="flex-1">
        <div className="text-red-200 font-medium">
          Project is locked
        </div>
        <div className="text-red-300/70 text-sm">
          Locked by {lock.lockedBy} {formatRelativeTime(lock.lockedAt)}
          {lock.reason && ` - ${lock.reason}`}
        </div>
      </div>
      {onDismiss && (
        <Button
          variant="ghost"
          size="icon"
          onClick={onDismiss}
          className="text-red-300 hover:text-white hover:bg-red-800/50"
        >
          <X className="w-5 h-5" />
        </Button>
      )}
    </div>
  );
}
```

### Step 4: Monaco Editor (1.5h)

**4.1 Create apps/frontend/components/monaco-editor.tsx**

```typescript
'use client';

import { useRef, useCallback } from 'react';
import dynamic from 'next/dynamic';
import { useUIStore } from '@/stores/ui-store';
import { debounce } from '@/lib/utils';

const Editor = dynamic(() => import('@monaco-editor/react'), { ssr: false });

interface MonacoEditorProps {
  initialContent: string;
  onSave: (content: string) => void;
  onAutoSave?: (content: string) => void;
  readOnly?: boolean;
}

export function MonacoEditor({
  initialContent,
  onSave,
  onAutoSave,
  readOnly = false,
}: MonacoEditorProps) {
  const editorRef = useRef<any>(null);
  const setEditorDirty = useUIStore((s) => s.setEditorDirty);

  // Debounced auto-save (2 second delay)
  const debouncedAutoSave = useCallback(
    debounce((value: string) => {
      onAutoSave?.(value);
    }, 2000),
    [onAutoSave],
  );

  const handleMount = useCallback(
    (editor: any, monaco: any) => {
      editorRef.current = editor;

      // Ctrl+S to save
      editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyS, () => {
        const value = editor.getValue();
        onSave(value);
        setEditorDirty(false);
      });
    },
    [onSave, setEditorDirty],
  );

  const handleChange = useCallback(
    (value: string | undefined) => {
      if (value !== undefined) {
        setEditorDirty(true);
        debouncedAutoSave(value);
      }
    },
    [setEditorDirty, debouncedAutoSave],
  );

  return (
    <Editor
      height="100%"
      defaultLanguage="markdown"
      defaultValue={initialContent}
      onChange={handleChange}
      onMount={handleMount}
      theme="vs-dark"
      options={{
        readOnly,
        minimap: { enabled: false },
        fontSize: 14,
        fontFamily: 'JetBrains Mono, monospace',
        wordWrap: 'on',
        lineNumbers: 'on',
        scrollBeyondLastLine: false,
        automaticLayout: true,
        padding: { top: 16, bottom: 16 },
      }}
    />
  );
}
```

**4.2 Create apps/frontend/components/markdown-preview.tsx**

```typescript
'use client';

import { useMemo } from 'react';

interface MarkdownPreviewProps {
  content: string;
}

export function MarkdownPreview({ content }: MarkdownPreviewProps) {
  // Simple markdown to HTML (for demo - use remark/rehype in production)
  const html = useMemo(() => {
    return content
      .replace(/^### (.*$)/gm, '<h3 class="text-lg font-semibold text-slate-100 mt-6 mb-2">$1</h3>')
      .replace(/^## (.*$)/gm, '<h2 class="text-xl font-semibold text-slate-100 mt-8 mb-3">$1</h2>')
      .replace(/^# (.*$)/gm, '<h1 class="text-2xl font-bold text-slate-100 mb-4 pb-2 border-b border-slate-700">$1</h1>')
      .replace(/\*\*(.*?)\*\*/g, '<strong class="text-slate-200">$1</strong>')
      .replace(/\*(.*?)\*/g, '<em>$1</em>')
      .replace(/`([^`]+)`/g, '<code class="bg-slate-800 px-2 py-0.5 rounded text-blue-300 text-sm font-mono">$1</code>')
      .replace(/^- (.*$)/gm, '<li class="ml-4">$1</li>')
      .replace(/\n\n/g, '</p><p class="text-slate-300 mb-4">')
      .replace(/^(?!<[h|l])/gm, '<p class="text-slate-300 mb-4">');
  }, [content]);

  return (
    <div className="flex-1 overflow-auto p-6">
      <article
        className="prose prose-invert prose-slate max-w-none"
        dangerouslySetInnerHTML={{ __html: html }}
      />
    </div>
  );
}
```

**4.3 Create apps/frontend/components/file-tree.tsx**

```typescript
'use client';

import { File, Folder, RefreshCw } from 'lucide-react';
import { cn } from '@/lib/utils';
import type { Doc } from '@/lib/api';

interface FileTreeProps {
  docs: Doc[];
  activeDoc?: string;
  onSelect: (fileName: string) => void;
  onRefresh?: () => void;
}

export function FileTree({ docs, activeDoc, onSelect, onRefresh }: FileTreeProps) {
  return (
    <aside className="w-56 border-r border-slate-700 bg-slate-900 flex flex-col shrink-0">
      <div className="p-3 border-b border-slate-700 flex items-center justify-between">
        <span className="text-xs font-medium text-slate-400 uppercase tracking-wide">
          Explorer
        </span>
        {onRefresh && (
          <button
            onClick={onRefresh}
            className="p-1 text-slate-400 hover:text-white hover:bg-slate-700 rounded transition"
          >
            <RefreshCw className="w-4 h-4" />
          </button>
        )}
      </div>
      <div className="flex-1 overflow-y-auto p-2">
        <div className="space-y-0.5 text-sm">
          {/* docs folder */}
          <div className="flex items-center gap-2 px-2 py-1.5 text-slate-300">
            <Folder className="w-4 h-4 text-yellow-500" />
            <span>docs</span>
          </div>

          {/* Files */}
          <div className="pl-4 space-y-0.5">
            {docs.map((doc) => (
              <button
                key={doc.id}
                onClick={() => onSelect(doc.fileName)}
                className={cn(
                  'w-full flex items-center gap-2 px-2 py-1.5 rounded cursor-pointer text-left',
                  activeDoc === doc.fileName
                    ? 'bg-blue-500/20 text-blue-300'
                    : 'text-slate-400 hover:bg-slate-800 hover:text-slate-300'
                )}
              >
                <File className="w-4 h-4" />
                <span className="truncate">{doc.fileName}</span>
              </button>
            ))}
          </div>
        </div>
      </div>
    </aside>
  );
}
```

### Step 5: Dashboard Layout (30m)

**5.1 Create apps/frontend/app/(dashboard)/layout.tsx**

```typescript
import { Sidebar } from '@/components/sidebar';

export default function DashboardLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <div className="flex min-h-screen">
      <Sidebar />
      <main className="flex-1 ml-60">{children}</main>
    </div>
  );
}
```

### Step 6: Projects Pages (1.5h)

**6.1 Create apps/frontend/app/(dashboard)/projects/page.tsx**

```typescript
'use client';

import { useState } from 'react';
import { Header } from '@/components/header';
import { ProjectCard } from '@/components/project-card';
import { LockBanner } from '@/components/lock-banner';
import { Skeleton } from '@/components/ui/skeleton';
import { useProjects } from '@/hooks/use-projects';
import { useWebSocket } from '@/hooks/use-websocket';
import { Plus } from 'lucide-react';

export default function ProjectsPage() {
  const { data: projects, isLoading } = useProjects();
  const [dismissedLock, setDismissedLock] = useState<string | null>(null);

  // Connect WebSocket for real-time updates
  useWebSocket();

  // Find any locked project for banner
  const lockedProject = projects?.find(
    (p) => p.locks?.length && p.id !== dismissedLock
  );

  return (
    <>
      <Header
        title="Projects"
        description="Manage your documentation sync projects"
        action={{
          label: 'New Project',
          onClick: () => {
            // TODO: Open create dialog
          },
        }}
      />

      {/* Lock banner */}
      {lockedProject?.locks?.[0] && (
        <LockBanner
          lock={lockedProject.locks[0]}
          onDismiss={() => setDismissedLock(lockedProject.id)}
        />
      )}

      {/* Projects grid */}
      <div className="p-6">
        {isLoading ? (
          <div className="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">
            {[1, 2, 3].map((i) => (
              <Skeleton key={i} className="h-[200px] rounded-xl" />
            ))}
          </div>
        ) : (
          <div className="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">
            {projects?.map((project) => (
              <ProjectCard key={project.id} project={project} />
            ))}

            {/* Add new project card */}
            <div className="bg-slate-850/50 border-2 border-dashed border-slate-700 rounded-xl p-5 flex flex-col items-center justify-center text-center min-h-[200px] hover:border-blue-500/50 hover:bg-slate-850 transition cursor-pointer group">
              <div className="w-12 h-12 rounded-full bg-slate-700 group-hover:bg-blue-500/20 flex items-center justify-center mb-3 transition">
                <Plus className="w-6 h-6 text-slate-400 group-hover:text-blue-400 transition" />
              </div>
              <h3 className="font-medium text-slate-300 group-hover:text-white transition">
                Add New Project
              </h3>
              <p className="text-sm text-slate-500 mt-1">
                Connect a new Git repository
              </p>
            </div>
          </div>
        )}
      </div>
    </>
  );
}
```

**6.2 Create apps/frontend/app/(dashboard)/projects/loading.tsx**

```typescript
import { Skeleton } from '@/components/ui/skeleton';

export default function ProjectsLoading() {
  return (
    <div className="p-6">
      <div className="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">
        {[1, 2, 3].map((i) => (
          <Skeleton key={i} className="h-[200px] rounded-xl" />
        ))}
      </div>
    </div>
  );
}
```

### Step 7: Editor Page (1h)

**7.1 Create apps/frontend/app/(dashboard)/editor/[projectId]/[docId]/page.tsx**

```typescript
'use client';

import { useEffect } from 'react';
import { useParams, useRouter } from 'next/navigation';
import { ArrowLeft, Save, Upload, Settings } from 'lucide-react';
import Link from 'next/link';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';
import { MonacoEditor } from '@/components/monaco-editor';
import { MarkdownPreview } from '@/components/markdown-preview';
import { FileTree } from '@/components/file-tree';
import { useProject } from '@/hooks/use-projects';
import { useDoc, useDocs, useUpdateDoc, usePushDoc } from '@/hooks/use-docs';
import { useLock, useAcquireLock, useReleaseLock } from '@/hooks/use-lock';
import { useWebSocket } from '@/hooks/use-websocket';
import { useUIStore } from '@/stores/ui-store';

export default function EditorPage() {
  const params = useParams<{ projectId: string; docId: string }>();
  const router = useRouter();
  const { projectId, docId } = params;
  const fileName = decodeURIComponent(docId);

  const { data: project } = useProject(projectId);
  const { data: docs } = useDocs(projectId);
  const { data: doc, isLoading } = useDoc(projectId, fileName);
  const { data: lock } = useLock(projectId);
  const updateDoc = useUpdateDoc(projectId, fileName);
  const pushDoc = usePushDoc(projectId, fileName);
  const acquireLock = useAcquireLock(projectId);
  const releaseLock = useReleaseLock(projectId);

  const editorDirty = useUIStore((s) => s.editorDirty);
  const setEditorDirty = useUIStore((s) => s.setEditorDirty);

  // Connect WebSocket
  useWebSocket(projectId);

  // Acquire lock on mount, release on unmount
  useEffect(() => {
    if (!lock) {
      acquireLock.mutate({ lockedBy: 'Tech Lead', reason: `Editing ${fileName}` });
    }

    return () => {
      releaseLock.mutate();
    };
  }, []);

  const handleSave = async (content: string) => {
    await updateDoc.mutateAsync(content);
    setEditorDirty(false);
  };

  const handlePush = async () => {
    await pushDoc.mutateAsync();
  };

  const handleSelectDoc = (newFileName: string) => {
    router.push(`/editor/${projectId}/${encodeURIComponent(newFileName)}`);
  };

  if (isLoading || !doc) {
    return <div className="h-screen flex items-center justify-center">Loading...</div>;
  }

  return (
    <div className="h-screen flex flex-col overflow-hidden">
      {/* Header */}
      <header className="h-14 border-b border-slate-700 flex items-center justify-between px-4 bg-slate-900 shrink-0">
        <div className="flex items-center gap-4">
          <Link
            href="/projects"
            className="p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition"
          >
            <ArrowLeft className="w-5 h-5" />
          </Link>
          <div>
            <h1 className="text-sm font-semibold">{project?.name}</h1>
            <p className="text-xs text-slate-400">{fileName}</p>
          </div>
        </div>

        <div className="flex items-center gap-2 bg-slate-800 px-3 py-1.5 rounded-lg">
          <span className="text-sm text-slate-300 font-mono">{fileName}</span>
          {editorDirty && (
            <span className="w-1.5 h-1.5 bg-amber-500 rounded-full" title="Modified" />
          )}
        </div>

        <div className="flex items-center gap-3">
          <Badge variant="success">Editing</Badge>

          <Button variant="outline" size="sm" onClick={() => handleSave(doc.content)}>
            <Save className="w-4 h-4 mr-2" />
            Save
          </Button>

          <Button size="sm" onClick={handlePush}>
            <Upload className="w-4 h-4 mr-2" />
            Push
          </Button>

          <Link href={`/projects/${projectId}/settings`}>
            <Button variant="ghost" size="icon">
              <Settings className="w-5 h-5" />
            </Button>
          </Link>
        </div>
      </header>

      {/* Main editor area */}
      <div className="flex-1 flex overflow-hidden">
        {/* File tree */}
        <FileTree
          docs={docs || []}
          activeDoc={fileName}
          onSelect={handleSelectDoc}
        />

        {/* Editor + Preview split */}
        <div className="flex-1 flex">
          <div className="flex-1 border-r border-slate-700">
            <MonacoEditor
              initialContent={doc.content}
              onSave={handleSave}
              onAutoSave={handleSave}
            />
          </div>
          <div className="w-[45%] flex flex-col bg-slate-900">
            <div className="h-9 bg-slate-850 border-b border-slate-700 flex items-center px-4">
              <span className="text-xs font-medium text-slate-400 uppercase tracking-wide">
                Preview
              </span>
            </div>
            <MarkdownPreview content={doc.content} />
          </div>
        </div>
      </div>
    </div>
  );
}
```

---

## Verification Steps

```bash
# Start backend (in separate terminal)
cd apps/backend && pnpm dev

# Start frontend
cd apps/frontend && pnpm dev

# Test flows
# 1. Navigate to http://localhost:3000/projects
# 2. Verify project cards render
# 3. Click "Open Editor" on unlocked project
# 4. Verify Monaco editor loads
# 5. Make changes and press Ctrl+S
```

## Success Criteria

- [ ] Projects page lists all projects with lock status
- [ ] Lock banner shows for locked projects
- [ ] Project cards link to editor
- [ ] Monaco editor loads markdown content
- [ ] Ctrl+S saves content
- [ ] Push button triggers GitHub push
- [ ] File tree allows switching docs
- [ ] WebSocket reconnects on disconnect

---

## Conflict Prevention

This phase owns:
- `app/(dashboard)/` directory
- `components/` feature components (NOT ui/)
- `hooks/` directory

Phase 03 owns:
- `components/ui/` (base components)
- `lib/` (utilities, api)
- `stores/` (Zustand)
</file>

<file path="plans/260103-1818-ai-toolkit-sync-platform/phase-05-backend-realtime-hooks.md">
# Phase 05: Backend Real-time & Hooks API

---
phase: 05
title: Backend Real-time & Hooks API
status: pending
effort: 8h
parallelization: Can run in PARALLEL with Phase 04
depends_on: [phase-02]
blocks: [phase-06]
---

## Overview

Implement WebSocket gateway for real-time lock notifications, Hook API for Claude Code integration, and shell scripts for dev workstations.

## File Ownership (Exclusive to This Phase)

```
apps/backend/src/
├── websocket/
│   ├── websocket.gateway.ts
│   └── websocket.module.ts
└── hook/
    ├── hook.controller.ts
    ├── hook.service.ts
    └── hook.module.ts
scripts/
├── check-platform.sh
└── protect-docs.sh
```

## Implementation Steps

### Step 1: WebSocket Gateway (2h)

**1.1 Create apps/backend/src/websocket/websocket.gateway.ts**

```typescript
import {
  WebSocketGateway,
  WebSocketServer,
  OnGatewayConnection,
  OnGatewayDisconnect,
  SubscribeMessage,
  MessageBody,
  ConnectedSocket,
} from '@nestjs/websockets';
import { Logger } from '@nestjs/common';
import { Server, Socket } from 'socket.io';

interface JoinMessage {
  projectId: string;
}

interface LockEvent {
  type: 'lock:acquired' | 'lock:released';
  projectId: string;
  lockedBy?: string;
  lockedAt?: string;
}

interface DocEvent {
  type: 'doc:updated';
  projectId: string;
  docId: string;
  hash: string;
}

@WebSocketGateway({
  cors: {
    origin: process.env.FRONTEND_URL || 'http://localhost:3000',
    credentials: true,
  },
})
export class NotificationsGateway
  implements OnGatewayConnection, OnGatewayDisconnect
{
  private readonly logger = new Logger('WebSocketGateway');

  @WebSocketServer()
  server: Server;

  handleConnection(client: Socket) {
    this.logger.log(`Client connected: ${client.id}`);
  }

  handleDisconnect(client: Socket) {
    this.logger.log(`Client disconnected: ${client.id}`);
  }

  @SubscribeMessage('join')
  handleJoin(
    @ConnectedSocket() client: Socket,
    @MessageBody() data: JoinMessage,
  ) {
    const room = `project:${data.projectId}`;
    client.join(room);
    this.logger.log(`Client ${client.id} joined room ${room}`);
    return { success: true, room };
  }

  @SubscribeMessage('leave')
  handleLeave(
    @ConnectedSocket() client: Socket,
    @MessageBody() data: JoinMessage,
  ) {
    const room = `project:${data.projectId}`;
    client.leave(room);
    this.logger.log(`Client ${client.id} left room ${room}`);
    return { success: true };
  }

  /**
   * Broadcast lock acquired event to all clients in project room
   */
  notifyLockAcquired(projectId: string, lockedBy: string, lockedAt: string) {
    const event: LockEvent = {
      type: 'lock:acquired',
      projectId,
      lockedBy,
      lockedAt,
    };
    this.server.to(`project:${projectId}`).emit('lock:acquired', event);
    this.logger.log(`Lock acquired broadcast for project ${projectId}`);
  }

  /**
   * Broadcast lock released event to all clients in project room
   */
  notifyLockReleased(projectId: string) {
    const event: LockEvent = {
      type: 'lock:released',
      projectId,
    };
    this.server.to(`project:${projectId}`).emit('lock:released', event);
    this.logger.log(`Lock released broadcast for project ${projectId}`);
  }

  /**
   * Broadcast doc updated event to all clients in project room
   */
  notifyDocUpdated(projectId: string, docId: string, hash: string) {
    const event: DocEvent = {
      type: 'doc:updated',
      projectId,
      docId,
      hash,
    };
    this.server.to(`project:${projectId}`).emit('doc:updated', event);
    this.logger.log(`Doc updated broadcast for project ${projectId}`);
  }
}
```

**1.2 Create apps/backend/src/websocket/websocket.module.ts**

```typescript
import { Module, Global } from '@nestjs/common';
import { NotificationsGateway } from './websocket.gateway';

@Global()
@Module({
  providers: [NotificationsGateway],
  exports: [NotificationsGateway],
})
export class WebSocketModule {}
```

**1.3 Update apps/backend/src/app.module.ts** (add import)

```typescript
// Add to imports array:
import { WebSocketModule } from './websocket/websocket.module';
import { HookModule } from './hook/hook.module';

@Module({
  imports: [
    // ... existing imports
    WebSocketModule,
    HookModule,
  ],
})
export class AppModule {}
```

### Step 2: Integrate WebSocket with Lock Service (30m)

**2.1 Update apps/backend/src/lock/lock.service.ts**

Add WebSocket notifications to lock operations:

```typescript
import { Injectable, ConflictException, NotFoundException } from '@nestjs/common';
import { PrismaService } from '../prisma/prisma.service';
import { NotificationsGateway } from '../websocket/websocket.gateway';

const DEFAULT_LOCK_TTL_MINUTES = 30;

@Injectable()
export class LockService {
  constructor(
    private prisma: PrismaService,
    private notifications: NotificationsGateway, // Add this
  ) {}

  async getLock(projectId: string) {
    const lock = await this.prisma.lock.findUnique({
      where: { projectId },
    });

    // Check if lock has expired
    if (lock?.expiresAt && lock.expiresAt < new Date()) {
      await this.releaseLock(projectId);
      return null;
    }

    return lock;
  }

  async acquireLock(projectId: string, lockedBy: string, reason?: string) {
    const existingLock = await this.getLock(projectId);
    if (existingLock) {
      throw new ConflictException({
        message: 'Project is already locked',
        lockedBy: existingLock.lockedBy,
        lockedAt: existingLock.lockedAt,
      });
    }

    const project = await this.prisma.project.findUnique({
      where: { id: projectId },
    });
    if (!project) {
      throw new NotFoundException(`Project ${projectId} not found`);
    }

    const expiresAt = new Date();
    expiresAt.setMinutes(expiresAt.getMinutes() + DEFAULT_LOCK_TTL_MINUTES);

    const lock = await this.prisma.lock.create({
      data: {
        projectId,
        lockedBy,
        reason,
        expiresAt,
      },
    });

    // Broadcast lock acquired event
    this.notifications.notifyLockAcquired(
      projectId,
      lockedBy,
      lock.lockedAt.toISOString(),
    );

    return lock;
  }

  async releaseLock(projectId: string) {
    const lock = await this.prisma.lock.findUnique({
      where: { projectId },
    });

    if (!lock) {
      return { released: false, message: 'No lock exists' };
    }

    await this.prisma.lock.delete({
      where: { projectId },
    });

    // Broadcast lock released event
    this.notifications.notifyLockReleased(projectId);

    return { released: true };
  }

  async extendLock(projectId: string, minutes = DEFAULT_LOCK_TTL_MINUTES) {
    const lock = await this.getLock(projectId);
    if (!lock) {
      throw new NotFoundException('No active lock found');
    }

    const expiresAt = new Date();
    expiresAt.setMinutes(expiresAt.getMinutes() + minutes);

    return this.prisma.lock.update({
      where: { projectId },
      data: { expiresAt },
    });
  }

  async isLocked(projectId: string): Promise<boolean> {
    const lock = await this.getLock(projectId);
    return lock !== null;
  }
}
```

### Step 3: Hook API Service (1.5h)

**3.1 Create apps/backend/src/hook/hook.service.ts**

```typescript
import { Injectable, NotFoundException } from '@nestjs/common';
import { PrismaService } from '../prisma/prisma.service';
import { DocsService } from '../docs/docs.service';
import { LockService } from '../lock/lock.service';

export interface HookStatusResponse {
  locked: boolean;
  lockedBy?: string;
  lockedAt?: string;
  expiresAt?: string;
}

export interface HookDocsHashResponse {
  hash: string;
  docsCount: number;
}

export interface HookSyncResponse {
  docs: Array<{
    fileName: string;
    content: string;
    hash: string;
  }>;
  hash: string;
}

@Injectable()
export class HookService {
  constructor(
    private prisma: PrismaService,
    private docsService: DocsService,
    private lockService: LockService,
  ) {}

  async getStatus(projectId: string): Promise<HookStatusResponse> {
    // Verify project exists
    const project = await this.prisma.project.findUnique({
      where: { id: projectId },
    });

    if (!project) {
      throw new NotFoundException(`Project ${projectId} not found`);
    }

    const lock = await this.lockService.getLock(projectId);

    if (!lock) {
      return { locked: false };
    }

    return {
      locked: true,
      lockedBy: lock.lockedBy,
      lockedAt: lock.lockedAt.toISOString(),
      expiresAt: lock.expiresAt?.toISOString(),
    };
  }

  async getDocsHash(projectId: string): Promise<HookDocsHashResponse> {
    const project = await this.prisma.project.findUnique({
      where: { id: projectId },
    });

    if (!project) {
      throw new NotFoundException(`Project ${projectId} not found`);
    }

    const docs = await this.docsService.findAllByProject(projectId);
    const hash = await this.docsService.getDocsHash(projectId);

    return {
      hash,
      docsCount: docs.length,
    };
  }

  async syncDocs(projectId: string): Promise<HookSyncResponse> {
    const project = await this.prisma.project.findUnique({
      where: { id: projectId },
    });

    if (!project) {
      throw new NotFoundException(`Project ${projectId} not found`);
    }

    // First sync from GitHub to ensure we have latest
    await this.docsService.syncFromGitHub(projectId);

    // Get all docs
    const docs = await this.docsService.findAllByProject(projectId);
    const hash = await this.docsService.getDocsHash(projectId);

    return {
      docs: docs.map((doc) => ({
        fileName: doc.fileName,
        content: doc.content,
        hash: doc.hash,
      })),
      hash,
    };
  }
}
```

**3.2 Create apps/backend/src/hook/hook.controller.ts**

```typescript
import { Controller, Get, Post, Param, UseGuards } from '@nestjs/common';
import { HookService } from './hook.service';
import { ApiKeyGuard } from '../common/guards/api-key.guard';

@Controller('hook')
@UseGuards(ApiKeyGuard)
export class HookController {
  constructor(private readonly hookService: HookService) {}

  /**
   * Check project lock status
   * Used by check-platform.sh to determine if dev can start session
   */
  @Get('status/:projectId')
  getStatus(@Param('projectId') projectId: string) {
    return this.hookService.getStatus(projectId);
  }

  /**
   * Get docs hash for quick comparison
   * Used by check-platform.sh to determine if sync needed
   */
  @Get('docs/:projectId')
  getDocsHash(@Param('projectId') projectId: string) {
    return this.hookService.getDocsHash(projectId);
  }

  /**
   * Sync docs from platform
   * Returns all docs content for local .docs/ folder
   */
  @Post('sync/:projectId')
  syncDocs(@Param('projectId') projectId: string) {
    return this.hookService.syncDocs(projectId);
  }
}
```

**3.3 Create apps/backend/src/hook/hook.module.ts**

```typescript
import { Module } from '@nestjs/common';
import { HookController } from './hook.controller';
import { HookService } from './hook.service';
import { DocsModule } from '../docs/docs.module';
import { LockModule } from '../lock/lock.module';

@Module({
  imports: [DocsModule, LockModule],
  controllers: [HookController],
  providers: [HookService],
})
export class HookModule {}
```

### Step 4: Claude Code Hook Scripts (2h)

**4.1 Create scripts/check-platform.sh**

```bash
#!/bin/bash
#
# AI Toolkit Platform - Pre-session Hook
# Checks lock status and syncs docs before Claude Code session
#
set -e

# Configuration (from environment)
PLATFORM_URL="${AI_TOOLKIT_PLATFORM_URL:-http://localhost:3001}"
API_KEY="${AI_TOOLKIT_API_KEY}"
PROJECT_ID="${AI_TOOLKIT_PROJECT_ID}"
TIMEOUT=10
MAX_RETRIES=3

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

log_info() { echo -e "${GREEN}[INFO]${NC} $1"; }
log_warn() { echo -e "${YELLOW}[WARN]${NC} $1" >&2; }
log_error() { echo -e "${RED}[ERROR]${NC} $1" >&2; }

# Validate required environment variables
if [ -z "$API_KEY" ]; then
  log_error "AI_TOOLKIT_API_KEY not set"
  log_info "Get your API key from the Platform and set:"
  log_info "  export AI_TOOLKIT_API_KEY='sk_xxx'"
  exit 1
fi

if [ -z "$PROJECT_ID" ]; then
  log_error "AI_TOOLKIT_PROJECT_ID not set"
  log_info "Get your project ID from the Platform and set:"
  log_info "  export AI_TOOLKIT_PROJECT_ID='clxxx'"
  exit 1
fi

# Helper: API call with timeout, retry, and error handling
api_call() {
  local endpoint="$1"
  local method="${2:-GET}"
  local attempt=1

  while [ $attempt -le $MAX_RETRIES ]; do
    response=$(curl -s --fail --max-time $TIMEOUT \
      -X "$method" \
      -H "X-API-Key: $API_KEY" \
      -H "Content-Type: application/json" \
      "$PLATFORM_URL/api/hook/$endpoint" 2>/dev/null) && {
      echo "$response"
      return 0
    }

    log_warn "API call failed (attempt $attempt/$MAX_RETRIES)"
    attempt=$((attempt + 1))
    sleep 1
  done

  return 1
}

# Check lock status
check_lock() {
  log_info "Checking project lock status..."

  response=$(api_call "status/$PROJECT_ID") || {
    log_warn "Cannot reach Platform. Checking cached .docs/..."
    if [ -d "./.docs" ] && [ -f "./.docs/.sync-hash" ]; then
      log_info "Using cached .docs/ (offline mode)"
      return 0
    else
      log_error "No cached docs. Please connect to Platform first."
      exit 1
    fi
  }

  locked=$(echo "$response" | jq -r '.locked')
  lockedBy=$(echo "$response" | jq -r '.lockedBy // empty')
  lockedAt=$(echo "$response" | jq -r '.lockedAt // empty')

  if [ "$locked" == "true" ]; then
    log_error "Project locked by $lockedBy"
    [ -n "$lockedAt" ] && log_info "  Since: $lockedAt"
    log_info "  Docs being updated. Please wait..."
    exit 1
  fi

  log_info "Project is unlocked - proceeding"
}

# Check if docs need sync
check_sync() {
  log_info "Checking docs sync status..."

  response=$(api_call "docs/$PROJECT_ID") || {
    log_warn "Cannot check for updates. Using cached docs."
    return 0
  }

  remote_hash=$(echo "$response" | jq -r '.hash')
  local_hash=$(cat ./.docs/.sync-hash 2>/dev/null || echo "")

  if [ "$remote_hash" != "$local_hash" ]; then
    log_info "Docs have updates. Syncing..."
    sync_docs "$remote_hash"
  else
    log_info "Docs are up to date"
  fi
}

# Sync docs from Platform
sync_docs() {
  local expected_hash="$1"

  # Create .docs/ if not exists
  mkdir -p ./.docs

  # Download docs from Platform API
  response=$(api_call "sync/$PROJECT_ID" "POST") || {
    log_error "Sync failed. Please check connection."
    exit 1
  }

  # Save each doc file
  echo "$response" | jq -c '.docs[]' | while read -r doc; do
    fileName=$(echo "$doc" | jq -r '.fileName')
    content=$(echo "$doc" | jq -r '.content')
    echo "$content" > "./.docs/$fileName"
    log_info "  Synced: $fileName"
  done

  # Save hash for quick comparison
  actual_hash=$(echo "$response" | jq -r '.hash')
  echo "$actual_hash" > ./.docs/.sync-hash

  log_info "Docs synced successfully to .docs/"
}

# Main
main() {
  log_info "AI Toolkit Platform - Pre-session Check"
  log_info "Platform: $PLATFORM_URL"
  log_info "Project:  $PROJECT_ID"
  echo ""

  check_lock
  check_sync

  echo ""
  log_info "Ready for Claude Code session!"
}

main "$@"
```

**4.2 Create scripts/protect-docs.sh**

```bash
#!/bin/bash
#
# AI Toolkit Platform - Docs Protection Hook
# Blocks writes to .docs/ and docs/ folders
# Install in ~/.claude/hooks/pre-write
#

# Check if this is a write or edit operation
if [[ "$CLAUDE_OPERATION" != "write" && "$CLAUDE_OPERATION" != "edit" ]]; then
  exit 0
fi

# Get the target file path
TARGET_FILE="$CLAUDE_TARGET_FILE"

# Block writes to .docs/ (Platform-synced folder)
if [[ "$TARGET_FILE" == *"/.docs/"* ]] || [[ "$TARGET_FILE" == ".docs/"* ]]; then
  echo "BLOCKED: .docs/ is read-only (Platform-synced)"
  echo ""
  echo "This folder contains documentation synced from AI Toolkit Platform."
  echo "Only the Tech Lead can modify docs via the Platform."
  echo ""
  echo "If you need to update documentation:"
  echo "  1. Contact your Tech Lead"
  echo "  2. They will update via Platform"
  echo "  3. Run check-platform.sh to sync latest"
  exit 1
fi

# Block writes to docs/ (Git-tracked folder)
if [[ "$TARGET_FILE" == *"/docs/"* ]] || [[ "$TARGET_FILE" == "docs/"* ]]; then
  # Allow CLAUDE.md in root (not in docs/)
  if [[ "$TARGET_FILE" == "CLAUDE.md" ]] || [[ "$TARGET_FILE" == "./CLAUDE.md" ]]; then
    exit 0
  fi

  echo "BLOCKED: docs/ is protected (Git-tracked)"
  echo ""
  echo "This folder is the source of truth pushed by Platform."
  echo "Direct modifications may cause sync conflicts."
  echo ""
  echo "Claude should read from .docs/ instead."
  exit 1
fi

# Allow all other writes
exit 0
```

**4.3 Make scripts executable and add to package.json**

```json
// Add to root package.json scripts:
{
  "scripts": {
    "hooks:install": "chmod +x scripts/*.sh && echo 'Hooks ready. Copy to ~/.claude/hooks/'",
    "hooks:check": "scripts/check-platform.sh"
  }
}
```

### Step 5: Update Lock Module for WebSocket (15m)

**5.1 Update apps/backend/src/lock/lock.module.ts**

```typescript
import { Module } from '@nestjs/common';
import { LockController } from './lock.controller';
import { LockService } from './lock.service';

@Module({
  controllers: [LockController],
  providers: [LockService],
  exports: [LockService],
})
export class LockModule {}
```

Note: The NotificationsGateway is injected via the global WebSocketModule.

### Step 6: Installation Guide (create README section)

**6.1 Create scripts/README.md**

```markdown
# Claude Code Hooks

These scripts integrate with Claude Code to enforce docs protection.

## Installation

### 1. Set Environment Variables

Add to your `~/.bashrc` or `~/.zshrc`:

```bash
export AI_TOOLKIT_PLATFORM_URL="http://localhost:3001"
export AI_TOOLKIT_API_KEY="sk_your_api_key_here"
export AI_TOOLKIT_PROJECT_ID="clxxx_your_project_id"
```

Get these values from the Platform:
- **API Key**: Project Settings > API Keys > Generate
- **Project ID**: Visible in project URL

### 2. Install Hooks

```bash
# Make scripts executable
chmod +x scripts/*.sh

# Copy to Claude hooks directory
mkdir -p ~/.claude/hooks
cp scripts/check-platform.sh ~/.claude/hooks/pre-session
cp scripts/protect-docs.sh ~/.claude/hooks/pre-write
```

### 3. Configure .gitignore

Add to your project's `.gitignore`:

```gitignore
# Platform-synced docs (Claude reads from here)
.docs/
```

### 4. Update CLAUDE.md

Reference `.docs/` in your project's CLAUDE.md:

```markdown
## Documentation

Read these files before coding:
- .docs/project-overview-pdr.md
- .docs/code-standards.md
- .docs/codebase-summary.md
- .docs/design-guidelines.md
- .docs/deployment-guide.md
- .docs/system-architecture.md

NOTE: These files are synced from AI Toolkit Platform. DO NOT modify directly.
```

## Usage

### Before Starting Claude Code

```bash
# Check lock status and sync docs
./scripts/check-platform.sh
```

The pre-session hook will:
1. Check if project is locked (fail if yes)
2. Compare docs hash with Platform
3. Sync updated docs to `.docs/` folder

### During Claude Code Session

The pre-write hook will:
- Block any writes to `.docs/` folder
- Block any writes to `docs/` folder
- Allow all other file operations

## Troubleshooting

### "API key required" error
Set `AI_TOOLKIT_API_KEY` environment variable.

### "Project not found" error
Check `AI_TOOLKIT_PROJECT_ID` matches your project.

### "Project locked" error
Wait for Tech Lead to finish editing docs.

### Offline mode
If Platform is unreachable, hooks use cached `.docs/`.
First sync requires Platform connection.
```

---

## Verification Steps

```bash
# 1. Start backend with WebSocket
cd apps/backend && pnpm dev

# 2. Test Hook API with curl
# First get an API key via Platform or direct DB insert

# Test status endpoint
curl -H "X-API-Key: sk_test_key" \
  http://localhost:3001/api/hook/status/PROJECT_ID

# Test docs hash endpoint
curl -H "X-API-Key: sk_test_key" \
  http://localhost:3001/api/hook/docs/PROJECT_ID

# Test sync endpoint
curl -X POST -H "X-API-Key: sk_test_key" \
  http://localhost:3001/api/hook/sync/PROJECT_ID

# 3. Test WebSocket
# Open browser console on frontend and check for WS connection

# 4. Test hook scripts
export AI_TOOLKIT_API_KEY="sk_test"
export AI_TOOLKIT_PROJECT_ID="your_project_id"
./scripts/check-platform.sh
```

## Success Criteria

- [ ] WebSocket gateway accepts connections
- [ ] Clients can join/leave project rooms
- [ ] Lock acquire broadcasts to room
- [ ] Lock release broadcasts to room
- [ ] `GET /api/hook/status/:id` returns lock status
- [ ] `GET /api/hook/docs/:id` returns hash
- [ ] `POST /api/hook/sync/:id` returns docs content
- [ ] ApiKeyGuard blocks invalid keys
- [ ] check-platform.sh syncs docs to .docs/
- [ ] protect-docs.sh blocks .docs/ writes

---

## Conflict Prevention

This phase owns:
- `websocket/` module (new directory)
- `hook/` module (new directory)
- `scripts/` directory

Phase 02 owns:
- `lock/lock.service.ts` - Phase 05 adds NotificationsGateway injection
- `app.module.ts` - Phase 05 adds WebSocketModule and HookModule imports

Coordination needed:
- Phase 05 modifies LockService to add WebSocket notifications
- This is the ONLY cross-phase file modification
- Use feature flag or conditional injection if running truly parallel
</file>

<file path="plans/260103-1818-ai-toolkit-sync-platform/phase-06-integration-testing.md">
# Phase 06: Integration & Testing

---
phase: 06
title: Integration & Testing
status: pending
effort: 4h
parallelization: Must run AFTER all other phases
depends_on: [phase-01, phase-02, phase-03, phase-04, phase-05]
blocks: []
---

## Overview

Implement E2E tests, integration tests, and verify full system functionality.

## File Ownership (Exclusive to This Phase)

```
apps/backend/
├── test/
│   ├── jest-e2e.json
│   ├── app.e2e-spec.ts
│   ├── projects.e2e-spec.ts
│   ├── lock.e2e-spec.ts
│   └── hook.e2e-spec.ts
└── jest.config.js

apps/frontend/
├── __tests__/
│   ├── components/
│   │   ├── project-card.test.tsx
│   │   └── lock-status.test.tsx
│   └── hooks/
│       ├── use-projects.test.ts
│       └── use-lock.test.ts
├── vitest.config.ts
└── playwright.config.ts

e2e/
├── full-flow.spec.ts
└── fixtures/
    └── test-project.json
```

## Implementation Steps

### Step 1: Backend Jest Configuration (30m)

**1.1 Create apps/backend/jest.config.js**

```javascript
module.exports = {
  moduleFileExtensions: ['js', 'json', 'ts'],
  rootDir: '.',
  testEnvironment: 'node',
  testRegex: '.e2e-spec.ts$',
  transform: {
    '^.+\\.(t|j)s$': 'ts-jest',
  },
  collectCoverageFrom: ['src/**/*.ts', '!src/**/*.module.ts'],
  coverageDirectory: './coverage',
  testTimeout: 30000,
};
```

**1.2 Create apps/backend/test/jest-e2e.json**

```json
{
  "moduleFileExtensions": ["js", "json", "ts"],
  "rootDir": "..",
  "testEnvironment": "node",
  "testRegex": ".e2e-spec.ts$",
  "transform": {
    "^.+\\.(t|j)s$": "ts-jest"
  }
}
```

### Step 2: Backend E2E Tests (1.5h)

**2.1 Create apps/backend/test/app.e2e-spec.ts**

```typescript
import { Test, TestingModule } from '@nestjs/testing';
import { INestApplication, ValidationPipe } from '@nestjs/common';
import * as request from 'supertest';
import { AppModule } from '../src/app.module';
import { PrismaService } from '../src/prisma/prisma.service';

describe('AppController (e2e)', () => {
  let app: INestApplication;
  let prisma: PrismaService;

  beforeAll(async () => {
    const moduleFixture: TestingModule = await Test.createTestingModule({
      imports: [AppModule],
    }).compile();

    app = moduleFixture.createNestApplication();
    app.useGlobalPipes(
      new ValidationPipe({
        transform: true,
        whitelist: true,
      }),
    );
    app.setGlobalPrefix('api');
    await app.init();

    prisma = app.get(PrismaService);
    await prisma.cleanDatabase();
  });

  afterAll(async () => {
    await prisma.cleanDatabase();
    await app.close();
  });

  describe('Health Check', () => {
    it('should be running', () => {
      expect(app).toBeDefined();
    });
  });
});
```

**2.2 Create apps/backend/test/projects.e2e-spec.ts**

```typescript
import { Test, TestingModule } from '@nestjs/testing';
import { INestApplication, ValidationPipe } from '@nestjs/common';
import * as request from 'supertest';
import { AppModule } from '../src/app.module';
import { PrismaService } from '../src/prisma/prisma.service';

describe('Projects (e2e)', () => {
  let app: INestApplication;
  let prisma: PrismaService;
  let projectId: string;

  beforeAll(async () => {
    const moduleFixture: TestingModule = await Test.createTestingModule({
      imports: [AppModule],
    }).compile();

    app = moduleFixture.createNestApplication();
    app.useGlobalPipes(new ValidationPipe({ transform: true, whitelist: true }));
    app.setGlobalPrefix('api');
    await app.init();

    prisma = app.get(PrismaService);
    await prisma.cleanDatabase();
  });

  afterAll(async () => {
    await prisma.cleanDatabase();
    await app.close();
  });

  describe('POST /api/projects', () => {
    it('should create a project', async () => {
      const createDto = {
        name: 'Test Project',
        repoUrl: 'https://github.com/test/repo',
        token: 'ghp_test_token',
        branch: 'main',
        docsPath: 'docs',
      };

      const response = await request(app.getHttpServer())
        .post('/api/projects')
        .send(createDto)
        .expect(201);

      expect(response.body).toHaveProperty('id');
      expect(response.body.name).toBe(createDto.name);
      expect(response.body.repoUrl).toBe(createDto.repoUrl);
      projectId = response.body.id;
    });

    it('should validate required fields', async () => {
      await request(app.getHttpServer())
        .post('/api/projects')
        .send({ name: 'Missing fields' })
        .expect(400);
    });
  });

  describe('GET /api/projects', () => {
    it('should return all projects', async () => {
      const response = await request(app.getHttpServer())
        .get('/api/projects')
        .expect(200);

      expect(Array.isArray(response.body)).toBe(true);
      expect(response.body.length).toBeGreaterThan(0);
    });
  });

  describe('GET /api/projects/:id', () => {
    it('should return a single project', async () => {
      const response = await request(app.getHttpServer())
        .get(`/api/projects/${projectId}`)
        .expect(200);

      expect(response.body.id).toBe(projectId);
    });

    it('should return 404 for non-existent project', async () => {
      await request(app.getHttpServer())
        .get('/api/projects/non-existent-id')
        .expect(404);
    });
  });

  describe('PUT /api/projects/:id', () => {
    it('should update a project', async () => {
      const updateDto = { name: 'Updated Project Name' };

      const response = await request(app.getHttpServer())
        .put(`/api/projects/${projectId}`)
        .send(updateDto)
        .expect(200);

      expect(response.body.name).toBe(updateDto.name);
    });
  });

  describe('DELETE /api/projects/:id', () => {
    it('should delete a project', async () => {
      await request(app.getHttpServer())
        .delete(`/api/projects/${projectId}`)
        .expect(200);

      await request(app.getHttpServer())
        .get(`/api/projects/${projectId}`)
        .expect(404);
    });
  });
});
```

**2.3 Create apps/backend/test/lock.e2e-spec.ts**

```typescript
import { Test, TestingModule } from '@nestjs/testing';
import { INestApplication, ValidationPipe } from '@nestjs/common';
import * as request from 'supertest';
import { AppModule } from '../src/app.module';
import { PrismaService } from '../src/prisma/prisma.service';

describe('Lock (e2e)', () => {
  let app: INestApplication;
  let prisma: PrismaService;
  let projectId: string;

  beforeAll(async () => {
    const moduleFixture: TestingModule = await Test.createTestingModule({
      imports: [AppModule],
    }).compile();

    app = moduleFixture.createNestApplication();
    app.useGlobalPipes(new ValidationPipe({ transform: true, whitelist: true }));
    app.setGlobalPrefix('api');
    await app.init();

    prisma = app.get(PrismaService);
    await prisma.cleanDatabase();

    // Create test project
    const project = await prisma.project.create({
      data: {
        name: 'Lock Test Project',
        repoUrl: 'https://github.com/test/lock-test',
        token: 'ghp_test',
      },
    });
    projectId = project.id;
  });

  afterAll(async () => {
    await prisma.cleanDatabase();
    await app.close();
  });

  describe('GET /api/projects/:id/lock', () => {
    it('should return null when no lock exists', async () => {
      const response = await request(app.getHttpServer())
        .get(`/api/projects/${projectId}/lock`)
        .expect(200);

      expect(response.body).toBeNull();
    });
  });

  describe('POST /api/projects/:id/lock', () => {
    it('should acquire a lock', async () => {
      const response = await request(app.getHttpServer())
        .post(`/api/projects/${projectId}/lock`)
        .send({ lockedBy: 'TestUser', reason: 'Testing' })
        .expect(201);

      expect(response.body.lockedBy).toBe('TestUser');
      expect(response.body.reason).toBe('Testing');
      expect(response.body).toHaveProperty('expiresAt');
    });

    it('should reject duplicate lock', async () => {
      const response = await request(app.getHttpServer())
        .post(`/api/projects/${projectId}/lock`)
        .send({ lockedBy: 'AnotherUser' })
        .expect(409);

      expect(response.body.message).toContain('already locked');
    });
  });

  describe('DELETE /api/projects/:id/lock', () => {
    it('should release a lock', async () => {
      const response = await request(app.getHttpServer())
        .delete(`/api/projects/${projectId}/lock`)
        .expect(200);

      expect(response.body.released).toBe(true);
    });

    it('should handle releasing non-existent lock', async () => {
      const response = await request(app.getHttpServer())
        .delete(`/api/projects/${projectId}/lock`)
        .expect(200);

      expect(response.body.released).toBe(false);
    });
  });
});
```

**2.4 Create apps/backend/test/hook.e2e-spec.ts**

```typescript
import { Test, TestingModule } from '@nestjs/testing';
import { INestApplication, ValidationPipe } from '@nestjs/common';
import * as request from 'supertest';
import { AppModule } from '../src/app.module';
import { PrismaService } from '../src/prisma/prisma.service';

describe('Hook API (e2e)', () => {
  let app: INestApplication;
  let prisma: PrismaService;
  let projectId: string;
  let apiKey: string;

  beforeAll(async () => {
    const moduleFixture: TestingModule = await Test.createTestingModule({
      imports: [AppModule],
    }).compile();

    app = moduleFixture.createNestApplication();
    app.useGlobalPipes(new ValidationPipe({ transform: true, whitelist: true }));
    app.setGlobalPrefix('api');
    await app.init();

    prisma = app.get(PrismaService);
    await prisma.cleanDatabase();

    // Create test project with API key
    const project = await prisma.project.create({
      data: {
        name: 'Hook Test Project',
        repoUrl: 'https://github.com/test/hook-test',
        token: 'ghp_test',
        docs: {
          create: [
            { fileName: 'README.md', content: '# Test', hash: 'abc123' },
            { fileName: 'GUIDE.md', content: '# Guide', hash: 'def456' },
          ],
        },
        apiKeys: {
          create: { key: 'sk_test_hook_key', name: 'Test Key' },
        },
      },
    });
    projectId = project.id;
    apiKey = 'sk_test_hook_key';
  });

  afterAll(async () => {
    await prisma.cleanDatabase();
    await app.close();
  });

  describe('Authentication', () => {
    it('should reject requests without API key', async () => {
      await request(app.getHttpServer())
        .get(`/api/hook/status/${projectId}`)
        .expect(401);
    });

    it('should reject requests with invalid API key', async () => {
      await request(app.getHttpServer())
        .get(`/api/hook/status/${projectId}`)
        .set('X-API-Key', 'invalid_key')
        .expect(401);
    });
  });

  describe('GET /api/hook/status/:projectId', () => {
    it('should return unlocked status', async () => {
      const response = await request(app.getHttpServer())
        .get(`/api/hook/status/${projectId}`)
        .set('X-API-Key', apiKey)
        .expect(200);

      expect(response.body.locked).toBe(false);
    });

    it('should return locked status after lock acquired', async () => {
      // Acquire lock
      await prisma.lock.create({
        data: {
          projectId,
          lockedBy: 'TechLead',
          expiresAt: new Date(Date.now() + 30 * 60 * 1000),
        },
      });

      const response = await request(app.getHttpServer())
        .get(`/api/hook/status/${projectId}`)
        .set('X-API-Key', apiKey)
        .expect(200);

      expect(response.body.locked).toBe(true);
      expect(response.body.lockedBy).toBe('TechLead');

      // Clean up
      await prisma.lock.deleteMany({ where: { projectId } });
    });
  });

  describe('GET /api/hook/docs/:projectId', () => {
    it('should return docs hash', async () => {
      const response = await request(app.getHttpServer())
        .get(`/api/hook/docs/${projectId}`)
        .set('X-API-Key', apiKey)
        .expect(200);

      expect(response.body).toHaveProperty('hash');
      expect(response.body.docsCount).toBe(2);
    });
  });

  describe('POST /api/hook/sync/:projectId', () => {
    it('should return all docs', async () => {
      const response = await request(app.getHttpServer())
        .post(`/api/hook/sync/${projectId}`)
        .set('X-API-Key', apiKey)
        .expect(201);

      expect(response.body.docs).toHaveLength(2);
      expect(response.body).toHaveProperty('hash');
      expect(response.body.docs[0]).toHaveProperty('fileName');
      expect(response.body.docs[0]).toHaveProperty('content');
    });
  });
});
```

### Step 3: Frontend Test Configuration (30m)

**3.1 Create apps/frontend/vitest.config.ts**

```typescript
import { defineConfig } from 'vitest/config';
import react from '@vitejs/plugin-react';
import path from 'path';

export default defineConfig({
  plugins: [react()],
  test: {
    environment: 'jsdom',
    globals: true,
    setupFiles: ['./__tests__/setup.ts'],
    include: ['__tests__/**/*.test.{ts,tsx}'],
    coverage: {
      provider: 'v8',
      reporter: ['text', 'html'],
    },
  },
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './'),
    },
  },
});
```

**3.2 Create apps/frontend/__tests__/setup.ts**

```typescript
import '@testing-library/jest-dom/vitest';
import { vi } from 'vitest';

// Mock next/navigation
vi.mock('next/navigation', () => ({
  useRouter: () => ({
    push: vi.fn(),
    replace: vi.fn(),
    back: vi.fn(),
  }),
  usePathname: () => '/projects',
  useParams: () => ({}),
}));

// Mock zustand
vi.mock('zustand');
```

### Step 4: Frontend Component Tests (1h)

**4.1 Create apps/frontend/__tests__/components/project-card.test.tsx**

```typescript
import { render, screen } from '@testing-library/react';
import { describe, it, expect, vi } from 'vitest';
import { ProjectCard } from '@/components/project-card';
import type { Project } from '@/lib/api';

const mockProject: Project = {
  id: 'test-1',
  name: 'Test Project',
  repoUrl: 'https://github.com/test/repo',
  branch: 'main',
  docsPath: 'docs',
  createdAt: new Date().toISOString(),
  updatedAt: new Date().toISOString(),
  locks: [],
};

describe('ProjectCard', () => {
  it('renders project name', () => {
    render(<ProjectCard project={mockProject} />);
    expect(screen.getByText('Test Project')).toBeInTheDocument();
  });

  it('shows unlocked badge when no lock', () => {
    render(<ProjectCard project={mockProject} />);
    expect(screen.getByText('Unlocked')).toBeInTheDocument();
  });

  it('shows locked badge when lock exists', () => {
    const lockedProject: Project = {
      ...mockProject,
      locks: [
        {
          id: 'lock-1',
          projectId: 'test-1',
          lockedBy: 'TechLead',
          lockedAt: new Date().toISOString(),
        },
      ],
    };

    render(<ProjectCard project={lockedProject} />);
    expect(screen.getByText('Locked')).toBeInTheDocument();
  });

  it('shows Open Editor button when unlocked', () => {
    render(<ProjectCard project={mockProject} />);
    expect(screen.getByText('Open Editor')).toBeInTheDocument();
  });

  it('shows View Only button when locked', () => {
    const lockedProject: Project = {
      ...mockProject,
      locks: [
        {
          id: 'lock-1',
          projectId: 'test-1',
          lockedBy: 'TechLead',
          lockedAt: new Date().toISOString(),
        },
      ],
    };

    render(<ProjectCard project={lockedProject} />);
    expect(screen.getByText('View Only')).toBeInTheDocument();
  });
});
```

**4.2 Create apps/frontend/__tests__/components/lock-status.test.tsx**

```typescript
import { render, screen } from '@testing-library/react';
import { describe, it, expect } from 'vitest';
import { LockStatus } from '@/components/lock-status';

describe('LockStatus', () => {
  it('renders unlocked when no lock', () => {
    render(<LockStatus lock={null} />);
    expect(screen.getByText('Unlocked')).toBeInTheDocument();
  });

  it('renders locked when lock exists', () => {
    const lock = {
      id: 'lock-1',
      projectId: 'test-1',
      lockedBy: 'TechLead',
      lockedAt: new Date().toISOString(),
    };

    render(<LockStatus lock={lock} />);
    expect(screen.getByText('Locked')).toBeInTheDocument();
  });
});
```

### Step 5: Integration Test Checklist (30m)

**5.1 Create TESTING.md in root**

```markdown
# Integration Testing Checklist

## Prerequisites
- [ ] PostgreSQL running via Docker
- [ ] Backend started on port 3001
- [ ] Frontend started on port 3000
- [ ] Test project created with API key

## Backend Tests

```bash
cd apps/backend
pnpm test:e2e
```

Expected results:
- [ ] All project CRUD tests pass
- [ ] All lock tests pass
- [ ] All hook API tests pass
- [ ] API key authentication works

## Frontend Tests

```bash
cd apps/frontend
pnpm test
```

Expected results:
- [ ] ProjectCard renders correctly
- [ ] LockStatus shows correct state
- [ ] Hook tests pass

## Manual Integration Tests

### 1. Project Lifecycle
- [ ] Create project from dashboard
- [ ] View project in list
- [ ] Open editor for project
- [ ] Update project settings
- [ ] Delete project

### 2. Lock Mechanism
- [ ] Lock acquired when opening editor
- [ ] Lock displayed in dashboard
- [ ] Lock banner shows for locked projects
- [ ] Lock released when closing editor
- [ ] WebSocket broadcasts lock events

### 3. Docs Management
- [ ] Sync docs from GitHub
- [ ] Edit doc in Monaco editor
- [ ] Save doc (Ctrl+S)
- [ ] Push doc to GitHub
- [ ] Preview updates in real-time

### 4. Hook Integration
- [ ] check-platform.sh detects lock
- [ ] check-platform.sh syncs docs
- [ ] protect-docs.sh blocks .docs/ writes
- [ ] Offline mode uses cached docs

### 5. WebSocket Real-time
- [ ] Connection established on page load
- [ ] Lock events received by other clients
- [ ] Reconnection after disconnect

## E2E Flow Test

1. Start fresh database
2. Create project via API
3. Generate API key
4. Run check-platform.sh (should sync)
5. Open editor (lock acquired)
6. Run check-platform.sh in another terminal (should fail - locked)
7. Close editor (lock released)
8. Run check-platform.sh again (should succeed)

## Performance Checks

- [ ] Projects list loads < 1s
- [ ] Editor loads < 2s
- [ ] Lock check API < 200ms
- [ ] WebSocket reconnects within 5s
```

---

## Verification Steps

```bash
# Run all backend tests
cd apps/backend && pnpm test:e2e

# Run all frontend tests
cd apps/frontend && pnpm test

# Manual verification
# Follow TESTING.md checklist
```

## Success Criteria

- [ ] All backend E2E tests pass
- [ ] All frontend component tests pass
- [ ] Manual integration checklist complete
- [ ] No console errors in browser
- [ ] WebSocket connections stable
- [ ] Hook scripts work end-to-end

---

## Test Coverage Goals

| Area | Target |
|------|--------|
| Backend Controllers | 80% |
| Backend Services | 70% |
| Frontend Components | 60% |
| Frontend Hooks | 50% |
| E2E Critical Paths | 100% |

---

## Known Limitations

1. **GitHub API mocking**: Tests skip actual GitHub calls
2. **WebSocket testing**: Manual verification recommended
3. **Hook scripts**: Require real Platform connection for full test

## Future Test Additions

- [ ] Playwright E2E tests
- [ ] Load testing for WebSocket
- [ ] Security penetration testing
- [ ] Accessibility testing (a11y)
</file>

<file path="plans/260103-1818-ai-toolkit-sync-platform/plan.md">
# AI Toolkit Sync Platform - Implementation Plan

---
title: "AI Toolkit Sync Platform"
description: "Web platform for centralized docs management for AI-assisted dev teams"
status: in-progress
priority: P1
effort: 32h
branch: main
tags: [nestjs, nextjs, prisma, websocket, monaco, platform]
created: 2026-01-03
updated: 2026-01-03
---

## Executive Summary

Build a web platform for centralized documentation management enabling:
- Project CRUD with GitHub repo connection
- Monaco-based docs editor with markdown preview
- Lock mechanism (auto-lock when editing)
- Real-time lock notifications via WebSocket
- API keys for Claude Code hooks
- Hook scripts for dev workstation integration

## Tech Stack

| Layer | Technology |
|-------|------------|
| Frontend | Next.js 14 App Router, Shadcn/ui, TanStack Query, Zustand, Monaco Editor |
| Backend | NestJS, Prisma, PostgreSQL, @nestjs/websockets, Octokit |
| Integration | Claude Code hooks (bash scripts) |

---

## Dependency Graph

```
Phase 01 (Infrastructure) ─────────────────┐
     │                                      │
     ├──► Phase 02 (Backend Services)       │
     │         │                            │
     │         ├──► Phase 05 (WebSocket)    │
     │         │                            │
     │         └──────────────────────┐     │
     │                                │     │
     └──► Phase 03 (Frontend Found.) ─┤     │
               │                      │     │
               └──► Phase 04 (Pages) ─┴──► Phase 06 (Testing)
```

## Parallelization Groups

| Group | Phases | Can Start After | Estimated Duration |
|-------|--------|-----------------|-------------------|
| A | Phase 01 | Start immediately | 4h |
| B | Phase 02 + Phase 03 | Group A complete | 8h (parallel) |
| C | Phase 04 + Phase 05 | Group B complete | 8h (parallel) |
| D | Phase 06 | Group C complete | 4h |

**Total Critical Path:** ~24h (vs 32h if sequential)

---

## File Ownership Matrix

Each file is owned by EXACTLY ONE phase. No cross-phase file conflicts.

### Phase 01: Infrastructure & Database
```
apps/backend/prisma/
  └── schema.prisma
  └── migrations/
apps/backend/src/prisma/
  └── prisma.service.ts
  └── prisma.module.ts
docker-compose.yml
.env.example
tsconfig.base.json
package.json (root)
apps/backend/package.json
apps/frontend/package.json
```

### Phase 02: Backend Core Services
```
apps/backend/src/
  ├── main.ts
  ├── app.module.ts
  ├── projects/
  │   ├── projects.controller.ts
  │   ├── projects.service.ts
  │   ├── projects.module.ts
  │   └── dto/
  ├── docs/
  │   ├── docs.controller.ts
  │   ├── docs.service.ts
  │   ├── docs.module.ts
  │   └── dto/
  ├── lock/
  │   ├── lock.controller.ts
  │   ├── lock.service.ts
  │   └── lock.module.ts
  ├── github/
  │   ├── github.service.ts
  │   └── github.module.ts
  └── common/
      ├── guards/
      │   └── api-key.guard.ts
      ├── filters/
      │   └── global-exception.filter.ts
      └── decorators/
```

### Phase 03: Frontend Foundation
```
apps/frontend/
  ├── app/
  │   ├── layout.tsx
  │   ├── page.tsx
  │   └── globals.css
  ├── lib/
  │   ├── providers.tsx
  │   ├── query-client.ts
  │   └── utils.ts
  ├── components/ui/
  │   └── (shadcn components)
  ├── stores/
  │   └── ui-store.ts
  ├── tailwind.config.ts
  └── next.config.js
```

### Phase 04: Frontend Features
```
apps/frontend/
  ├── app/(dashboard)/
  │   ├── layout.tsx
  │   ├── projects/
  │   │   ├── page.tsx
  │   │   └── [id]/
  │   │       ├── page.tsx
  │   │       └── settings/page.tsx
  │   └── editor/
  │       └── [id]/[docId]/page.tsx
  ├── components/
  │   ├── project-card.tsx
  │   ├── create-project-dialog.tsx
  │   ├── monaco-editor.tsx
  │   ├── markdown-preview.tsx
  │   ├── lock-status.tsx
  │   ├── sidebar.tsx
  │   └── header.tsx
  └── hooks/
      ├── use-websocket.ts
      ├── use-projects.ts
      └── use-lock.ts
```

### Phase 05: Backend Real-time & Hooks API
```
apps/backend/src/
  ├── websocket/
  │   ├── websocket.gateway.ts
  │   └── websocket.module.ts
  └── hook/
      ├── hook.controller.ts
      ├── hook.service.ts
      └── hook.module.ts
scripts/
  ├── check-platform.sh
  └── protect-docs.sh
```

### Phase 06: Integration & Testing
```
apps/backend/test/
  ├── app.e2e-spec.ts
  ├── projects.e2e-spec.ts
  └── lock.e2e-spec.ts
apps/frontend/
  └── __tests__/
      ├── components/
      └── hooks/
jest.config.js (backend)
vitest.config.ts (frontend)
playwright.config.ts
```

---

## Phase Details

| Phase | File | Description | Status |
|-------|------|-------------|--------|
| 01 | [phase-01-infrastructure-database.md](./phase-01-infrastructure-database.md) | Prisma, Docker, env setup | ✅ DONE (2026-01-03) |
| 02 | [phase-02-backend-core-services.md](./phase-02-backend-core-services.md) | NestJS controllers/services | Pending |
| 03 | [phase-03-frontend-foundation.md](./phase-03-frontend-foundation.md) | Next.js, Shadcn, state | Pending |
| 04 | [phase-04-frontend-features.md](./phase-04-frontend-features.md) | Pages, components, hooks | Pending |
| 05 | [phase-05-backend-realtime-hooks.md](./phase-05-backend-realtime-hooks.md) | WebSocket, Claude hooks | Pending |
| 06 | [phase-06-integration-testing.md](./phase-06-integration-testing.md) | E2E, unit tests | Pending |

---

## Execution Strategy

### Prerequisites
- Node.js 20+
- Docker + Docker Compose
- PostgreSQL client (optional)
- pnpm (recommended)

### Execution Commands

```bash
# Group A: Start Phase 01
coder phase-01

# Group B: Run Phase 02 + Phase 03 in parallel
coder phase-02 &
coder phase-03 &
wait

# Group C: Run Phase 04 + Phase 05 in parallel
coder phase-04 &
coder phase-05 &
wait

# Group D: Finalize with Phase 06
coder phase-06
```

### Conflict Prevention Strategy

1. **Strict File Ownership**: Each file belongs to exactly one phase
2. **No Cross-Phase Imports During Development**: Phases use interface contracts
3. **Integration Points Defined**: Clear API contracts between frontend/backend
4. **Shared Types Package**: Common types in `libs/shared/types.ts` (owned by Phase 01)

---

## API Contracts

### REST Endpoints (Backend -> Frontend)

| Endpoint | Method | Response |
|----------|--------|----------|
| `GET /projects` | GET | `Project[]` |
| `POST /projects` | POST | `Project` |
| `GET /projects/:id` | GET | `Project` |
| `PUT /projects/:id` | PUT | `Project` |
| `DELETE /projects/:id` | DELETE | `void` |
| `GET /projects/:id/docs` | GET | `Doc[]` |
| `GET /projects/:id/docs/:file` | GET | `Doc` |
| `PUT /projects/:id/docs/:file` | PUT | `Doc` |
| `POST /projects/:id/docs/sync` | POST | `{success: boolean}` |
| `GET /projects/:id/lock` | GET | `Lock \| null` |
| `POST /projects/:id/lock` | POST | `Lock` |
| `DELETE /projects/:id/lock` | DELETE | `void` |

### Hook API (Backend -> Claude Code)

| Endpoint | Method | Auth | Response |
|----------|--------|------|----------|
| `GET /hook/status/:id` | GET | API Key | `{locked, lockedBy?, lockedAt?}` |
| `GET /hook/docs/:id` | GET | API Key | `{hash}` |
| `POST /hook/sync/:id` | POST | API Key | `{docs: DocFile[]}` |

### WebSocket Events

| Event | Direction | Payload |
|-------|-----------|---------|
| `lock:acquired` | Server -> Client | `{projectId, lockedBy, lockedAt}` |
| `lock:released` | Server -> Client | `{projectId}` |
| `doc:updated` | Server -> Client | `{projectId, docId, hash}` |

---

## Database Schema

```prisma
model Project {
  id        String   @id @default(cuid())
  name      String
  repoUrl   String
  token     String   // Encrypted GitHub PAT
  branch    String   @default("main")
  docsPath  String   @default("docs")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  docs      Doc[]
  locks     Lock[]
  apiKeys   ApiKey[]
}

model Doc {
  id        String   @id @default(cuid())
  projectId String
  project   Project  @relation(fields: [projectId], references: [id])
  fileName  String
  content   String   @db.Text
  hash      String
  version   Int      @default(1)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  @@unique([projectId, fileName])
}

model Lock {
  id        String    @id @default(cuid())
  projectId String    @unique
  project   Project   @relation(fields: [projectId], references: [id])
  lockedBy  String
  lockedAt  DateTime  @default(now())
  expiresAt DateTime?
  reason    String?
  @@index([projectId])
}

model ApiKey {
  id        String   @id @default(cuid())
  projectId String
  project   Project  @relation(fields: [projectId], references: [id])
  key       String   @unique
  name      String
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
}
```

---

## Success Criteria

- [ ] Project CRUD with GitHub repo connection working
- [ ] Monaco editor loads and saves docs
- [ ] Lock acquired on editor open, released on close
- [ ] WebSocket broadcasts lock status changes
- [ ] API keys can be generated for hook auth
- [ ] check-platform.sh blocks dev when locked
- [ ] protect-docs.sh blocks .docs/ and docs/ writes
- [ ] All E2E tests pass

---

## Validation Summary

**Validated:** 2026-01-03
**Questions asked:** 6

### Confirmed Decisions
- **Package manager**: pnpm (monorepo workspaces)
- **Lock TTL**: 30 minutes auto-expire
- **GitHub tokens**: AES-256 encrypted in database (not env vars)
- **Database setup**: Docker Compose for PostgreSQL
- **Offline mode**: Allow cached `.docs/` when platform unreachable
- **Phase 05 cross-ownership**: Accepted - Phase 05 can modify `LockService` for WebSocket notifications

### Action Items
- [ ] Add `crypto.service.ts` in Phase 02 for AES-256 token encryption
- [ ] Update `ProjectsService` to encrypt/decrypt tokens via CryptoService

---

## Unresolved Questions

1. **Hosting provider**: Not decided by CEO. Plan assumes Docker-based deployment.
2. **Auth for platform UI**: MVP skips auth. Add OAuth later if needed.
3. ~~**Lock TTL**: Defaulting to 30 minutes auto-expire. Confirm with team.~~ ✅ Confirmed
4. **Multi-project per repo**: Scope limited to 1 project = 1 repo for MVP.

---

## References

- Brainstorm: `plans/reports/brainstorm-260103-1704-ai-toolkit-sync-platform.md`
- NestJS research: `plans/reports/researcher-260103-1819-nestjs-prisma-best-practices.md`
- Next.js research: `plans/reports/researcher-260103-1819-nextjs14-monaco-platform.md`
- Design system: `docs/design-guidelines.md`
- Wireframes: `docs/wireframes/`

---

*Generated: 2026-01-03*
</file>

<file path="plans/reports/brainstorm-260103-1704-ai-toolkit-sync-platform.md">
# Brainstorm Report: AI Toolkit Sync Platform

**Date:** 2026-01-03
**Session ID:** 260103-1704
**Updated:** 260103-1802
**Status:** Completed (Updated: Hybrid .docs/ sync approach)

---

## Table of Contents

1. [Executive Summary](#executive-summary)
2. [Problem Statement](#problem-statement)
3. [Requirements Analysis](#requirements-analysis)
4. [Evaluated Approaches](#evaluated-approaches)
5. [Recommended Solution](#recommended-solution)
6. [System Architecture](#system-architecture)
7. [Workflow Design](#workflow-design)
8. [Technical Specifications](#technical-specifications)
9. [Security Considerations](#security-considerations)
10. [Implementation Roadmap](#implementation-roadmap)
11. [Risk Assessment](#risk-assessment)
12. [Success Metrics](#success-metrics)
13. [Next Steps](#next-steps)
14. [Unresolved Questions](#unresolved-questions)

---

## Executive Summary

### Problem
Multi-developer environment using AI-assisted coding (Claude Code) produces inconsistent code due to:
- Different devs → different prompts → different code styles
- No centralized "source of truth" for AI to follow
- Docs can be accidentally modified, causing AI to deviate from standards

### Solution
Build a **Web Platform** that:
- Centralizes 6 docs files as source of truth
- Only Tech Lead can modify docs via Platform
- Auto-syncs to all dev workstations
- Locks project when docs being updated
- Integrates with Claude Code via hooks

### Key Decisions
- **Tech Stack:** Next.js (frontend) + NestJS (backend) + Prisma + PostgreSQL
- **Git Provider:** GitHub only (experimental phase, GitLab deferred)
- **Sync Method:** Platform API → `.docs/` folder (gitignored, separate from git-tracked `docs/`)
- **Lock Mechanism:** Auto-lock when Tech Lead opens editor
- **Workflow:** Hybrid (update docs only for major changes)
- **Protection:** Branch protection + Claude Code hooks + `.docs/` isolation

---

## Problem Statement

### Current Situation
When working solo, developer workflow is:
1. Brainstorm → Plan → Code (with AI assistance)
2. Update docs as part of development
3. Commit code + docs together
4. Push to repository

### Problems in Team Environment

| Problem | Impact | Root Cause |
|---------|--------|------------|
| Inconsistent code style | Merge conflicts, code review burden | Different prompts → different AI outputs |
| Docs modification conflicts | Architecture drift | Multiple devs editing docs/ |
| No single source of truth | AI follows outdated/wrong patterns | Docs not centralized/protected |
| No version control for AI context | Hard to trace why AI generated certain code | No audit trail |

### CEO Requirements
1. Sync system architecture docs for ALL developers
2. AI must read 6 docs files before coding
3. Devs cannot modify docs (or need permission)
4. Some files are "source of truth" - must be protected
5. Build a web platform for management

---

## Requirements Analysis

### Functional Requirements

| ID | Requirement | Priority |
|----|-------------|----------|
| FR-1 | Manage 6 docs files per project | Must |
| FR-2 | Only Tech Lead can edit docs | Must |
| FR-3 | Lock project while editing | Must |
| FR-4 | Sync docs to dev workstations | Must |
| FR-5 | Integrate with GitHub/GitLab | Must |
| FR-6 | Real-time notification when locked | Should |
| FR-7 | Version history for docs | Could |
| FR-8 | Audit log for changes | Could |

### Non-Functional Requirements

| ID | Requirement | Target |
|----|-------------|--------|
| NFR-1 | Availability | 99.9% uptime |
| NFR-2 | Latency (lock check) | < 200ms |
| NFR-3 | Concurrent users | 10-30 |
| NFR-4 | Scalability | Multi-project support |
| NFR-5 | Security | Encrypted tokens, API key auth |

### Constraints

- Team size: Small (< 10 devs)
- Git provider: **GitHub only** (experimental phase, no GitLab Enterprise)
- MVP timeline: Simple web platform
- Hosting: TBD (develop local first)
- Auth: Not needed for MVP

---

## Evaluated Approaches

### Option A: GitHub-Native (Not Selected)

**Concept:** Leverage GitHub features only, no new platform.

**Implementation:**
- Protected files via GitHub Actions
- CODEOWNERS for approval
- Lock via `.docs-lock` file
- Claude Code hooks check lock

**Pros:**
- Zero new infrastructure
- 1-2 weeks to implement
- Free (uses existing GitHub)
- No new tools for devs

**Cons:**
- No visual UI for Tech Lead
- Crude lock mechanism
- Manual process

**Verdict:** Good for MVP, but limited scalability.

---

### Option B: Simple Web Platform (Selected)

**Concept:** Separate frontend + backend API for docs management.

**Implementation:**
- Next.js frontend application
- NestJS backend API
- PostgreSQL for metadata + cache
- GitHub integration via Octokit
- WebSocket for real-time notifications
- Claude Code hooks for sync + protection

**Pros:**
- Good UX for Tech Lead
- Real-time lock mechanism
- Centralized control
- Extensible architecture

**Cons:**
- Need to maintain new system
- Additional hosting cost
- Longer development time

**Verdict:** Best balance of features and complexity.

---

### Option C: Hybrid (GitHub + Lock API)

**Concept:** GitHub as source of truth + lightweight Edge function for lock.

**Implementation:**
- Tech Lead edits on GitHub Web
- Edge function (Cloudflare/Vercel) for lock API
- GitHub webhook triggers lock API
- Claude Code hooks check lock

**Pros:**
- Simple, stateless, fast
- Minimal infrastructure
- GitHub remains source of truth
- Easy to extend

**Cons:**
- No fancy UI
- Manual lock/unlock

**Verdict:** Good for very small teams, but less UX.

---

### Comparison Matrix

| Criteria | Option A | Option B | Option C |
|----------|----------|----------|----------|
| Time to MVP | 1-2 weeks | 3-4 weeks | 2 weeks |
| Infrastructure | None | Backend + DB | Edge function |
| Monthly cost | Free | $20-50 | Free tier |
| Tech Lead UX | Low | High | Medium |
| Scalability | Limited | High | High |
| Maintenance | Low | High | Low |
| Lock mechanism | File-based | Real-time | Near real-time |

**Selected:** Option B - Simple Web Platform

---

## Recommended Solution

### Solution Overview

```
AI TOOLKIT SYNC PLATFORM
═══════════════════════

PURPOSE: Centralize docs management for AI-assisted development teams

COMPONENTS:
┌─────────────────────────────────────────────────────────────────────┐
│                         WEB PLATFORM                                │
│  • Dashboard: Project overview, status                              │
│  • Docs Editor: Monaco editor for markdown                          │
│  • Lock Manager: Auto-lock/unlock mechanism                         │
│  • Sync Service: Push to Git, notify devs                           │
└─────────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────────┐
│                       GIT PROVIDER                                  │
│  • GitHub integration (Octokit)                                        │
│  • Source of truth for docs/                                        │
│  • Branch protection enabled                                        │
└─────────────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────────┐
│                    DEV WORKSTATIONS                                 │
│  • Claude Code CLI with hooks                                       │
│  • Pre-session: Check lock + sync docs to .docs/                    │
│  • Pre-write: Block .docs/ and docs/ modifications                  │
│  • CLAUDE.md references .docs/ (Platform-synced)                    │
└─────────────────────────────────────────────────────────────────────┘
```

### Core Features

| Feature | Description |
|---------|-------------|
| Project Management | CRUD for projects, Git connection settings |
| Docs Editor | Monaco editor with markdown preview |
| Auto-Lock | Lock acquired when editor opens |
| Real-time Notify | WebSocket broadcast to all connected devs |
| Git Sync | Two-way sync with GitHub/GitLab |
| API Keys | Project-scoped keys for Claude Code hooks |
| Version Tracking | Hash-based version for quick sync check |

### Protected Docs Files

| File | Purpose |
|------|---------|
| `project-overview-pdr.md` | Product requirements, scope |
| `code-standards.md` | Coding conventions, patterns |
| `codebase-summary.md` | Project structure, key files |
| `design-guidelines.md` | UI/UX standards |
| `deployment-guide.md` | Build, deploy instructions |
| `system-architecture.md` | Technical architecture |

---

## System Architecture

### High-Level Architecture

```
┌────────────────────────────────────────────────────────────────────────────┐
│                           ECOSYSTEM OVERVIEW                                │
└────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│  ┌───────────────────┐         ┌───────────────────┐                        │
│  │     TECH LEAD     │         │       DEV         │                        │
│  │    WORKSTATION    │         │    WORKSTATION    │                        │
│  └─────────┬─────────┘         └─────────┬─────────┘                        │
│            │                             │                                   │
│            │ HTTPS                       │ HTTPS (check lock + sync)        │
│            ▼                             ▼                                   │
│  ┌─────────────────────────────────────────────────────────────────────┐     │
│  │                      NEXT.JS FRONTEND                               │     │
│  │                     (React + TypeScript)                            │     │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐              │     │
│  │  │   Dashboard  │  │  Project Mgmt│  │  Docs Editor │              │     │
│  │  └──────────────┘  └──────────────┘  └──────────────┘              │     │
│  └──────────────────────────────┬──────────────────────────────────────┘     │
│                                 │ REST API / WebSocket                       │
│                                 ▼                                            │
│  ┌─────────────────────────────────────────────────────────────────────┐     │
│  │                      NESTJS BACKEND                                 │     │
│  │                   (TypeScript + Prisma)                            │     │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐              │     │
│  │  │ REST API     │  │  WebSocket   │  │  Services    │              │     │
│  │  │ Controllers  │  │  Gateway     │  │  (Business)  │              │     │
│  │  └──────────────┘  └──────────────┘  └──────────────┘              │     │
│  │         │                 │                 │                       │     │
│  │         └─────────────────┼─────────────────┘                       │     │
│  │                           ▼                                         │     │
│  │                 ┌──────────────────┐                                │     │
│  │                 │   Core Services  │                                │     │
│  │                 │  ┌────────────┐  │                                │     │
│  │                 │  │ ProjectSvc │  │                                │     │
│  │                 │  │  LockSvc   │  │                                │     │
│  │                 │  │  DocsSvc   │  │                                │     │
│  │                 │  │  SyncSvc   │  │                                │     │
│  │                 │  └────────────┘  │                                │     │
│  │                 └────────┬─────────┘                                │     │
│  │                          │                                          │     │
│  │         ┌────────────────┼────────────────┐                         │     │
│  │         ▼                ▼                ▼                         │     │
│  │  ┌────────────┐   ┌────────────┐   ┌────────────┐                   │     │
│  │  │ PostgreSQL │   │   GitHub   │   │   Redis    │                   │     │
│  │  │  (Prisma)  │   │  (Octokit) │   │  (Pub/Sub) │                   │     │
│  │  │            │   │            │   │  Optional  │                   │     │
│  │  └────────────┘   └─────┬──────┘   └────────────┘                   │     │
│  │                         │                                           │     │
│  └─────────────────────────┼───────────────────────────────────────────┘     │
│                            │                                                 │
│                            │ REST API                                        │
│                            ▼                                                 │
│  ┌─────────────────────────────────────────────────────────────────────┐     │
│  │                          GITHUB                                     │     │
│  │                    (via Octokit API)                               │     │
│  │  ┌─────────────────────────────────────────────────────────────┐    │     │
│  │  │  Repository                                                  │    │     │
│  │  │  ├── docs/                                                   │    │     │
│  │  │  │   ├── project-overview-pdr.md      (Source of Truth)     │    │     │
│  │  │  │   ├── code-standards.md            (Protected)           │    │     │
│  │  │  │   ├── codebase-summary.md          (Protected)           │    │     │
│  │  │  │   ├── design-guidelines.md         (Protected)           │    │     │
│  │  │  │   ├── deployment-guide.md          (Protected)           │    │     │
│  │  │  │   └── system-architecture.md       (Protected)           │    │     │
│  │  │  └── src/  (Dev code area)                                  │    │     │
│  │  └─────────────────────────────────────────────────────────────┘    │     │
│  └─────────────────────────────────────────────────────────────────────┘     │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### Component Diagram

```
╔═══════════════════════════════════════════════════════════════════════════╗
║                    FRONTEND LAYER (Next.js)                                ║
╠═══════════════════════════════════════════════════════════════════════════╣
║                                                                           ║
║  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐           ║
║  │   Dashboard     │  │   Project Mgmt  │  │   Docs Editor   │           ║
║  │                 │  │                 │  │                 │           ║
║  │ • Projects list │  │ • Create/Edit   │  │ • Monaco Editor │           ║
║  │ • Lock status   │  │ • Git settings  │  │ • Markdown prev │           ║
║  │ • Activity log  │  │ • API keys      │  │ • Auto-save     │           ║
║  │ • Quick actions │  │ • Members       │  │ • Push button   │           ║
║  └────────┬────────┘  └────────┬────────┘  └────────┬────────┘           ║
║           │                    │                    │                     ║
║           └────────────────────┼────────────────────┘                     ║
║                                ▼                                          ║
║                    ┌─────────────────────┐                                ║
║                    │    State Manager    │                                ║
║                    │   (React Query /    │                                ║
║                    │    Zustand)         │                                ║
║                    └──────────┬──────────┘                                ║
╚═══════════════════════════════╪═══════════════════════════════════════════╝
                                │ HTTP / WebSocket
╔═══════════════════════════════╪═══════════════════════════════════════════╗
║                  BACKEND LAYER│ (NestJS)                                   ║
╠═══════════════════════════════╪═══════════════════════════════════════════╣
║                               ▼                                           ║
║  ┌────────────────────────────────────────────────────────────────────┐   ║
║  │                     CONTROLLERS + GATEWAY                           │   ║
║  │                                                                     │   ║
║  │  /projects/*           Project CRUD, settings                       │   ║
║  │  /projects/:id/docs    Docs management                              │   ║
║  │  /projects/:id/lock    Lock acquire/release                         │   ║
║  │  /hook/*               Claude Code integration                      │   ║
║  │  WebSocket Gateway     Real-time notifications                      │   ║
║  └────────────────────────────────────────────────────────────────────┘   ║
║                               │                                           ║
╠═══════════════════════════════╪═══════════════════════════════════════════╣
║                  SERVICE LAYER│                                            ║
╠═══════════════════════════════╪═══════════════════════════════════════════╣
║                               ▼                                           ║
║  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐      ║
║  │ ProjectSvc  │  │  LockSvc    │  │  DocsSvc    │  │  SyncSvc    │      ║
║  │             │  │             │  │             │  │             │      ║
║  │ • CRUD      │  │ • Acquire   │  │ • Get/Set   │  │ • Import    │      ║
║  │ • Settings  │  │ • Release   │  │ • Validate  │  │ • Export    │      ║
║  │ • API keys  │  │ • Check     │  │ • Hash      │  │ • Push/Pull │      ║
║  │             │  │ • Timeout   │  │ • Version   │  │             │      ║
║  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘      ║
║         │               │               │               │                 ║
║         └───────────────┼───────────────┼───────────────┘                 ║
║                         ▼               ▼                                 ║
╚═══════════════════════════════════════════════════════════════════════════╝
                          │               │
╔═════════════════════════╪═══════════════╪═════════════════════════════════╗
║              DATA LAYER │               │                                  ║
╠═════════════════════════╪═══════════════╪═════════════════════════════════╣
║                         ▼               ▼                                 ║
║  ┌──────────────────────────┐  ┌──────────────────────────┐               ║
║  │       PostgreSQL         │  │         GitHub           │               ║
║  │       (via Prisma)       │  │       (Octokit)          │               ║
║  │                          │  │                          │               ║
║  │  • Project metadata      │  │  • Actual docs files     │               ║
║  │  • Docs cache            │  │  • Commit history        │               ║
║  │  • Lock status           │  │  • Branch protection     │               ║
║  │  • API keys              │  │                          │               ║
║  │  • Audit logs            │  │                          │               ║
║  └──────────────────────────┘  └──────────────────────────┘               ║
╚═══════════════════════════════════════════════════════════════════════════╝
```

### Database Schema

```prisma
// schema.prisma

model Project {
  id          String   @id @default(cuid())
  name        String

  // GitHub integration
  repoUrl     String
  token       String   // Encrypted GitHub PAT
  branch      String   @default("main")

  docsPath    String   @default("docs")
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  docs        Doc[]
  locks       Lock[]
  apiKeys     ApiKey[]
}

model Doc {
  id        String   @id @default(cuid())
  projectId String
  project   Project  @relation(fields: [projectId], references: [id])

  fileName  String   // e.g., "code-standards.md"
  content   String   @db.Text
  hash      String   // MD5 for quick comparison
  version   Int      @default(1)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([projectId, fileName])
}

model Lock {
  id        String    @id @default(cuid())
  projectId String    @unique
  project   Project   @relation(fields: [projectId], references: [id])

  lockedBy  String    // Tech Lead username
  lockedAt  DateTime  @default(now())
  expiresAt DateTime? // Auto-unlock after timeout
  reason    String?

  @@index([projectId])
}

model ApiKey {
  id        String   @id @default(cuid())
  projectId String
  project   Project  @relation(fields: [projectId], references: [id])

  key       String   @unique // For Claude Code hooks
  name      String   // e.g., "Dev Machine 1"
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
}
```

### API Endpoints (NestJS)

| Endpoint | Method | Auth | Description |
|----------|--------|------|-------------|
| `/projects` | GET | Session | List all projects |
| `/projects` | POST | Session | Create project |
| `/projects/:id` | GET | Session | Get project |
| `/projects/:id` | PUT | Session | Update project |
| `/projects/:id` | DELETE | Session | Delete project |
| `/projects/:id/docs` | GET | Session | Get all docs |
| `/projects/:id/docs/:file` | GET | Session | Get doc |
| `/projects/:id/docs/:file` | PUT | Session | Update doc |
| `/projects/:id/docs/sync` | POST | Session | Push to Git |
| `/projects/:id/lock` | GET | Session | Check lock |
| `/projects/:id/lock` | POST | Session | Acquire lock |
| `/projects/:id/lock` | DELETE | Session | Release lock |
| `/hook/status/:id` | GET | API Key | Check status |
| `/hook/docs/:id` | GET | API Key | Get docs hash |
| `/hook/sync/:id` | POST | API Key | Get docs content |

---

## Workflow Design

### Recommended Workflow: Hybrid

```
┌─────────────────────────────────────────────────────────────────────────────┐
│              HYBRID WORKFLOW: UPDATE DOCS ON MAJOR CHANGES                  │
└─────────────────────────────────────────────────────────────────────────────┘

PRINCIPLE:
  • Docs only update for BREAKING CHANGE or NEW MAJOR FEATURE
  • Minor changes/bug fixes: no docs update needed
  • Devs code following current docs, never self-modify

WHEN TO UPDATE DOCS:
  ✅ New major feature (payment, auth, etc.)
  ✅ Architecture change (new service, new database, etc.)
  ✅ Code standards change
  ✅ API breaking change

  ❌ Bug fixes
  ❌ Minor refactoring
  ❌ UI tweaks
  ❌ Performance optimization

FLOW:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Day 1-N: Devs work normally
  │
  ├── Dev 1: feature-login → PR → Tech Lead review → Merge
  ├── Dev 2: bugfix-cart → PR → Tech Lead review → Merge
  └── Dev 3: feature-payment → PR → Tech Lead review → (major feature)
      │
      └── Tech Lead sees payment feature needs architecture doc update
          │
          └── BEFORE MERGE:
              1. Lock project on Platform
              2. Update system-architecture.md
              3. Push to main
              4. Unlock
              5. Merge PR
              6. Notify devs: "Restart Claude session - docs updated"
```

### Flow Diagrams

#### Flow 1: Tech Lead Edit Docs

```
Tech Lead                 Platform                    Database              Git
    │                        │                           │                   │
    │  1. Open editor        │                           │                   │
    │───────────────────────▶│                           │                   │
    │                        │  2. Check existing lock   │                   │
    │                        │──────────────────────────▶│                   │
    │                        │◀──────────────────────────│                   │
    │                        │                           │                   │
    │                        │  3. Acquire lock          │                   │
    │                        │──────────────────────────▶│                   │
    │                        │                           │                   │
    │                        │  4. Get latest docs       │                   │
    │                        │──────────────────────────────────────────────▶│
    │                        │◀──────────────────────────────────────────────│
    │                        │                           │                   │
    │  5. Show editor        │                           │                   │
    │◀───────────────────────│                           │                   │
    │                        │                           │                   │
    │                        │  6. Broadcast: "LOCKED"   │                   │
    │                        │═══════════════════════════════════════▶ All Devs
    │                        │                           │                   │
    │  7. Edit content...    │                           │                   │
    │                        │                           │                   │
    │  8. Click Save         │                           │                   │
    │───────────────────────▶│                           │                   │
    │                        │  9. Push to Git           │                   │
    │                        │──────────────────────────────────────────────▶│
    │                        │◀──────────────────────────────────────────────│
    │                        │                           │                   │
    │                        │  10. Update cache + hash  │                   │
    │                        │──────────────────────────▶│                   │
    │                        │                           │                   │
    │                        │  11. Release lock         │                   │
    │                        │──────────────────────────▶│                   │
    │                        │                           │                   │
    │  12. Success!          │  13. Broadcast: "UPDATED" │                   │
    │◀───────────────────────│═══════════════════════════════════════▶ All Devs
    │                        │                           │                   │
```

#### Flow 2: Dev Start Coding (Hybrid .docs/ Approach)

```
Dev                    Claude Code Hook              Platform API
 │                           │                            │
 │  1. Start Claude session  │                            │
 │──────────────────────────▶│                            │
 │                           │                            │
 │                           │  2. Check lock status      │
 │                           │───────────────────────────▶│
 │                           │◀───────────────────────────│
 │                           │                            │
 │                   ┌───────┴───────┐                    │
 │                   │  Lock Status? │                    │
 │                   └───────┬───────┘                    │
 │                           │                            │
 │           ┌───────────────┼───────────────┐            │
 │           ▼ LOCKED        │ UNLOCKED      │            │
 │    ┌─────────────┐        │               │            │
 │    │ Show Error  │        │               │            │
 │    │ "Wait..."   │        │               │            │
 │    │ EXIT(1)     │        │               │            │
 │◀───┴─────────────┘        │               │            │
 │                           ▼               │            │
 │                   ┌─────────────┐         │            │
 │                   │ Check docs  │         │            │
 │                   │   hash      │─────────┘            │
 │                   └──────┬──────┘                      │
 │                          │                             │
 │                   ┌──────┴──────┐                      │
 │                   │ Hash match? │                      │
 │                   └──────┬──────┘                      │
 │                          │                             │
 │           ┌──────────────┼──────────────┐              │
 │           ▼ DIFFERENT    │ SAME         │              │
 │    ┌─────────────────┐   │              │              │
 │    │ Sync docs to    │   │              │              │
 │    │ .docs/ folder   │───┘              │              │
 │    │ (gitignored)    │                  │              │
 │    └────────┬────────┘                  │              │
 │             │                           │              │
 │             ▼                           ▼              │
 │    ┌───────────────────────────────────────┐           │
 │    │        Continue with Claude Code      │           │
 │    │  Claude reads from .docs/ (Platform)  │           │
 │◀───│  Both .docs/ and docs/ are READ-ONLY  │           │
 │    └───────────────────────────────────────┘           │
```

### Local Folder Structure (Dev Workstation)

```
project/
├── .docs/                    ← Platform sync target (gitignored)
│   ├── .sync-hash            ← Hash for quick comparison
│   ├── project-overview-pdr.md
│   ├── code-standards.md
│   ├── codebase-summary.md
│   ├── design-guidelines.md
│   ├── deployment-guide.md
│   └── system-architecture.md
├── docs/                     ← Git tracked (GitHub viewing only)
│   └── *.md                  ← Updated when Tech Lead pushes via Platform
├── .gitignore                ← Contains ".docs/"
├── CLAUDE.md                 ← References .docs/ for AI context
└── src/
```

### Why Hybrid Approach?

| Benefit | Description |
|---------|-------------|
| Clean git status | `.docs/` never pollutes `git status` |
| Zero conflict risk | Platform and Git don't interfere |
| Clear source of truth | Claude always reads Platform-synced `.docs/` |
| GitHub friendly | `docs/` visible on GitHub for viewing |
| Rollback safe | `git checkout` doesn't affect Claude's context |

### Developer Initial Setup (First-time)

When a developer joins the project or clones the repo for the first time:

```
┌─────────────────────────────────────────────────────────────────────┐
│                    FIRST-TIME SETUP FLOW                            │
└─────────────────────────────────────────────────────────────────────┘

1. Clone repo
   $ git clone https://github.com/org/project.git
   $ cd project

2. Get API credentials from Tech Lead
   - AI_TOOLKIT_PLATFORM_URL (Platform URL)
   - AI_TOOLKIT_API_KEY (Project-specific key)
   - AI_TOOLKIT_PROJECT_ID (Project ID)

3. Configure environment
   $ cat >> ~/.bashrc << 'EOF'
   export AI_TOOLKIT_PLATFORM_URL="https://platform.example.com"
   export AI_TOOLKIT_API_KEY="sk-xxxx"
   export AI_TOOLKIT_PROJECT_ID="proj_xxxx"
   EOF
   $ source ~/.bashrc

4. Install Claude Code hooks
   $ mkdir -p ~/.claude/hooks
   $ cp ./scripts/check-platform.sh ~/.claude/hooks/
   $ cp ./scripts/protect-docs.sh ~/.claude/hooks/
   $ chmod +x ~/.claude/hooks/*.sh

5. First Claude session
   $ claude
   → Hook auto-creates .docs/ and syncs from Platform
   → Ready to code!
```

#### Edge Cases

| Scenario | Behavior |
|----------|----------|
| Platform down on first run | ❌ Error: "No cached docs. Please connect to Platform first." |
| Platform down after first sync | ✅ Uses cached `.docs/` (offline mode) |
| `.docs/` accidentally deleted | ✅ Re-created on next session |
| Wrong API key | ❌ API call fails after 3 retries |

---

## Technical Specifications

### Tech Stack

| Layer | Technology | Rationale |
|-------|------------|-----------|
| **Frontend** | | |
| Framework | Next.js 14 (App Router) | SSR, routing, React ecosystem |
| UI Components | Shadcn/ui | Rapid development |
| Editor | Monaco Editor | Full markdown support |
| State | React Query + Zustand | Server state + client state |
| **Backend** | | |
| Framework | NestJS | Modular, TypeScript-first, scalable |
| ORM | Prisma | Type-safe, migrations |
| Database | PostgreSQL | Reliable, scalable |
| Real-time | @nestjs/websockets | Native NestJS WebSocket support |
| Git Integration | Octokit | GitHub API |
| Auth | None (MVP) | Add later if needed |

### GitHub Service (Simplified)

```typescript
// lib/github/types.ts
export interface DocFile {
  fileName: string;
  content: string;
  sha?: string | null;
}

// lib/github/service.ts
import { Octokit } from '@octokit/rest';

export class GitHubService {
  private octokit: Octokit;
  private owner: string;
  private repo: string;

  constructor(token: string, repoUrl: string) {
    this.octokit = new Octokit({ auth: token });
    // Parse owner/repo from URL
    const match = repoUrl.match(/github\.com\/([^\/]+)\/([^\/]+)/);
    if (!match) throw new Error('Invalid GitHub URL');
    [, this.owner, this.repo] = match;
  }

  async getDocFile(fileName: string, branch = 'main'): Promise<DocFile> {
    const { data } = await this.octokit.repos.getContent({
      owner: this.owner,
      repo: this.repo,
      path: `docs/${fileName}`,
      ref: branch,
    });
    // Decode base64 content
    return {
      fileName,
      content: Buffer.from((data as any).content, 'base64').toString(),
      sha: (data as any).sha,
    };
  }

  async getAllDocs(branch = 'main'): Promise<DocFile[]> { /* ... */ }
  async pushDoc(fileName: string, content: string, message: string): Promise<void> { /* ... */ }
}
```

### Claude Code Hooks

#### Pre-session Hook (check-platform.sh)

```bash
#!/bin/bash
set -e  # Exit on error

PLATFORM_URL="${AI_TOOLKIT_PLATFORM_URL:-http://localhost:3000}"
API_KEY="${AI_TOOLKIT_API_KEY}"
PROJECT_ID="${AI_TOOLKIT_PROJECT_ID}"
TIMEOUT=10  # seconds
MAX_RETRIES=3

# Helper: API call with timeout, retry, and error handling
api_call() {
  local endpoint="$1"
  local attempt=1

  while [ $attempt -le $MAX_RETRIES ]; do
    response=$(curl -s --fail --max-time $TIMEOUT \
      -H "X-API-Key: $API_KEY" \
      "$PLATFORM_URL/api/hook/$endpoint" 2>/dev/null) && {
      echo "$response"
      return 0
    }

    echo "⚠️ API call failed (attempt $attempt/$MAX_RETRIES)" >&2
    attempt=$((attempt + 1))
    sleep 1
  done

  return 1
}

check_lock() {
  response=$(api_call "status/$PROJECT_ID") || {
    echo "⚠️ Cannot reach Platform. Checking cached .docs/..."
    if [ -d "./.docs" ] && [ -f "./.docs/.sync-hash" ]; then
      echo "✅ Using cached .docs/ (offline mode)"
      return 0
    else
      echo "❌ No cached docs. Please connect to Platform first."
      exit 1
    fi
  }

  locked=$(echo "$response" | jq -r '.locked')
  lockedBy=$(echo "$response" | jq -r '.lockedBy')
  lockedAt=$(echo "$response" | jq -r '.lockedAt // empty')

  if [ "$locked" == "true" ]; then
    echo "⛔ Project locked by $lockedBy"
    [ -n "$lockedAt" ] && echo "   Since: $lockedAt"
    echo "   Docs being updated. Please wait..."
    exit 1
  fi
}

check_sync() {
  response=$(api_call "docs/$PROJECT_ID") || {
    echo "⚠️ Cannot check for updates. Using cached docs."
    return 0
  }

  remote_hash=$(echo "$response" | jq -r '.hash')

  # Read from .docs/ (Platform-synced folder)
  local_hash=$(cat ./.docs/.sync-hash 2>/dev/null || echo "")

  if [ "$remote_hash" != "$local_hash" ]; then
    echo "📥 Docs have updates. Syncing to .docs/..."
    sync_docs "$remote_hash"
  fi
}

sync_docs() {
  local hash="$1"

  # Create .docs/ if not exists
  mkdir -p ./.docs

  # Download docs from Platform API
  docs_response=$(api_call "sync/$PROJECT_ID") || {
    echo "❌ Sync failed. Please check connection."
    exit 1
  }

  echo "$docs_response" | jq -c '.docs[]' | while read -r doc; do
    fileName=$(echo "$doc" | jq -r '.fileName')
    content=$(echo "$doc" | jq -r '.content')
    echo "$content" > "./.docs/$fileName"
  done

  echo "$hash" > ./.docs/.sync-hash
  echo "✅ Docs synced to .docs/ successfully"
}

check_lock
check_sync
```

#### Docs Protection Hook (protect-docs.sh)

```bash
#!/bin/bash

if [[ "$CLAUDE_OPERATION" == "write" || "$CLAUDE_OPERATION" == "edit" ]]; then
  # Block both .docs/ (Platform-synced) and docs/ (Git-tracked)
  if [[ "$CLAUDE_TARGET_FILE" == *"/.docs/"* ]] || \
     [[ "$CLAUDE_TARGET_FILE" == *"/docs/"* ]]; then
    echo "⛔ BLOCKED: docs folders are read-only"
    echo "   .docs/ = Platform-synced (for Claude)"
    echo "   docs/  = Git-tracked (for GitHub viewing)"
    echo "   Only Tech Lead can modify via Platform"
    exit 1
  fi
fi
```

#### Project .gitignore (Required)

```gitignore
# Platform-synced docs (Claude reads from here)
.docs/
```

#### Project CLAUDE.md (Required)

```markdown
## Documentation

Read these files before coding:
- .docs/project-overview-pdr.md
- .docs/code-standards.md
- .docs/codebase-summary.md
- .docs/design-guidelines.md
- .docs/deployment-guide.md
- .docs/system-architecture.md

NOTE: These files are synced from AI Toolkit Platform. DO NOT modify directly.
```

---

## Security Considerations

### Authentication Layers

| Layer | Mechanism | Purpose |
|-------|-----------|---------|
| Platform UI | Session (future) | Tech Lead access |
| Hook API | API Key | Claude Code access |
| Git Provider | Personal Access Token | Push/pull docs |

### Data Protection

| Data | Protection |
|------|------------|
| Git tokens | Encrypted in DB (AES-256) |
| API keys | Hashed, never displayed after creation |
| Docs content | Cached in DB, source in Git |

### Access Control

| Action | Who Can Do |
|--------|------------|
| View docs | All (via Git) |
| Edit docs | Tech Lead only (via Platform) |
| Lock/unlock | Tech Lead only |
| Generate API key | Tech Lead only |
| Use API key | Any dev (for hooks) |

### Git Protection

- Branch protection on `main`
- CODEOWNERS for `docs/`
- Require PR for direct pushes
- Platform uses admin token

---

## Implementation Roadmap

### Phase 1: Core MVP (Week 1-2)

| Task | Priority | Effort |
|------|----------|--------|
| NestJS backend setup + Prisma | High | 3h |
| Next.js frontend setup | High | 2h |
| Database schema + migrations | High | 2h |
| GitHub service (Octokit) | High | 4h |
| Project CRUD API (NestJS) | High | 3h |
| Docs management API (NestJS) | High | 4h |
| Lock mechanism API (NestJS) | High | 3h |
| Basic dashboard UI (Next.js) | High | 4h |
| Docs editor (Monaco) | High | 6h |
| Claude Code hooks | High | 4h |

### Phase 2: Polish (Week 2-3)

| Task | Priority | Effort |
|------|----------|--------|
| WebSocket Gateway (NestJS) | Medium | 4h |
| API key management | Medium | 3h |
| Auto-lock timeout | Medium | 2h |
| Error handling + logging | Medium | 3h |
| UI polish | Medium | 4h |
| GitHub branch protection setup | Medium | 2h |

### Phase 3: Production Ready (Week 3-4)

| Task | Priority | Effort |
|------|----------|--------|
| Authentication (if needed) | Low | 6h |
| Deployment setup (Docker) | Medium | 4h |
| Documentation | Medium | 3h |
| Testing | Medium | 4h |
| Team onboarding | Medium | 2h |

### Phase 4: Future (Post-MVP)

| Task | Priority | Effort |
|------|----------|--------|
| GitLab provider (when needed) | Low | 4h |
| Multi-provider support | Low | 6h |

---

## Risk Assessment

| Risk | Probability | Impact | Mitigation |
|------|-------------|--------|------------|
| Git API rate limits | Medium | High | Cache docs locally, batch updates |
| Token exposure | Low | Critical | Encrypt tokens, never log |
| Lock not released | Medium | Medium | Auto-timeout (30 min) |
| Docs desync | Low | High | Hash verification, auto-sync |
| Platform downtime | Low | High | Claude hooks fallback to cached |
| Merge conflicts | Low | Medium | Platform always pushes first |

---

## Success Metrics

| Metric | Target | Measurement |
|--------|--------|-------------|
| AI code consistency | 90%+ similar patterns | Code review sampling |
| Docs sync latency | < 5 seconds | Platform logs |
| Lock conflicts | 0 | Platform logs |
| Dev adoption | 100% | Hook installation check |
| Tech Lead satisfaction | Positive feedback | Survey |

---

## Next Steps

### Immediate Actions

1. **Setup Development Environment**
   - Create monorepo structure (apps/frontend, apps/backend)
   - Setup NestJS + Prisma backend
   - Setup Next.js frontend
   - Configure PostgreSQL (local Docker)

2. **Create GitHub Test Repo**
   - Create private repo
   - Add 6 docs files
   - Generate Personal Access Token

3. **Implement Core Features**
   - Start with GitHub service (Octokit) in NestJS
   - Then Project CRUD controllers
   - Then Lock mechanism
   - Then frontend dashboard + Docs editor

4. **Create Claude Code Hooks**
   - Install in ~/.claude/hooks/
   - Test with test repo

### Future Considerations

- Authentication (GitHub OAuth)
- GitLab provider (when Enterprise available)
- Multi-user roles (Admin, Editor, Viewer)
- Audit log for all changes
- Version history with diff view
- Webhook for PR labeling
- Slack/Discord notifications
- Analytics dashboard

---

## Unresolved Questions

1. **Hosting decision:** Cloud provider not yet decided by CEO. May affect architecture (serverless vs container).

2. **Auth timeline:** When is authentication needed? Current design is no-auth MVP.

3. **~~Offline support:~~** ✅ RESOLVED - Using `.docs/` hybrid approach:
   - If Platform unreachable: Hook fails, dev cannot start session (safe fallback)
   - Cached `.docs/` always available for reference
   - No conflict with git workflow

4. **Multi-project per repo:** Some repos may have multiple "projects" (monorepo). Need to clarify scope.

5. **Docs versioning strategy:** Keep all versions or only latest? Storage implications.

---

## Changelog

| Date | Changes |
|------|---------|
| 260103-1704 | Initial brainstorm |
| 260103-1751 | Updated: GitHub-only + Next.js/NestJS stack |
| 260103-1802 | Updated: Hybrid `.docs/` sync approach - Platform syncs to `.docs/` (gitignored), `docs/` remains git-tracked for GitHub viewing |

---

*Generated by AI Toolkit Brainstorm Agent*
*Session: 260103-1704*
</file>

<file path="plans/reports/researcher-260103-1819-nestjs-prisma-best-practices.md">
# NestJS + Prisma Best Practices 2025-2026

**Context**: AI Toolkit Sync Platform - centralized docs management with project CRUD, docs editor w/ locks, GitHub sync, API keys for Claude Code hooks

## 1. Project Structure (Monorepo)

**Recommended Tools**: Nx or Turborepo over Yarn Workspaces/PNPM

```
apps/
  api/                    # NestJS backend
libs/
  prisma/                 # Centralized DB layer
    schema.prisma
    src/prisma.service.ts
  common/                 # Shared types/interfaces
  core/                   # NestJS utilities/services
  github/                 # GitHub integration
  websocket/              # WebSocket logic
```

**Key Patterns**:
- Dedicated Prisma library for single source of truth
- Separate shared modules by concern (common, core, utils)
- Apps consume libs via DI

## 2. Prisma Setup

**Schema Design**:
```prisma
// libs/prisma/schema.prisma
generator client {
  provider = "prisma-client-js"
  output   = "../node_modules/.prisma/client" // Custom path for monorepo
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Project {
  id        String   @id @default(cuid())
  name      String
  docs      Doc[]
  apiKeys   ApiKey[]
  createdAt DateTime @default(now())
}

model Doc {
  id        String   @id @default(cuid())
  content   String
  lockedBy  String?
  lockedAt  DateTime?
  projectId String
  project   Project  @relation(fields: [projectId], references: [id])
  @@index([projectId])
}
```

**Service Pattern**:
```typescript
// libs/prisma/src/prisma.service.ts
@Injectable()
export class PrismaService extends PrismaClient implements OnModuleInit {
  async onModuleInit() {
    await this.$connect();
  }

  async enableShutdownHooks(app: INestApplication) {
    this.$on('beforeExit', async () => {
      await app.close();
    });
  }
}
```

**Connection Pooling**: Use `DATABASE_URL` with connection limit param:
```
postgresql://user:pass@host:5432/db?connection_limit=10&pool_timeout=20
```

**Migrations**:
- `prisma migrate dev` - development
- `prisma migrate deploy` - production
- Auto-run `prisma generate` post-schema changes (package.json postinstall hook)

## 3. WebSocket Gateway (Real-time Notifications)

**Setup**:
```typescript
// libs/websocket/src/notifications.gateway.ts
@WebSocketGateway({ cors: true })
export class NotificationsGateway implements OnGatewayConnection, OnGatewayDisconnect {
  @WebSocketServer() server: Server;

  constructor(private readonly redis: RedisService) {}

  async handleConnection(client: Socket) {
    const userId = await this.authenticateSocket(client);
    client.join(`user:${userId}`);
  }

  private async authenticateSocket(client: Socket): Promise<string> {
    const token = client.handshake.auth.token;
    // Validate JWT, return userId
  }

  notifyDocLock(projectId: string, docId: string, userId: string) {
    this.server.to(`project:${projectId}`).emit('doc:locked', { docId, userId });
  }
}
```

**Scalability**:
- Use Redis adapter for multi-instance broadcasting:
```typescript
import { IoAdapter } from '@nestjs/platform-socket.io';
import { createAdapter } from '@socket.io/redis-adapter';

const redisAdapter = createAdapter(pubClient, subClient);
app.useWebSocketAdapter(new IoAdapter(app));
```
- Implement sticky sessions for load balancing
- Queue offline notifications using BullMQ/Redis

**Security**:
- JWT auth during handshake
- Guards for event-level authorization
- WSS (SSL/TLS) only
- Validate all incoming messages with DTOs

## 4. GitHub Integration (Octokit)

**Module Pattern**:
```typescript
// libs/github/src/github.module.ts
@Module({
  imports: [ConfigModule],
  providers: [GitHubService, OctokitProvider],
  exports: [GitHubService],
})
export class GitHubModule {}

// libs/github/src/github.service.ts
@Injectable()
export class GitHubService {
  constructor(
    @Inject('OCTOKIT') private octokit: Octokit,
    private cache: CacheManager,
  ) {}

  async syncDocs(repo: string, branch: string): Promise<void> {
    const cached = await this.cache.get(`sync:${repo}:${branch}`);
    if (cached) return cached;

    const { data } = await this.octokit.rest.repos.getContent({
      owner: 'org',
      repo,
      path: 'docs',
    });
    // Process & cache
  }
}
```

**Best Practices**:
- Use `nestjs-octokit` module for DI integration
- Store PATs/OAuth tokens in env vars (accessed via `@nestjs/config`)
- Adapter pattern for testability (mock adapters)
- Rate limiting with `@nestjs/throttler` or Octokit throttling plugin
- Cache frequently accessed data

## 5. API Design & Validation

**DTO Pattern**:
```typescript
// apps/api/src/projects/dto/create-project.dto.ts
import { IsString, IsNotEmpty, MaxLength } from 'class-validator';
import { Transform } from 'class-transformer';

export class CreateProjectDto {
  @IsString()
  @IsNotEmpty()
  @MaxLength(100)
  @Transform(({ value }) => value.trim())
  name: string;

  @IsString()
  @IsOptional()
  description?: string;
}

// Controller
@Post()
@UsePipes(new ValidationPipe({ whitelist: true, forbidNonWhitelisted: true }))
async create(@Body() dto: CreateProjectDto) {
  return this.projectsService.create(dto);
}
```

**Global Validation**:
```typescript
// main.ts
app.useGlobalPipes(new ValidationPipe({
  transform: true,
  whitelist: true,
  forbidNonWhitelisted: true,
}));
```

**API Keys for Claude Code Hooks**:
```typescript
@Injectable()
export class ApiKeyGuard implements CanActivate {
  canActivate(context: ExecutionContext): boolean {
    const request = context.switchToHttp().getRequest();
    const apiKey = request.headers['x-api-key'];
    return this.validateApiKey(apiKey);
  }
}
```

## 6. Error Handling & Logging

**Exception Filter**:
```typescript
@Catch()
export class GlobalExceptionFilter implements ExceptionFilter {
  constructor(private logger: Logger) {}

  catch(exception: unknown, host: ArgumentsHost) {
    const ctx = host.switchToHttp();
    const response = ctx.getResponse();
    const request = ctx.getRequest();

    const status = exception instanceof HttpException
      ? exception.getStatus()
      : HttpStatus.INTERNAL_SERVER_ERROR;

    const message = exception instanceof HttpException
      ? exception.message
      : 'Internal server error';

    this.logger.error(
      `${request.method} ${request.url} - ${status} - ${message}`,
      exception instanceof Error ? exception.stack : '',
    );

    response.status(status).json({
      statusCode: status,
      timestamp: new Date().toISOString(),
      path: request.url,
      message,
    });
  }
}

// main.ts
app.useGlobalFilters(new GlobalExceptionFilter(new Logger()));
```

**Logging Pattern**:
- Use Winston or Pino for structured logging
- Log levels: error, warn, info, debug
- Request ID tracking with middleware
- Centralized logging (e.g., CloudWatch, ELK stack)

---

## Unresolved Questions

1. Prefer PostgreSQL or MongoDB for doc content storage? (consider full-text search needs)
2. GitHub sync strategy: webhook-based or polling? (impacts rate limiting)
3. Doc lock TTL mechanism? (prevent orphaned locks)
4. Multi-tenancy approach for projects? (row-level security vs schema-per-tenant)
</file>

<file path="plans/reports/researcher-260103-1819-nextjs14-monaco-platform.md">
# Next.js 14 + Monaco Editor Platform Research

**Date:** 2026-01-03
**Context:** AI Toolkit Sync Platform Frontend
**Scope:** Project structure, Monaco integration, state, UI, WebSocket, responsive design

---

## 1. Project Structure - Next.js 14 App Router

### Folder Organization
```
app/
├── layout.tsx              # Root layout (REQUIRED: must have <html>/<body>)
├── page.tsx                # "/" route
├── (dashboard)/            # Route group (URL-invisible)
│   ├── layout.tsx          # Dashboard shared layout
│   ├── projects/
│   │   ├── page.tsx        # "/projects" list
│   │   └── [id]/
│   │       ├── page.tsx    # "/projects/:id" detail
│   │       ├── loading.tsx # Suspense fallback
│   │       └── error.tsx   # Error boundary
│   ├── editor/
│   │   └── [docId]/
│   │       └── page.tsx    # "/editor/:docId" Monaco view
│   └── settings/
│       └── page.tsx        # "/settings"
├── api/                    # Route handlers
│   └── projects/
│       └── route.ts        # API endpoint
└── _components/            # Shared components (underscore = private)
    ├── monaco-editor.tsx   # Client component
    └── project-card.tsx
```

### Key Conventions
- **Route groups** `(name)` = organizational folders, no URL segment
- **Dynamic routes** `[param]` = URL parameters
- **Private folders** `_name` = excluded from routing
- **Parallel routes** `@slot` = for complex layouts (modals, sidebars)

### File Conventions
- `page.tsx` → publicly accessible route
- `layout.tsx` → shared UI (persists across navigations)
- `loading.tsx` → Suspense boundary
- `error.tsx` → Error boundary
- `route.ts` → API endpoints

---

## 2. Monaco Editor Integration

### Next.js 14 Setup (Client-Side Only)
```tsx
// app/_components/monaco-editor.tsx
'use client'

import dynamic from 'next/dynamic'
import { useRef } from 'react'

const Editor = dynamic(() => import('@monaco-editor/react'), { ssr: false })

export function MonacoEditor({
  initialContent,
  onSave
}: {
  initialContent: string
  onSave: (content: string) => void
}) {
  const editorRef = useRef(null)

  const handleMount = (editor, monaco) => {
    editorRef.current = editor

    // Auto-save on Ctrl+S
    editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyS, () => {
      onSave(editor.getValue())
    })
  }

  const handleChange = (value) => {
    // Debounced auto-save (implement debounce logic)
    onSave(value)
  }

  return (
    <Editor
      height="90vh"
      defaultLanguage="markdown"
      defaultValue={initialContent}
      onChange={handleChange}
      onMount={handleMount}
      theme="vs-dark"
      options={{
        minimap: { enabled: false },
        fontSize: 14,
        wordWrap: 'on'
      }}
    />
  )
}
```

### Usage in Server Component
```tsx
// app/editor/[docId]/page.tsx
import { MonacoEditor } from '@/app/_components/monaco-editor'

export default async function EditorPage({ params }: { params: Promise<{ docId: string }> }) {
  const { docId } = await params
  const doc = await fetchDocument(docId) // Server-side fetch

  return (
    <div className="h-screen">
      <MonacoEditor
        initialContent={doc.content}
        onSave={(content) => {/* client-side save logic */}}
      />
    </div>
  )
}
```

### Auto-Save Strategies
1. **onChange debounce** → save after 2s idle
2. **Keyboard shortcut** → Ctrl+S manual save
3. **onBlur** → save when focus leaves editor
4. **Periodic interval** → save every 30s if dirty

---

## 3. State Management - TanStack Query + Zustand

### Clear Separation Pattern
- **TanStack Query** → Server state (API data, caching, refetch)
- **Zustand** → Client state (UI toggles, modals, form state)

### TanStack Query Setup (Server → Client Hydration)
```tsx
// app/layout.tsx (Server Component)
import { QueryProvider } from '@/lib/query-provider'

export default function RootLayout({ children }) {
  return (
    <html>
      <body>
        <QueryProvider>{children}</QueryProvider>
      </body>
    </html>
  )
}

// lib/query-provider.tsx (Client Component)
'use client'
import { QueryClient, QueryClientProvider } from '@tanstack/react-query'

export function QueryProvider({ children }) {
  const [queryClient] = useState(() => new QueryClient())
  return <QueryClientProvider client={queryClient}>{children}</QueryClientProvider>
}
```

### Server Component Prefetch + Client Hydration
```tsx
// app/projects/page.tsx (Server Component)
import { HydrationBoundary, QueryClient, dehydrate } from '@tanstack/react-query'
import { ProjectsList } from './_components/projects-list'

export default async function ProjectsPage() {
  const queryClient = new QueryClient()

  await queryClient.prefetchQuery({
    queryKey: ['projects'],
    queryFn: fetchProjects
  })

  return (
    <HydrationBoundary state={dehydrate(queryClient)}>
      <ProjectsList />
    </HydrationBoundary>
  )
}

// _components/projects-list.tsx (Client Component)
'use client'
import { useQuery } from '@tanstack/react-query'

export function ProjectsList() {
  const { data } = useQuery({
    queryKey: ['projects'],
    queryFn: fetchProjects
  })
  // Data already hydrated from server
}
```

### Zustand for UI State
```tsx
// stores/ui-store.ts
import { create } from 'zustand'

export const useUIStore = create((set) => ({
  sidebarOpen: true,
  activeModal: null,
  toggleSidebar: () => set((state) => ({ sidebarOpen: !state.sidebarOpen })),
  openModal: (modal) => set({ activeModal: modal })
}))
```

### Best Practices
- **Per-request Zustand stores** → avoid SSR state leakage
- **Query key conventions** → `['resource', id, filters]`
- **Server Actions + useMutation** → for data mutations

---

## 4. Shadcn/ui Components

### Installation
```bash
npx shadcn@latest init
npx shadcn@latest add dialog button form input label card
```

### Dashboard Layout Pattern
```tsx
// app/(dashboard)/layout.tsx
import { Sidebar } from '@/components/sidebar'
import { Header } from '@/components/header'

export default function DashboardLayout({ children }) {
  return (
    <div className="flex h-screen">
      <Sidebar className="w-64 border-r" />
      <div className="flex-1 flex flex-col">
        <Header className="h-16 border-b" />
        <main className="flex-1 overflow-auto p-6">{children}</main>
      </div>
    </div>
  )
}
```

### Form in Dialog Pattern
```tsx
'use client'
import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog'
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'
import { Label } from '@/components/ui/label'

export function CreateProjectDialog() {
  return (
    <Dialog>
      <DialogTrigger asChild>
        <Button>New Project</Button>
      </DialogTrigger>
      <DialogContent>
        <form onSubmit={handleSubmit}>
          <DialogHeader>
            <DialogTitle>Create Project</DialogTitle>
          </DialogHeader>
          <div className="grid gap-4 py-4">
            <div className="grid gap-2">
              <Label htmlFor="name">Name</Label>
              <Input id="name" name="name" />
            </div>
          </div>
          <Button type="submit">Create</Button>
        </form>
      </DialogContent>
    </Dialog>
  )
}
```

---

## 5. WebSocket Real-Time Lock Notifications

### Native WebSocket vs Socket.io (2025 Consensus)
**Use native WebSocket** for simple real-time needs:
- Lower overhead, no library dependency
- Built-in browser support
- Sufficient for lock notifications

**Use Socket.io** if you need:
- Auto-reconnection with exponential backoff
- Room-based broadcasting
- Fallback transports (long-polling)

### Native WebSocket Pattern (Recommended)
```tsx
// hooks/use-websocket.ts
'use client'
import { useEffect, useState } from 'react'

export function useWebSocket(url: string) {
  const [status, setStatus] = useState<'connecting' | 'connected' | 'disconnected'>('connecting')
  const [message, setMessage] = useState(null)

  useEffect(() => {
    const ws = new WebSocket(url)

    ws.onopen = () => setStatus('connected')
    ws.onmessage = (event) => setMessage(JSON.parse(event.data))
    ws.onerror = () => setStatus('disconnected')
    ws.onclose = () => setStatus('disconnected')

    return () => ws.close()
  }, [url])

  const send = (data) => ws.send(JSON.stringify(data))

  return { status, message, send }
}

// Usage in component
export function EditorLockStatus({ docId }) {
  const { status, message } = useWebSocket(`wss://api.example.com/locks/${docId}`)

  if (message?.locked) {
    return <div className="bg-yellow-100">Locked by {message.user}</div>
  }
  return null
}
```

---

## 6. Responsive Design - Tailwind Patterns

### Mobile-First Breakpoints
```tsx
<div className="
  grid
  grid-cols-1          {/* mobile: 1 column */}
  sm:grid-cols-2       {/* tablet: 2 columns */}
  lg:grid-cols-3       {/* desktop: 3 columns */}
  gap-4
">
  {projects.map(project => <ProjectCard key={project.id} {...project} />)}
</div>
```

### Responsive Sidebar Pattern
```tsx
// components/sidebar.tsx
export function Sidebar() {
  return (
    <>
      {/* Mobile: overlay */}
      <aside className="
        fixed inset-y-0 left-0 z-50 w-64
        transform transition-transform
        lg:relative lg:translate-x-0
        -translate-x-full data-[open]:translate-x-0
      ">
        <nav className="p-4">...</nav>
      </aside>

      {/* Mobile backdrop */}
      <div className="fixed inset-0 bg-black/50 lg:hidden" />
    </>
  )
}
```

### Dashboard Grid Layout
```tsx
<div className="grid gap-6 lg:grid-cols-[280px_1fr]">
  {/* Sidebar */}
  <aside className="hidden lg:block">...</aside>

  {/* Main content */}
  <main className="grid gap-6 md:grid-cols-2 xl:grid-cols-3">
    <Card>...</Card>
    <Card>...</Card>
  </main>
</div>
```

### Utility Patterns
- **Container** → `max-w-7xl mx-auto px-4 sm:px-6 lg:px-8`
- **Stacked → Horizontal** → `flex flex-col sm:flex-row gap-4`
- **Hide/Show** → `hidden md:block` or `md:hidden`

---

## Recommendations

1. **Project Structure**: Use route groups `(dashboard)` for logical separation without URL bloat
2. **Monaco**: Dynamic import with `ssr: false`, implement debounced auto-save (2s idle)
3. **State**: Prefetch in Server Components → hydrate TanStack Query; Zustand for UI-only state
4. **UI**: Shadcn/ui for consistency; Dialog-in-form pattern for modals
5. **WebSocket**: Start with native WebSocket; migrate to Socket.io only if auto-reconnect needed
6. **Responsive**: Mobile-first grid layouts; collapsible sidebar with overlay on mobile

## Unresolved Questions

1. Lock conflict resolution strategy (manual override vs queue-based)?
2. Offline editing support requirements (LocalStorage persistence)?
3. Multi-user cursor tracking needed (beyond lock notifications)?
4. Monaco theme customization (match app theme or fixed dark/light)?
</file>

<file path=".gitignore">
# Dependencies
node_modules/
.pnp/
.pnp.js
.pnpm-store/

# Build outputs
dist/
build/
.next/
out/

# Environment
.env
.env.local
.env.*.local
*.env

# Database
*.db
*.sqlite

# IDE
.idea/
.vscode/
*.swp
*.swo
.DS_Store
Thumbs.db

# Logs
logs/
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*

# Testing
coverage/
.nyc_output/

# Platform-synced docs (for client projects using this platform)
.docs/

# Temp files
tmp/
.tmp/
*.tmp

# Prisma
apps/backend/prisma/migrations/*_migration.sql
</file>

<file path="docker-compose.yml">
services:
  postgres:
    image: postgres:16-alpine
    container_name: aitoolkit-db
    environment:
      POSTGRES_USER: ${POSTGRES_USER:-aitoolkit}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD:-aitoolkit_dev}
      POSTGRES_DB: ${POSTGRES_DB:-aitoolkit}
    ports:
      - "${POSTGRES_PORT:-5432}:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U ${POSTGRES_USER:-aitoolkit}"]
      interval: 10s
      timeout: 5s
      retries: 5

volumes:
  postgres_data:
</file>

<file path="package.json">
{
  "name": "ai-toolkit-sync-platform",
  "version": "0.1.0",
  "private": true,
  "description": "Centralized docs management for AI-assisted development teams",
  "scripts": {
    "dev": "pnpm -r --parallel run dev",
    "dev:backend": "pnpm --filter backend run dev",
    "dev:frontend": "pnpm --filter frontend run dev",
    "build": "pnpm -r run build",
    "build:backend": "pnpm --filter backend run build",
    "build:frontend": "pnpm --filter frontend run build",
    "lint": "pnpm -r run lint",
    "test": "pnpm -r run test",
    "db:migrate": "pnpm --filter backend prisma migrate dev",
    "db:generate": "pnpm --filter backend prisma generate",
    "db:studio": "pnpm --filter backend prisma studio"
  },
  "devDependencies": {
    "typescript": "^5.4.0"
  },
  "engines": {
    "node": ">=20.0.0"
  }
}
</file>

<file path="pnpm-workspace.yaml">
packages:
  - 'apps/*'

onlyBuiltDependencies:
  - '@nestjs/core'
  - '@prisma/client'
  - '@prisma/engines'
  - prisma
  - unrs-resolver
</file>

<file path="README.md">
# AI Toolkit Sync Platform

Centralized docs management for AI-assisted development teams.

## Problem

Multi-developer teams using AI coding assistants (Claude Code) produce inconsistent code due to:
- Different prompts → different code styles
- No centralized "source of truth" for AI context
- Docs can be accidentally modified

## Solution

Web platform that:
- Centralizes 6 docs files as source of truth
- Only Tech Lead can modify docs via Platform
- Auto-syncs to all dev workstations via `.docs/` folder
- Locks project when docs being updated
- Integrates with Claude Code via hooks

## Tech Stack

- **Frontend:** Next.js 14 (App Router) + Shadcn/ui + Monaco Editor
- **Backend:** NestJS + Prisma + PostgreSQL
- **Real-time:** WebSocket (NestJS Gateway)
- **Git Integration:** GitHub (Octokit)

## Project Structure

```
ai-toolkit-sync-platform/
├── apps/
│   ├── backend/          # NestJS API
│   └── frontend/         # Next.js app
├── docs/                  # Project documentation
├── scripts/              # Claude Code hooks & utilities
└── package.json          # Monorepo config
```

## Development

```bash
# Install dependencies
npm install

# Start dev servers (backend + frontend)
npm run dev

# Backend only
npm run dev:backend

# Frontend only
npm run dev:frontend
```

## Documentation

See `./docs/` for:
- `project-overview-pdr.md` - Product requirements
- `code-standards.md` - Coding conventions
- `system-architecture.md` - Technical architecture
- `design-guidelines.md` - UI/UX standards
</file>

<file path="tsconfig.base.json">
{
  "compilerOptions": {
    "target": "ES2022",
    "module": "NodeNext",
    "moduleResolution": "NodeNext",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "declaration": true,
    "declarationMap": true
  }
}
</file>

</files>
